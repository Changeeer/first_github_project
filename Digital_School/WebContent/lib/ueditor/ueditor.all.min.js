!function(){function getListener(a,b,c){var d;return b=b.toLowerCase(),(d=a.__allListeners||c&&(a.__allListeners={}))&&(d[b]||c&&(d[b]=[]))}function getDomNode(a,b,c,d,e,f){var g=d&&a[b],h;!g&&(g=a[c]);while(!g&&(h=(h||a).parentNode)){if(h.tagName=="BODY"||f&&!f(h))return null;g=h[c]}return g&&e&&!e(g)?getDomNode(g,b,c,!1,e):g}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,window.UE=baidu.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE._customizeUI={},UE.version="1.4.3";var dom=UE.dom={},browser=UE.browser=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(a),opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,mac:a.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"};c.gecko=navigator.product=="Gecko"&&!c.webkit&&!c.opera&&!c.ie;var d=0;if(c.ie){var e=a.match(/(?:msie\s([\w.]+))/),f=a.match(/(?:trident.*rv:([\w.]+))/);e&&f&&e[1]&&f[1]?d=Math.max(e[1]*1,f[1]*1):e&&e[1]?d=e[1]*1:f&&f[1]?d=f[1]*1:d=0,c.ie11Compat=document.documentMode==11,c.ie9Compat=document.documentMode==9,c.ie8=!!document.documentMode,c.ie8Compat=document.documentMode==8,c.ie7Compat=d==7&&!document.documentMode||document.documentMode==7,c.ie6Compat=d<7||c.quirks,c.ie9above=d>8,c.ie9below=d<9,c.ie11above=d>10,c.ie11below=d<11}if(c.gecko){var g=a.match(/rv:([\d\.]+)/);g&&(g=g[1].split("."),d=g[0]*1e4+(g[1]||0)*100+(g[2]||0)*1)}return/chrome\/(\d+\.\d)/i.test(a)&&(c.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)&&(c.safari=+(RegExp.$1||RegExp.$2)),c.opera&&(d=parseFloat(b.version())),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),c.version=d,c.isCompatible=!c.mobile&&(c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1),c}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UE.utils={each:function(a,b,c){if(a==null)return;if(a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a)===!1)return!1}else for(var f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],f,a)===!1)return!1},makeInstance:function(a){var b=new Function;return b.prototype=a,a=new b,b.prototype=null,a},extend:function(a,b,c){if(b)for(var d in b)if(!c||!a.hasOwnProperty(d))a[d]=b[d];return a},extend2:function(a){var b=arguments;for(var c=1;c<b.length;c++){var d=b[c];for(var e in d)a.hasOwnProperty(e)||(a[e]=d[e])}return a},inherits:function(a,b){var c=a.prototype,d=utils.makeInstance(b.prototype);return utils.extend(d,c,!0),a.prototype=d,d.constructor=a},bind:function(a,b){return function(){return a.apply(b,arguments)}},defer:function(a,b,c){var d;return function(){c&&clearTimeout(d),d=setTimeout(a,b)}},indexOf:function(a,b,c){var d=-1;return c=this.isNumber(c)?c:0,this.each(a,function(a,e){if(e>=c&&a===b)return d=e,!1}),d},removeItem:function(a,b){for(var c=0,d=a.length;c<d;c++)a[c]===b&&(a.splice(c,1),c--)},trim:function(a){return a.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(a){if(!a)return{};a=utils.isArray(a)?a:a.split(",");for(var b=0,c,d={};c=a[b++];)d[c.toUpperCase()]=d[c]=1;return d},unhtml:function(a,b){return a?a.replace(b||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(a,b){return b?a:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},html:function(a){return a?a.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(a){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[a]}):""},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b={"float":a.cssFloat!=undefined?"cssFloat":a.styleFloat!=undefined?"styleFloat":"float"};return function(a){return b[a]||(b[a]=a.toLowerCase().replace(/-./g,function(a){return a.charAt(1).toUpperCase()}))}}(),loadFile:function(){function b(b,c){try{for(var d=0,e;e=a[d++];)if(e.doc===b&&e.url==(c.src||c.href))return e}catch(f){return null}}var a=[];return function(c,d,e){var f=b(c,d);if(f){f.ready?e&&e():f.funs.push(e);return}a.push({doc:c,url:d.src||d.href,funs:[e]});if(!c.body){var g=[];for(var h in d){if(h=="tag")continue;g.push(h+'="'+d[h]+'"')}c.write("<"+d.tag+" "+g.join(" ")+" ></"+d.tag+">");return}if(d.id&&c.getElementById(d.id))return;var i=c.createElement(d.tag);delete d.tag;for(var h in d)i.setAttribute(h,d[h]);i.onload=i.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){f=b(c,d);if(f.funs.length>0){f.ready=1;for(var a;a=f.funs.pop();)a()}i.onload=i.onreadystatechange=null}},i.onerror=function(){throw Error("The load "+(d.href||d.src)+" fails,check the url settings of file ueditor.config.js ")},c.getElementsByTagName("head")[0].appendChild(i)}}(),isEmptyObject:function(a){if(a==null)return!0;if(this.isArray(a)||this.isString(a))return a.length===0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},fixColor:function(a,b){if(/color/i.test(a)&&/rgba?/.test(b)){var c=b.split(",");if(c.length>3)return"";b="#";for(var d=0,e;e=c[d++];)e=parseInt(e.replace(/[^\d]/gi,""),10).toString(16),b+=e.length==1?"0"+e:e;b=b.toUpperCase()}return b},optCss:function(a){function e(a,b){if(!a)return"";var c=a.top,d=a.bottom,e=a.left,f=a.right,g="";if(!c||!e||!d||!f)for(var h in a)g+=";"+b+"-"+h+":"+a[h]+";";else g+=";"+b+":"+(c==d&&d==e&&e==f?c:c==d&&e==f?c+" "+e:e==f?c+" "+e+" "+d:c+" "+f+" "+d+" "+e)+";";return g}var b,c,d;return a=a.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(a,d,e,f){if(f.split(" ").length==1)switch(d){case"padding":return!b&&(b={}),b[e]=f,"";case"margin":return!c&&(c={}),c[e]=f,"";case"border":return f=="initial"?"":a}return a}),a+=e(b,"padding")+e(c,"margin"),a.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(a,b){return b?b+";;":";"})},clone:function(a,b){var c;b=b||{};for(var d in a)a.hasOwnProperty(d)&&(c=a[d],typeof c=="object"?(b[d]=utils.isArray(c)?[]:{},utils.clone(a[d],b[d])):b[d]=c);return b},transUnitToPx:function(a){if(!/(pt|cm)/.test(a))return a;var b;a.replace(/([\d.]+)(\w+)/,function(c,d,e){a=d,b=e});switch(b){case"cm":a=parseFloat(a)*25;break;case"pt":a=Math.round(parseFloat(a)*96/72)}return a+(a?"px":"")},domReady:function(){function b(b){b.isReady=!0;for(var c;c=a.pop();c());}var a=[];return function(c,d){d=d||window;var e=d.document;c&&a.push(c),e.readyState==="complete"?b(e):(e.isReady&&b(e),browser.ie&&browser.version!=11?(!function(){if(e.isReady)return;try{e.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}b(e)}(),d.attachEvent("onload",function(){b(e)})):(e.addEventListener("DOMContentLoaded",function(){e.removeEventListener("DOMContentLoaded",arguments.callee,!1),b(e)},!1),d.addEventListener("load",function(){b(e)},!1)))}}(),cssRule:browser.ie&&browser.version!=11?function(a,b,c){var d,e;if(b===undefined||b&&b.nodeType&&b.nodeType==9)return c=b&&b.nodeType&&b.nodeType==9?b:c||document,d=c.indexList||(c.indexList={}),e=d[a],e!==undefined?c.styleSheets[e].cssText:undefined;c=c||document,d=c.indexList||(c.indexList={}),e=d[a];if(b==="")return e!==undefined?(c.styleSheets[e].cssText="",delete d[a],!0):!1;e!==undefined?sheetStyle=c.styleSheets[e]:(sheetStyle=c.createStyleSheet("",e=c.styleSheets.length),d[a]=e),sheetStyle.cssText=b}:function(a,b,c){var d,e;if(b===undefined||b&&b.nodeType&&b.nodeType==9)return c=b&&b.nodeType&&b.nodeType==9?b:c||document,e=c.getElementById(a),e?e.innerHTML:undefined;c=c||document,e=c.getElementById(a);if(b==="")return e?(e.parentNode.removeChild(e),!0):!1;e?e.innerHTML=b:(e=c.createElement("style"),e.id=a,e.innerHTML=b,c.getElementsByTagName("head")[0].appendChild(e))},sort:function(a,b){b=b||function(a,b){return a.localeCompare(b)};for(var c=0,d=a.length;c<d;c++)for(var e=c,f=a.length;e<f;e++)if(b(a[c],a[e])>0){var g=a[c];a[c]=a[e],a[e]=g}return a},serializeParam:function(a){var b=[];for(var c in a){if(c=="method"||c=="timeout"||c=="async")continue;if((typeof a[c]).toLowerCase()!="function"&&(typeof a[c]).toLowerCase()!="object")b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));else if(utils.isArray(a[c]))for(var d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"[]="+encodeURIComponent(a[c][d]))}return b.join("&")},formatUrl:function(a){var b=a.replace(/&&/g,"&");return b=b.replace(/\?&/g,"?"),b=b.replace(/&$/g,""),b=b.replace(/&#/g,"#"),b=b.replace(/&+/g,"&"),b},isCrossDomainUrl:function(a){var b=document.createElement("a");return b.href=a,browser.ie&&(b.href=b.href),b.protocol!=location.protocol||b.hostname!=location.hostname||!(b.port==location.port||b.port=="80"&&location.port==""||b.port==""&&location.port=="80")},clearEmptyAttrs:function(a){for(var b in a)a[b]===""&&delete a[b];return a},str2json:function(a){return utils.isString(a)?window.JSON?JSON.parse(a):(new Function("return "+utils.trim(a||"")))():null},json2str:function(){if(window.JSON)return JSON.stringify;var a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function b(b){return/["\\\x00-\x1f]/.test(b)&&(b=b.replace(/["\\\x00-\x1f]/g,function(b){var c=a[b];return c?c:(c=b.charCodeAt(),"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16))})),'"'+b+'"'}function c(a){var b=["["],c=a.length,d,e,f;for(e=0;e<c;e++){f=a[e];switch(typeof f){case"undefined":case"function":case"unknown":break;default:d&&b.push(","),b.push(utils.json2str(f)),d=1}}return b.push("]"),b.join("")}function d(a){return a<10?"0"+a:a}function e(a){return'"'+a.getFullYear()+"-"+d(a.getMonth()+1)+"-"+d(a.getDate())+"T"+d(a.getHours())+":"+d(a.getMinutes())+":"+d(a.getSeconds())+'"'}return function(a){switch(typeof a){case"undefined":return"undefined";case"number":return isFinite(a)?String(a):"null";case"string":return b(a);case"boolean":return String(a);default:if(a===null)return"null";if(utils.isArray(a))return c(a);if(utils.isDate(a))return e(a);var d=["{"],f=utils.json2str,g,h;for(var i in a)if(Object.prototype.hasOwnProperty.call(a,i)){h=a[i];switch(typeof h){case"undefined":case"unknown":case"function":break;default:g&&d.push(","),g=1,d.push(f(i)+":"+f(h))}}return d.push("}"),d.join("")}}}()};utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(a){UE.utils["is"+a]=function(b){return Object.prototype.toString.apply(b)=="[object "+a+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(a,b){a=utils.trim(a).split(/\s+/);for(var c=0,d;d=a[c++];)getListener(this,d,!0).push(b)},on:function(a,b){return this.addListener(a,b)},off:function(a,b){return this.removeListener(a,b)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(a,b){a=utils.trim(a).split(/\s+/);for(var c=0,d;d=a[c++];)utils.removeItem(getListener(this,d)||[],b)},fireEvent:function(){var a=arguments[0];a=utils.trim(a).split(" ");for(var b=0,c;c=a[b++];){var d=getListener(this,c),e,f,g;if(d){g=d.length;while(g--){if(!d[g])continue;f=d[g].apply(this,arguments);if(f===!0)return f;f!==undefined&&(e=f)}}if(f=this["on"+c.toLowerCase()])e=f.apply(this,arguments)}return e}};var dtd=dom.dtd=function(){function a(a){for(var b in a)a[b.toUpperCase()]=a[b];return a}var b=utils.extend2,c=a({isindex:1,fieldset:1}),d=a({input:1,button:1,select:1,textarea:1,label:1}),e=b(a({a:1}),d),f=b({iframe:1},e),g=a({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),h=a({ins:1,del:1,script:1,style:1}),i=b(a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),h),j=b(a({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),i),k=b(a({p:1}),j),l=b(a({iframe:1}),j,d),m=a({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),n=b(a({a:0}),l),o=a({tr:1}),p=a({"#":1}),q=b(a({param:1}),m),r=b(a({form:1}),c,f,g,k),s=a({li:1,ol:1,ul:1}),t=a({style:1,script:1}),u=a({base:1,link:1,meta:1,title:1}),v=b(u,t),w=a({head:1,body:1}),x=a({html:1}),y=a({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),z=a({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return a({$nonBodyContent:b(x,w,u),$block:y,$inline:n,$inlineWithA:b(a({a:1}),n),$body:b(a({script:1,style:1}),y),$cdata:a({script:1,style:1}),$empty:z,$nonChild:a({iframe:1,textarea:1}),$listItem:a({dd:1,dt:1,li:1}),$list:a({ul:1,ol:1,dl:1}),$isNotEmpty:a({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:a({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:a({p:1,div:1}),$tableContent:a({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:a({pre:1,script:1,style:1,textarea:1}),html:w,head:v,style:p,script:p,body:r,base:{},link:{},meta:{},title:p,col:{},tr:a({td:1,th:1}),img:{},embed:{},colgroup:a({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:r,td:r,br:{},th:r,center:r,kbd:n,button:b(k,g),basefont:{},h5:n,h4:n,samp:n,h6:n,ol:s,h1:n,h3:n,option:p,h2:n,form:b(c,f,g,k),select:a({optgroup:1,option:1}),font:n,ins:n,menu:s,abbr:n,label:n,table:a({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:n,tfoot:o,cite:n,li:r,input:{},iframe:r,strong:n,textarea:p,noframes:r,big:n,small:n,span:a({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:n,dt:n,sub:n,optgroup:a({option:1}),param:{},bdo:n,"var":n,div:r,object:q,sup:n,dd:r,strike:n,area:{},dir:s,map:b(a({area:1,form:1,p:1}),c,h,g),applet:q,dl:a({dt:1,dd:1}),del:n,isindex:{},fieldset:b(a({legend:1}),m),thead:o,ul:s,acronym:n,b:n,a:b(a({a:1}),l),blockquote:b(a({td:1,tr:1,tbody:1,li:1}),r),caption:n,i:n,u:n,tbody:o,s:n,address:b(f,k),tt:n,legend:n,q:n,pre:b(i,e),p:b(a({a:1}),n),em:n,dfn:n})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"﻿":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(a,b){if(a===b)return 0;var c,d=[a],e=[b];c=a;while(c=c.parentNode){if(c===b)return 10;d.push(c)}c=b;while(c=c.parentNode){if(c===a)return 20;e.push(c)}d.reverse(),e.reverse();if(d[0]!==e[0])return 1;var f=-1;while(f++,d[f]===e[f]);a=d[f],b=e[f];while(a=a.nextSibling)if(a===b)return 4;return 2},getNodeIndex:function(a,b){var c=a,d=0;while(c=c.previousSibling){if(b&&c.nodeType==3){c.nodeType!=c.nextSibling.nodeType&&d++;continue}d++}return d},inDoc:function(a,b){return domUtils.getPosition(a,b)==10},findParent:function(a,b,c){if(a&&!domUtils.isBody(a)){a=c?a:a.parentNode;while(a){if(!b||b(a)||domUtils.isBody(a))return b&&!b(a)&&domUtils.isBody(a)?null:a;a=a.parentNode}}return null},findParentByTagName:function(a,b,c,d){return b=utils.listToMap(utils.isArray(b)?b:[b]),domUtils.findParent(a,function(a){return b[a.tagName]&&(!d||!d(a))},c)},findParents:function(a,b,c,d){var e=b&&(c&&c(a)||!c)?[a]:[];while(a=domUtils.findParent(a,c))e.push(a);return d?e:e.reverse()},insertAfter:function(a,b){return a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)},remove:function(a,b){var c=a.parentNode,d;if(c){if(b&&a.hasChildNodes())while(d=a.firstChild)c.insertBefore(d,a);c.removeChild(a)}return a},getNextDomNode:function(a,b,c,d){return getDomNode(a,"firstChild","nextSibling",b,c,d)},getPreDomNode:function(a,b,c,d){return getDomNode(a,"lastChild","previousSibling",b,c,d)},isBookmarkNode:function(a){return a.nodeType==1&&a.id&&/^_baidu_bookmark_/i.test(a.id)},getWindow:function(a){var b=a.ownerDocument||a;return b.defaultView||b.parentWindow},getCommonAncestor:function(a,b){if(a===b)return a;var c=[a],d=[b],e=a,f=-1;while(e=e.parentNode){if(e===b)return e;c.push(e)}e=b;while(e=e.parentNode){if(e===a)return e;d.push(e)}c.reverse(),d.reverse();while(f++,c[f]===d[f]);return f==0?null:c[f-1]},clearEmptySibling:function(a,b,c){function d(a,b){var c;while(a&&!domUtils.isBookmarkNode(a)&&(domUtils.isEmptyInlineElement(a)||!(new RegExp("[^	\n\r"+domUtils.fillChar+"]")).test(a.nodeValue)))c=a[b],domUtils.remove(a),a=c}!b&&d(a.nextSibling,"nextSibling"),!c&&d(a.previousSibling,"previousSibling")},split:function(a,b){var c=a.ownerDocument;if(browser.ie&&b==a.nodeValue.length){var d=c.createTextNode("");return domUtils.insertAfter(a,d)}var e=a.splitText(b);if(browser.ie8){var f=c.createTextNode("");domUtils.insertAfter(e,f),domUtils.remove(f)}return e},isWhitespace:function(a){return!(new RegExp("[^ 	\n\r"+domUtils.fillChar+"]")).test(a.nodeValue)},getXY:function(a){var b=0,c=0;while(a.offsetParent)c+=a.offsetTop,b+=a.offsetLeft,a=a.offsetParent;return{x:b,y:c}},on:function(a,b,c){var d=utils.isArray(b)?b:utils.trim(b).split(/\s+/),e=d.length;if(e)while(e--){b=d[e];if(a.addEventListener)a.addEventListener(b,c,!1);else{c._d||(c._d={els:[]});var f=b+c.toString(),g=utils.indexOf(c._d.els,a);if(!c._d[f]||g==-1)g==-1&&c._d.els.push(a),c._d[f]||(c._d[f]=function(a){return c.call(a.srcElement,a||window.event)}),a.attachEvent("on"+b,c._d[f])}}a=null},un:function(a,b,c){var d=utils.isArray(b)?b:utils.trim(b).split(/\s+/),e=d.length;if(e)while(e--){b=d[e];if(a.removeEventListener)a.removeEventListener(b,c,!1);else{var f=b+c.toString();try{a.detachEvent("on"+b,c._d?c._d[f]:c)}catch(g){}if(c._d&&c._d[f]){var h=utils.indexOf(c._d.els,a);h!=-1&&c._d.els.splice(h,1),c._d.els.length==0&&delete c._d[f]}}}},isSameElement:function(a,b){if(a.tagName!=b.tagName)return!1;var c=a.attributes,d=b.attributes;if(!ie&&c.length!=d.length)return!1;var e,f,g=0,h=0;for(var i=0;e=c[i++];){if(e.nodeName=="style"){e.specified&&g++;if(domUtils.isSameStyle(a,b))continue;return!1}if(ie){if(!e.specified)continue;g++,f=d.getNamedItem(e.nodeName)}else f=b.attributes[e.nodeName];if(!f.specified||e.nodeValue!=f.nodeValue)return!1}if(ie){for(i=0;f=d[i++];)f.specified&&h++;if(g!=h)return!1}return!0},isSameStyle:function(a,b){var c=a.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),d=b.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){c=a.style,d=b.style;if(c.length!=d.length)return!1;for(var e in c){if(/^(\d+|csstext)$/i.test(e))continue;if(c[e]!=d[e])return!1}return!0}if(!c||!d)return c==d;c=c.split(";"),d=d.split(";");if(c.length!=d.length)return!1;for(var f=0,g;g=c[f++];)if(utils.indexOf(d,g)==-1)return!1;return!0},isBlockElm:function(a){return a.nodeType==1&&(dtd.$block[a.tagName]||styleBlock[domUtils.getComputedStyle(a,"display")])&&!dtd.$nonChild[a.tagName]},isBody:function(a){return a&&a.nodeType==1&&a.tagName.toLowerCase()=="body"},breakParent:function(a,b){var c,d=a,e=a,f,g;do{d=d.parentNode,f?(c=d.cloneNode(!1),c.appendChild(f),f=c,c=d.cloneNode(!1),c.appendChild(g),g=c):(f=d.cloneNode(!1),g=f.cloneNode(!1));while(c=e.previousSibling)f.insertBefore(c,f.firstChild);while(c=e.nextSibling)g.appendChild(c);e=d}while(b!==d);return c=b.parentNode,c.insertBefore(f,b),c.insertBefore(g,b),c.insertBefore(a,g),domUtils.remove(b),a},isEmptyInlineElement:function(a){if(a.nodeType!=1||!dtd.$removeEmpty[a.tagName])return 0;a=a.firstChild;while(a){if(domUtils.isBookmarkNode(a))return 0;if(a.nodeType==1&&!domUtils.isEmptyInlineElement(a)||a.nodeType==3&&!domUtils.isWhitespace(a))return 0;a=a.nextSibling}return 1},trimWhiteTextNode:function(a){function b(b){var c;while((c=a[b])&&c.nodeType==3&&domUtils.isWhitespace(c))a.removeChild(c)}b("firstChild"),b("lastChild")},mergeChild:function(a,b,c){var d=domUtils.getElementsByTagName(a,a.tagName.toLowerCase());for(var e=0,f;f=d[e++];){if(!f.parentNode||domUtils.isBookmarkNode(f))continue;if(f.tagName.toLowerCase()=="span"){if(a===f.parentNode){domUtils.trimWhiteTextNode(a);if(a.childNodes.length==1){a.style.cssText=f.style.cssText+";"+a.style.cssText,domUtils.remove(f,!0);continue}}f.style.cssText=a.style.cssText+";"+f.style.cssText;if(c){var g=c.style;if(g){g=g.split(";");for(var h=0,i;i=g[h++];)f.style[utils.cssStyleToDomStyle(i.split(":")[0])]=i.split(":")[1]}}domUtils.isSameStyle(f,a)&&domUtils.remove(f,!0);continue}domUtils.isSameElement(a,f)&&domUtils.remove(f,!0)}},getElementsByTagName:function(a,b,c){if(c&&utils.isString(c)){var d=c;c=function(a){return domUtils.hasClass(a,d)}}b=utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");var e=[];for(var f=0,g;g=b[f++];){var h=a.getElementsByTagName(g);for(var i=0,j;j=h[i++];)(!c||c(j))&&e.push(j)}return e},mergeToParent:function(a){var b=a.parentNode;while(b&&dtd.$removeEmpty[b.tagName]){if(b.tagName==a.tagName||b.tagName=="A"){domUtils.trimWhiteTextNode(b);if(b.tagName=="SPAN"&&!domUtils.isSameStyle(b,a)||b.tagName=="A"&&a.tagName=="SPAN"){if(b.childNodes.length>1||b!==a.parentNode){a.style.cssText=b.style.cssText+";"+a.style.cssText,b=b.parentNode;continue}b.style.cssText+=";"+a.style.cssText,b.tagName=="A"&&(b.style.textDecoration="underline")}if(b.tagName!="A"){b===a.parentNode&&domUtils.remove(a,!0);break}}b=b.parentNode}},mergeSibling:function(a,b,c){function d(a,b,c){var d;if((d=c[a])&&!domUtils.isBookmarkNode(d)&&d.nodeType==1&&domUtils.isSameElement(c,d)){while(d.firstChild)b=="firstChild"?c.insertBefore(d.lastChild,c.firstChild):c.appendChild(d.firstChild);domUtils.remove(d)}}!b&&d("previousSibling","firstChild",a),!c&&d("nextSibling","lastChild",a)},unSelectable:ie&&browser.ie9below||browser.opera?function(a){a.onselectstart=function(){return!1},a.onclick=a.onkeyup=a.onkeydown=function(){return!1},a.unselectable="on",a.setAttribute("unselectable","on");for(var b=0,c;c=a.all[b++];)switch(c.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:c.unselectable="on",a.setAttribute("unselectable","on")}}:function(a){a.style.MozUserSelect=a.style.webkitUserSelect=a.style.msUserSelect=a.style.KhtmlUserSelect="none"},removeAttributes:function(a,b){b=utils.isArray(b)?b:utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,d;d=b[c++];){d=attrFix[d]||d;switch(d){case"className":a[d]="";break;case"style":a.style.cssText="";var e=a.getAttributeNode("style");!browser.ie&&e&&a.removeAttributeNode(e)}a.removeAttribute(d)}},createElement:function(a,b,c){return domUtils.setAttributes(a.createElement(b),c)},setAttributes:function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];switch(c){case"class":a.className=d;break;case"style":a.style.cssText=a.style.cssText+";"+d;break;case"innerHTML":a[c]=d;break;case"value":a.value=d;break;default:a.setAttribute(attrFix[c]||c,d)}}return a},getComputedStyle:function(a,b){var c="width height top left";if(c.indexOf(b)>-1)return a["offset"+b.replace(/^\w/,function(a){return a.toUpperCase()})]+"px";a.nodeType==3&&(a=a.parentNode);if(browser.ie&&browser.version<9&&b=="font-size"&&!a.style.fontSize&&!dtd.$empty[a.tagName]&&!dtd.$nonChild[a.tagName]){var d=a.ownerDocument.createElement("span");d.style.cssText="padding:0;border:0;font-family:simsun;",d.innerHTML=".",a.appendChild(d);var e=d.offsetHeight;return a.removeChild(d),d=null,e+"px"}try{var f=domUtils.getStyle(a,b)||(window.getComputedStyle?domUtils.getWindow(a).getComputedStyle(a,"").getPropertyValue(b):(a.currentStyle||a.style)[utils.cssStyleToDomStyle(b)])}catch(g){return""}return utils.transUnitToPx(utils.fixColor(b,f))},removeClasses:function(a,b){b=utils.isArray(b)?b:utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,d,e=a.className;d=b[c++];)e=e.replace(new RegExp("\\b"+d+"\\b"),"");e=utils.trim(e).replace(/[ ]{2,}/g," "),e?a.className=e:domUtils.removeAttributes(a,["class"])},addClass:function(a,b){if(!a)return;b=utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,d,e=a.className;d=b[c++];)(new RegExp("\\b"+d+"\\b")).test(e)||(e+=" "+d);a.className=utils.trim(e)},hasClass:function(a,b){if(utils.isRegExp(b))return b.test(a.className);b=utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c=0,d,e=a.className;d=b[c++];)if(!(new RegExp("\\b"+d+"\\b","i")).test(e))return!1;return c-1==b.length},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},removeStyle:function(a,b){browser.ie?(b=="color"&&(b="(^|;)"+b),a.style.cssText=a.style.cssText.replace(new RegExp(b+"[^:]*:[^;]+;?","ig"),"")):a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(utils.cssStyleToDomStyle(b)),a.style.cssText||domUtils.removeAttributes(a,["style"])},getStyle:function(a,b){var c=a.style[utils.cssStyleToDomStyle(b)];return utils.fixColor(b,c)},setStyle:function(a,b,c){a.style[utils.cssStyleToDomStyle(b)]=c,utils.trim(a.style.cssText)||this.removeAttributes(a,"style")},setStyles:function(a,b){for(var c in b)b.hasOwnProperty(c)&&domUtils.setStyle(a,c,b[c])},removeDirtyAttr:function(a){for(var b=0,c,d=a.getElementsByTagName("*");c=d[b++];)c.removeAttribute("_moz_dirty");a.removeAttribute("_moz_dirty")},getChildCount:function(a,b){var c=0,d=a.firstChild;b=b||function(){return 1};while(d)b(d)&&c++,d=d.nextSibling;return c},isEmptyNode:function(a){return!a.firstChild||domUtils.getChildCount(a,function(a){return!domUtils.isBr(a)&&!domUtils.isBookmarkNode(a)&&!domUtils.isWhitespace(a)})==0},clearSelectedArr:function(a){var b;while(b=a.pop())domUtils.removeAttributes(b,["class"])},scrollToView:function(a,b,c){var d=function(){var a=b.document,c=a.compatMode=="CSS1Compat";return{width:(c?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(c?a.documentElement.clientHeight:a.body.clientHeight)||0}},e=function(a){if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}},f=d().height,g=f*-1+c;g+=a.offsetHeight||0;var h=domUtils.getXY(a);g+=h.y;var i=e(b).y;(g>i||g<i-f)&&b.scrollTo(0,g+(g<0?-20:20))},isBr:function(a){return a.nodeType==1&&a.tagName=="BR"},isFillChar:function(a,b){if(a.nodeType!=3)return!1;var c=a.nodeValue;return b?(new RegExp("^"+domUtils.fillChar)).test(c):!c.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(a){var b=a.cloneRange(),c=0,d=b.startContainer,e;if(d.nodeType==1&&d.childNodes[b.startOffset]){d=d.childNodes[b.startOffset];var f=d.previousSibling;while(f&&domUtils.isFillChar(f))d=f,f=f.previousSibling}this.isFillChar(d,!0)&&b.startOffset==1&&(b.setStartBefore(d),d=b.startContainer);while(d&&domUtils.isFillChar(d))e=d,d=d.previousSibling;e&&(b.setStartBefore(e),d=b.startContainer),d.nodeType==1&&domUtils.isEmptyNode(d)&&b.startOffset==1&&b.setStart(d,0).collapse(!0);while(!b.startOffset){d=b.startContainer;if(domUtils.isBlockElm(d)||domUtils.isBody(d)){c=1;break}var f=b.startContainer.previousSibling,g;if(!f)b.setStartBefore(b.startContainer);else{while(f&&domUtils.isFillChar(f))g=f,f=f.previousSibling;g?b.setStartBefore(g):b.setStartBefore(b.startContainer)}}return c&&!domUtils.isBody(b.startContainer)?1:0},isEmptyBlock:function(a,b){if(a.nodeType!=1)return 0;b=b||new RegExp("[  	\r\n"+domUtils.fillChar+"]","g");if(a[browser.ie?"innerText":"textContent"].replace(b,"").length>0)return 0;for(var c in dtd.$isNotEmpty)if(a.getElementsByTagName(c).length)return 0;return 1},setViewportOffset:function(a,b){var c=parseInt(a.style.left)|0,d=parseInt(a.style.top)|0,e=a.getBoundingClientRect(),f=b.left-e.left,g=b.top-e.top;f&&(a.style.left=c+f+"px"),g&&(a.style.top=d+g+"px")},fillNode:function(a,b){var c=browser.ie?a.createTextNode(domUtils.fillChar):a.createElement("br");b.innerHTML="",b.appendChild(c)},moveChild:function(a,b,c){while(a.firstChild)c&&b.firstChild?b.insertBefore(a.lastChild,b.firstChild):b.appendChild(a.firstChild)},hasNoAttributes:function(a){return browser.ie?/^<\w+\s*?>/.test(a.outerHTML):a.attributes.length==0},isCustomeNode:function(a){return a.nodeType==1&&a.getAttribute("_ue_custom_node_")},isTagNode:function(a,b){return a.nodeType==1&&(new RegExp("\\b"+a.tagName+"\\b","i")).test(b)},filterNodeList:function(a,b,c){var d=[];if(!utils.isFunction(b)){var e=b;b=function(a){return utils.indexOf(utils.isArray(e)?e:e.split(" "),a.tagName.toLowerCase())!=-1}}return utils.each(a,function(a){b(a)&&d.push(a)}),d.length==0?null:d.length==1||!c?d[0]:d},isInNodeEndBoundary:function(a,b){var c=a.startContainer;if(c.nodeType==3&&a.startOffset!=c.nodeValue.length)return 0;if(c.nodeType==1&&a.startOffset!=c.childNodes.length)return 0;while(c!==b){if(c.nextSibling)return 0;c=c.parentNode}return 1},isBoundaryNode:function(a,b){var c;while(!domUtils.isBody(a)){c=a,a=a.parentNode;if(c!==a[b])return!1}return!0},fillHtml:browser.ie11below?"&nbsp;":"<br/>"},fillCharReg=new RegExp(domUtils.fillChar,"g");!function(){function d(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer===a.endContainer&&a.startOffset==a.endOffset}function e(a){return!a.collapsed&&a.startContainer.nodeType==1&&a.startContainer===a.endContainer&&a.endOffset-a.startOffset==1}function f(a,b,c,e){return b.nodeType==1&&(dtd.$empty[b.tagName]||dtd.$nonChild[b.tagName])&&(c=domUtils.getNodeIndex(b)+(a?0:1),b=b.parentNode),a?(e.startContainer=b,e.startOffset=c,e.endContainer||e.collapse(!0)):(e.endContainer=b,e.endOffset=c,e.startContainer||e.collapse(!1)),d(e),e}function g(a,b){var c=a.startContainer,d=a.endContainer,e=a.startOffset,f=a.endOffset,g=a.document,h=g.createDocumentFragment(),i,j;c.nodeType==1&&(c=c.childNodes[e]||(i=c.appendChild(g.createTextNode("")))),d.nodeType==1&&(d=d.childNodes[f]||(j=d.appendChild(g.createTextNode(""))));if(c===d&&c.nodeType==3)return h.appendChild(g.createTextNode(c.substringData(e,f-e))),b&&(c.deleteData(e,f-e),a.collapse(!0)),h;var k,l,m=h,n=domUtils.findParents(c,!0),o=domUtils.findParents(d,!0);for(var p=0;n[p]==o[p];)p++;for(var q=p,r;r=n[q];q++){k=r.nextSibling,r==c?i||(a.startContainer.nodeType==3?(m.appendChild(g.createTextNode(c.nodeValue.slice(e))),b&&c.deleteData(e,c.nodeValue.length-e)):m.appendChild(b?c:c.cloneNode(!0))):(l=r.cloneNode(!1),m.appendChild(l));while(k){if(k===d||k===o[q])break;r=k.nextSibling,m.appendChild(b?k:k.cloneNode(!0)),k=r}m=l}m=h,n[p]||(m.appendChild(n[p-1].cloneNode(!1)),m=m.firstChild);for(var q=p,s;s=o[q];q++){k=s.previousSibling,s==d?!j&&a.endContainer.nodeType==3&&(m.appendChild(g.createTextNode(d.substringData(0,f))),b&&d.deleteData(0,f)):(l=s.cloneNode(!1),m.appendChild(l));if(q!=p||!n[p])while(k){if(k===c)break;s=k.previousSibling,m.insertBefore(b?k:k.cloneNode(!0),m.firstChild),k=s}m=l}return b&&a.setStartBefore(o[p]?n[p]?o[p]:n[p-1]:o[p-1]).collapse(!0),i&&domUtils.remove(i),j&&domUtils.remove(j),h}function i(a,b){try{if(c&&domUtils.inDoc(c,a))if(!c.nodeValue.replace(fillCharReg,"").length){var d=c.parentNode;domUtils.remove(c);while(d&&domUtils.isEmptyInlineElement(d)&&(browser.safari?!(domUtils.getPosition(d,b)&domUtils.POSITION_CONTAINS):!d.contains(b)))c=d.parentNode,domUtils.remove(d),d=c}else c.nodeValue=c.nodeValue.replace(fillCharReg,"")}catch(e){}}function j(a,b){var c;a=a[b];while(a&&domUtils.isFillChar(a))c=a[b],domUtils.remove(a),a=c}var a=0,b=domUtils.fillChar,c,h=dom.Range=function(a){var b=this;b.startContainer=b.startOffset=b.endContainer=b.endOffset=null,b.document=a,b.collapsed=!0};h.prototype={cloneContents:function(){return this.collapsed?null:g(this,0)},deleteContents:function(){var a;return this.collapsed||g(this,1),browser.webkit&&(a=this.startContainer,a.nodeType==3&&!a.nodeValue.length&&(this.setStartBefore(a).collapse(!0),domUtils.remove(a))),this},extractContents:function(){return this.collapsed?null:g(this,2)},setStart:function(a,b){return f(!0,a,b,this)},setEnd:function(a,b){return f(!1,a,b,this)},setStartAfter:function(a){return this.setStart(a.parentNode,domUtils.getNodeIndex(a)+1)},setStartBefore:function(a){return this.setStart(a.parentNode,domUtils.getNodeIndex(a))},setEndAfter:function(a){return this.setEnd(a.parentNode,domUtils.getNodeIndex(a)+1)},setEndBefore:function(a){return this.setEnd(a.parentNode,domUtils.getNodeIndex(a))},setStartAtFirst:function(a){return this.setStart(a,0)},setStartAtLast:function(a){return this.setStart(a,a.nodeType==3?a.nodeValue.length:a.childNodes.length)},setEndAtFirst:function(a){return this.setEnd(a,0)},setEndAtLast:function(a){return this.setEnd(a,a.nodeType==3?a.nodeValue.length:a.childNodes.length)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){return this.setStart(a,0).setEndAtLast(a)},cloneRange:function(){var a=this;return(new h(a.document)).setStart(a.startContainer,a.startOffset).setEnd(a.endContainer,a.endOffset)},collapse:function(a){var b=this;return a?(b.endContainer=b.startContainer,b.endOffset=b.startOffset):(b.startContainer=b.endContainer,b.startOffset=b.endOffset),b.collapsed=!0,b},shrinkBoundary:function(a){function e(a){return a.nodeType==1&&!domUtils.isBookmarkNode(a)&&!dtd.$empty[a.tagName]&&!dtd.$nonChild[a.tagName]}var b=this,c,d=b.collapsed;while(b.startContainer.nodeType==1&&(c=b.startContainer.childNodes[b.startOffset])&&e(c))b.setStart(c,0);if(d)return b.collapse(!0);if(!a)while(b.endContainer.nodeType==1&&b.endOffset>0&&(c=b.endContainer.childNodes[b.endOffset-1])&&e(c))b.setEnd(c,c.childNodes.length);return b},getCommonAncestor:function(a,b){var c=this,d=c.startContainer,f=c.endContainer;if(d===f){if(a&&e(this)){d=d.childNodes[c.startOffset];if(d.nodeType==1)return d}return b&&d.nodeType==3?d.parentNode:d}return domUtils.getCommonAncestor(d,f)},trimBoundary:function(a){this.txtToElmBoundary();var b=this.startContainer,c=this.startOffset,d=this.collapsed,e=this.endContainer;if(b.nodeType==3){if(c==0)this.setStartBefore(b);else if(c>=b.nodeValue.length)this.setStartAfter(b);else{var f=domUtils.split(b,c);b===e?this.setEnd(f,this.endOffset-c):b.parentNode===e&&(this.endOffset+=1),this.setStartBefore(f)}if(d)return this.collapse(!0)}return a||(c=this.endOffset,e=this.endContainer,e.nodeType==3&&(c==0?this.setEndBefore(e):(c<e.nodeValue.length&&domUtils.split(e,c),this.setEndAfter(e)))),this},txtToElmBoundary:function(a){function b(a,b){var c=a[b+"Container"],d=a[b+"Offset"];c.nodeType==3&&(d?d>=c.nodeValue.length&&a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](c):a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](c))}if(a||!this.collapsed)b(this,"start"),b(this,"end");return this},insertNode:function(a){var b=a,c=1;a.nodeType==11&&(b=a.firstChild,c=a.childNodes.length),this.trimBoundary(!0);var d=this.startContainer,e=this.startOffset,f=d.childNodes[e];return f?d.insertBefore(a,f):d.appendChild(a),b.parentNode===this.endContainer&&(this.endOffset=this.endOffset+c),this.setStartBefore(b)},setCursor:function(a,b){return this.collapse(!a).select(b)},createBookmark:function(b,c){var d,e=this.document.createElement("span");return e.style.cssText="display:none;line-height:0px;",e.appendChild(this.document.createTextNode("‍")),e.id="_baidu_bookmark_start_"+(c?"":a++),this.collapsed||(d=e.cloneNode(!0),d.id="_baidu_bookmark_end_"+(c?"":a++)),this.insertNode(e),d&&this.collapse().insertNode(d).setEndBefore(d),this.setStartAfter(e),{start:b?e.id:e,end:d?b?d.id:d:null,id:b}},moveToBookmark:function(a){var b=a.id?this.document.getElementById(a.start):a.start,c=a.end&&a.id?this.document.getElementById(a.end):a.end;return this.setStartBefore(b),domUtils.remove(b),c?(this.setEndBefore(c),domUtils.remove(c)):this.collapse(!0),this},enlarge:function(a,b){var c=domUtils.isBody,d,e,f=this.document.createTextNode("");if(a){e=this.startContainer,e.nodeType==1?e.childNodes[this.startOffset]?d=e=e.childNodes[this.startOffset]:(e.appendChild(f),d=e=f):d=e;for(;;){if(domUtils.isBlockElm(e)){e=d;while((d=e.previousSibling)&&!domUtils.isBlockElm(d))e=d;this.setStartBefore(e);break}d=e,e=e.parentNode}e=this.endContainer,e.nodeType==1?((d=e.childNodes[this.endOffset])?e.insertBefore(f,d):e.appendChild(f),d=e=f):d=e;for(;;){if(domUtils.isBlockElm(e)){e=d;while((d=e.nextSibling)&&!domUtils.isBlockElm(d))e=d;this.setEndAfter(e);break}d=e,e=e.parentNode}f.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(f)}if(!this.collapsed){while(this.startOffset==0){if(b&&b(this.startContainer))break;if(c(this.startContainer))break;this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(b&&b(this.endContainer))break;if(c(this.endContainer))break;this.setEndAfter(this.endContainer)}}return this},enlargeToBlockElm:function(a){while(!domUtils.isBlockElm(this.startContainer))this.setStartBefore(this.startContainer);if(!a)while(!domUtils.isBlockElm(this.endContainer))this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setStartAfter(this.startContainer);while(!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(a,b,c){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(a){return a.nodeType==1&&domUtils.isBlockElm(a)}).adjustmentBoundary();var d=this.createBookmark(),e=d.end,f=function(a){return a.nodeType==1?a.tagName.toLowerCase()!="br":!domUtils.isWhitespace(a)},g=domUtils.getNextDomNode(d.start,!1,f),h,i,j=this.cloneRange();while(g&&domUtils.getPosition(g,e)&domUtils.POSITION_PRECEDING)if(g.nodeType==3||dtd[a][g.tagName]){j.setStartBefore(g),h=g;while(h&&(h.nodeType==3||dtd[a][h.tagName])&&h!==e)i=h,h=domUtils.getNextDomNode(h,h.nodeType==1,null,function(b){return dtd[a][b.tagName]});var k=j.setEndAfter(i).extractContents(),l;if(c&&c.length>0){var m,n;n=m=c[0].cloneNode(!1);for(var o=1,p;p=c[o++];)m.appendChild(p.cloneNode(!1)),m=m.firstChild;l=m}else l=j.document.createElement(a);b&&domUtils.setAttributes(l,b),l.appendChild(k),j.insertNode(c?n:l);var q;a=="span"&&b.style&&/text\-decoration/.test(b.style)&&(q=domUtils.findParentByTagName(l,"a",!0))?(domUtils.setAttributes(q,b),domUtils.remove(l,!0),l=q):(domUtils.mergeSibling(l),domUtils.clearEmptySibling(l)),domUtils.mergeChild(l,b),g=domUtils.getNextDomNode(l,!1,f),domUtils.mergeToParent(l);if(h===e)break}else g=domUtils.getNextDomNode(g,!0,f);return this.moveToBookmark(d)},removeInlineStyle:function(a){if(this.collapsed)return this;a=utils.isArray(a)?a:[a],this.shrinkBoundary().adjustmentBoundary();var b=this.startContainer,c=this.endContainer;for(;;){if(b.nodeType==1){if(utils.indexOf(a,b.tagName.toLowerCase())>-1)break;if(b.tagName.toLowerCase()=="body"){b=null;break}}b=b.parentNode}for(;;){if(c.nodeType==1){if(utils.indexOf(a,c.tagName.toLowerCase())>-1)break;if(c.tagName.toLowerCase()=="body"){c=null;break}}c=c.parentNode}var d=this.createBookmark(),e,f;b&&(f=this.cloneRange().setEndBefore(d.start).setStartBefore(b),e=f.extractContents(),f.insertNode(e),domUtils.clearEmptySibling(b,!0),b.parentNode.insertBefore(d.start,b)),c&&(f=this.cloneRange().setStartAfter(d.end).setEndAfter(c),e=f.extractContents(),f.insertNode(e),domUtils.clearEmptySibling(c,!1,!0),c.parentNode.insertBefore(d.end,c.nextSibling));var g=domUtils.getNextDomNode(d.start,!1,function(a){return a.nodeType==1}),h;while(g&&g!==d.end)h=domUtils.getNextDomNode(g,!0,function(a){return a.nodeType==1}),utils.indexOf(a,g.tagName.toLowerCase())>-1&&domUtils.remove(g,!0),g=h;return this.moveToBookmark(d)},getClosedNode:function(){var a;if(!this.collapsed){var b=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(e(b)){var c=b.startContainer.childNodes[b.startOffset];c&&c.nodeType==1&&(dtd.$empty[c.tagName]||dtd.$nonChild[c.tagName])&&(a=c)}}return a},select:browser.ie?function(a,d){var e;this.collapsed||this.shrinkBoundary();var f=this.getClosedNode();if(f&&!d){try{e=this.document.body.createControlRange(),e.addElement(f),e.select()}catch(g){}return this}var h=this.createBookmark(),k=h.start,l;e=this.document.body.createTextRange(),e.moveToElementText(k),e.moveStart("character",1);if(!this.collapsed){var m=this.document.body.createTextRange();l=h.end,m.moveToElementText(l),e.setEndPoint("EndToEnd",m)}else if(!a&&this.startContainer.nodeType!=3){var n=this.document.createTextNode(b),o=this.document.createElement("span");o.appendChild(this.document.createTextNode(b)),k.parentNode.insertBefore(o,k),k.parentNode.insertBefore(n,k),i(this.document,n),c=n,j(o,"previousSibling"),j(k,"nextSibling"),e.moveStart("character",-1),e.collapse(!0)}this.moveToBookmark(h),o&&domUtils.remove(o);try{e.select()}catch(g){}return this}:function(a){function d(a){function b(b,c,d){b.nodeType==3&&b.nodeValue.length<c&&(a[d+"Offset"]=b.nodeValue.length)}b(a.startContainer,a.startOffset,"start"),b(a.endContainer,a.endOffset,"end")}var e=domUtils.getWindow(this.document),f=e.getSelection(),g;browser.gecko?this.document.body.focus():e.focus();if(f){f.removeAllRanges();if(this.collapsed&&!a){var h=this.startContainer,k=h;h.nodeType==1&&(k=h.childNodes[this.startOffset]),(h.nodeType!=3||!this.startOffset)&&(k?!k.previousSibling||k.previousSibling.nodeType!=3:!h.lastChild||h.lastChild.nodeType!=3)&&(g=this.document.createTextNode(b),this.insertNode(g),i(this.document,g),j(g,"previousSibling"),j(g,"nextSibling"),c=g,this.setStart(g,browser.webkit?1:0).collapse(!0))}var l=this.document.createRange();if(this.collapsed&&browser.opera&&this.startContainer.nodeType==1){var k=this.startContainer.childNodes[this.startOffset];if(!k)k=this.startContainer.lastChild,k&&domUtils.isBr(k)&&this.setStartBefore(k).collapse(!0);else{while(k&&domUtils.isBlockElm(k)){if(k.nodeType!=1||!k.childNodes[0])break;k=k.childNodes[0]}k&&this.setStartBefore(k).collapse(!0)}}d(this),l.setStart(this.startContainer,this.startOffset),l.setEnd(this.endContainer,this.endOffset),f.addRange(l)}return this},scrollToView:function(a,b){a=a?window:domUtils.getWindow(this.document);var c=this,d=c.document.createElement("span");return d.innerHTML="&nbsp;",c.cloneRange().insertNode(d),domUtils.scrollToView(d,a,b),domUtils.remove(d),c},inFillChar:function(){var a=this.startContainer;return this.collapsed&&a.nodeType==3&&a.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==a.nodeValue.length?!0:!1},createAddress:function(a,b){function e(a){var c=a?d.startContainer:d.endContainer,e=domUtils.findParents(c,!0,function(a){return!domUtils.isBody(a)}),f=[];for(var g=0,h;h=e[g++];)f.push(domUtils.getNodeIndex(h,b));var i=0;if(b)if(c.nodeType==3){var j=c.previousSibling;while(j&&j.nodeType==3)i+=j.nodeValue.replace(fillCharReg,"").length,j=j.previousSibling;i+=a?d.startOffset:d.endOffset}else{c=c.childNodes[a?d.startOffset:d.endOffset];if(c)i=domUtils.getNodeIndex(c,b);else{c=a?d.startContainer:d.endContainer;var k=c.firstChild;while(k){if(domUtils.isFillChar(k)){k=k.nextSibling;continue}i++;if(k.nodeType==3)while(k&&k.nodeType==3)k=k.nextSibling;else k=k.nextSibling}}}else i=a?domUtils.isFillChar(c)?0:d.startOffset:d.endOffset;return i<0&&(i=0),f.push(i),f}var c={},d=this;return c.startAddress=e(!0),a||(c.endAddress=d.collapsed?[].concat(c.startAddress):e()),c},moveToAddress:function(a,b){function d(a,b){var d=c.document.body,e,f;for(var g=0,h,i=a.length;g<i;g++){h=a[g],e=d,d=d.childNodes[h];if(!d){f=h;break}}b?d?c.setStartBefore(d):c.setStart(e,f):d?c.setEndBefore(d):c.setEnd(e,f)}var c=this;return d(a.startAddress,!0),!b&&a.endAddress&&d(a.endAddress),c},equals:function(a){for(var b in this)if(this.hasOwnProperty(b)&&this[b]!==a[b])return!1;return!0},traversal:function(a,b){if(this.collapsed)return this;var c=this.createBookmark(),d=c.end,e=domUtils.getNextDomNode(c.start,!1,b);while(e&&e!==d&&domUtils.getPosition(e,d)&domUtils.POSITION_PRECEDING){var f=domUtils.getNextDomNode(e,!1,b);a(e),e=f}return this.moveToBookmark(c)}}}(),!function(){function a(a,b){var c=domUtils.getNodeIndex;a=a.duplicate(),a.collapse(b);var d=a.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};var e=d.children,f,g=a.duplicate(),h=0,i=e.length-1,j=-1,k;while(h<=i){j=Math.floor((h+i)/2),f=e[j],g.moveToElementText(f);var l=g.compareEndPoints("StartToStart",a);if(l>0)i=j-1;else{if(!(l<0))return{container:d,offset:c(f)};h=j+1}}if(j==-1){g.moveToElementText(d),g.setEndPoint("StartToStart",a),k=g.text.replace(/(\r\n|\r)/g,"\n").length,e=d.childNodes;if(!k)return f=e[e.length-1],{container:f,offset:f.nodeValue.length};var m=e.length;while(k>0)k-=e[--m].nodeValue.length;return{container:e[m],offset:-k}}g.collapse(l>0),g.setEndPoint(l>0?"StartToStart":"EndToStart",a),k=g.text.replace(/(\r\n|\r)/g,"\n").length;if(!k)return dtd.$empty[f.tagName]||dtd.$nonChild[f.tagName]?{container:d,offset:c(f)+(l>0?0:1)}:{container:f,offset:l>0?0:f.childNodes.length};while(k>0)try{var n=f;f=f[l>0?"previousSibling":"nextSibling"],k-=f.nodeValue.length}catch(o){return{container:d,offset:c(n)}}return{container:f,offset:l>0?-k:f.nodeValue.length+k}}function b(b,c){if(b.item)c.selectNode(b.item(0));else{var d=a(b,!0);c.setStart(d.container,d.offset),b.compareEndPoints("StartToEnd",b)!=0&&(d=a(b,!1),c.setEnd(d.container,d.offset))}return c}function c(a){var b;try{b=a.getNative().createRange()}catch(c){return null}var d=b.item?b.item(0):b.parentElement();return(d.ownerDocument||d)===a.document?b:null}var d=dom.Selection=function(a){var b=this,d;b.document=a,browser.ie9below&&(d=domUtils.getWindow(a).frameElement,domUtils.on(d,"beforedeactivate",function(){b._bakIERange=b.getIERange()}),domUtils.on(d,"activate",function(){try{!c(b)&&b._bakIERange&&b._bakIERange.select()}catch(a){}b._bakIERange=null})),d=a=null};d.prototype={rangeInBody:function(a,b){var c=browser.ie9below||b?a.item?a.item():a.parentElement():a.startContainer;return c===this.document.body||domUtils.inDoc(c,this.document)},getNative:function(){var a=this.document;try{return a?browser.ie9below?a.selection:domUtils.getWindow(a).getSelection():null}catch(b){return null}},getIERange:function(){var a=c(this);return!a&&this._bakIERange?this._bakIERange:a},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var a=this.getStart();return a?domUtils.findParents(a,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var a=c(this);return!!a&&!!this.rangeInBody(a)}return!!this.getNative().rangeCount}catch(b){return!1}},getRange:function(){function c(b){var c=a.document.body.firstChild,d=b.collapsed;while(c&&c.firstChild)b.setStart(c,0),c=c.firstChild;b.startContainer||b.setStart(a.document.body,0),d&&b.collapse(!0)}var a=this;if(a._cachedRange!=null)return this._cachedRange;var d=new baidu.editor.dom.Range(a.document);if(browser.ie9below){var e=a.getIERange();if(e)try{b(e,d)}catch(f){c(d)}else c(d)}else{var g=a.getNative();if(g&&g.rangeCount){var h=g.getRangeAt(0),i=g.getRangeAt(g.rangeCount-1);d.setStart(h.startContainer,h.startOffset).setEnd(i.endContainer,i.endOffset),d.collapsed&&domUtils.isBody(d.startContainer)&&!d.startOffset&&c(d)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;c(d)}}return this._bakRange=d},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var a=browser.ie9below?this.getIERange():this.getRange(),b,c,d,e;if(browser.ie9below){if(!a)return this.document.body.firstChild;if(a.item)return a.item(0);b=a.duplicate(),b.text.length>0&&b.moveStart("character",1),b.collapse(1),c=b.parentElement(),e=d=a.parentElement();while(d=d.parentNode)if(d==c){c=e;break}}else{a.shrinkBoundary(),c=a.startContainer,c.nodeType==1&&c.hasChildNodes()&&(c=c.childNodes[Math.min(c.childNodes.length-1,a.startOffset)]);if(c.nodeType==3)return c.parentNode}return c},getText:function(){var a,b;return this.isFocus()&&(a=this.getNative())?(b=browser.ie9below?a.createRange():a.getRangeAt(0),browser.ie9below?b.text:b.toString()):""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}}(),!function(){function c(a,b){var c;if(b.textarea)if(utils.isString(b.textarea)){for(var d=0,e,f=domUtils.getElementsByTagName(a,"textarea");e=f[d++];)if(e.id=="ueditor_textarea_"+b.options.textarea){c=e;break}}else c=b.textarea;c||(a.appendChild(c=domUtils.createElement(document,"textarea",{name:b.options.textarea,id:"ueditor_textarea_"+b.options.textarea,style:"display:none"})),b.textarea=c),!c.getAttribute("name")&&c.setAttribute("name",b.options.textarea),c.value=b.hasContents()?b.options.allHtmlEnabled?b.getAllHtml():b.getContent(null,null,!0):""}function d(a){for(var b in UE.plugins)UE.plugins[b].call(a)}function e(a){for(var b in a)return b}function f(a){a.langIsReady=!0,a.fireEvent("langReady")}var a=0,b,g=UE.Editor=function(b){var c=this;c.uid=a++,EventBase.call(c),c.commands={},c.options=utils.extend(utils.clone(b||{}),UEDITOR_CONFIG,!0),c.shortcutkeys={},c.inputRules=[],c.outputRules=[],c.setOpt(g.defaultOptions(c)),c.loadServerConfig(),utils.isEmptyObject(UE.I18N)?utils.loadFile(document,{src:c.options.langPath+c.options.lang+"/"+c.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(c),f(c)}):(c.options.lang=e(UE.I18N),UE.plugin.load(c),f(c)),UE.instants["ueditorInstant"+c.uid]=c};g.prototype={registerCommand:function(a,b){this.commands[a]=b},ready:function(a){var b=this;a&&(b.isReady?a.apply(b):b.addListener("ready",a))},setOpt:function(a,b){var c={};utils.isString(a)?c[a]=b:c=a,utils.extend(this.options,c,!0)},getOpt:function(a){return this.options[a]},destroy:function(){var a=this;a.fireEvent("destroy");var b=a.container.parentNode,c=a.textarea;c?c.style.display="":(c=document.createElement("textarea"),b.parentNode.insertBefore(c,b)),c.style.width=a.iframe.offsetWidth+"px",c.style.height=a.iframe.offsetHeight+"px",c.value=a.getContent(),c.id=a.key,b.innerHTML="",domUtils.remove(b);var d=a.key;for(var e in a)a.hasOwnProperty(e)&&delete this[e];UE.delEditor(d)},render:function(a){var b=this,c=b.options,d=function(b){return parseInt(domUtils.getComputedStyle(a,b))};utils.isString(a)&&(a=document.getElementById(a));if(a){c.initialFrameWidth?c.minFrameWidth=c.initialFrameWidth:c.minFrameWidth=c.initialFrameWidth=a.offsetWidth,c.initialFrameHeight?c.minFrameHeight=c.initialFrameHeight:c.initialFrameHeight=c.minFrameHeight=a.offsetHeight,a.style.width=/%$/.test(c.initialFrameWidth)?"100%":c.initialFrameWidth-d("padding-left")-d("padding-right")+"px",a.style.height=/%$/.test(c.initialFrameHeight)?"100%":c.initialFrameHeight-d("padding-top")-d("padding-bottom")+"px",a.style.zIndex=c.zIndex;var e=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head>"+"<style type='text/css'>"+".view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\n"+"body{margin:8px;font-family:sans-serif;font-size:16px;}"+"p{margin:5px 0;}</style>"+(c.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(c.iframeCssUrl)+"'/>":"")+(c.initialStyle?"<style>"+c.initialStyle+"</style>":"")+"</head><body class='view' ></body>"+"<script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>"+"setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+b.uid+"'];editor._setup(document);},0);"+"var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>";a.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+b.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(c.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+e+'");document.close();}())'})),a.style.overflow="hidden",setTimeout(function(){/%$/.test(c.initialFrameWidth)&&(c.minFrameWidth=c.initialFrameWidth=a.offsetWidth),/%$/.test(c.initialFrameHeight)&&(c.minFrameHeight=c.initialFrameHeight=a.offsetHeight,a.style.height=c.initialFrameHeight+"px")})}},_setup:function(a){var b=this,d=b.options;ie?(a.body.disabled=!0,a.body.contentEditable=!0,a.body.disabled=!1):a.body.contentEditable=!0,a.body.spellcheck=!1,b.document=a,b.window=a.defaultView||a.parentWindow,b.iframe=b.window.frameElement,b.body=a.body,b.selection=new dom.Selection(a);var e;browser.gecko&&(e=this.selection.getNative())&&e.removeAllRanges(),this._initEvents();for(var f=this.iframe.parentNode;!domUtils.isBody(f);f=f.parentNode)if(f.tagName=="FORM"){b.form=f,b.options.autoSyncData?domUtils.on(b.window,"blur",function(){c(f,b)}):domUtils.on(f,"submit",function(){c(this,b)});break}if(d.initialContent)if(d.autoClearinitialContent){var g=b.execCommand;b.execCommand=function(){return b.fireEvent("firstBeforeExecCommand"),g.apply(b,arguments)},this._setDefaultContent(d.initialContent)}else this.setContent(d.initialContent,!1,!0);domUtils.isEmptyNode(b.body)&&(b.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),d.focus&&setTimeout(function(){b.focus(b.options.focusInEnd),!b.options.autoClearinitialContent&&b._selectionChange()},0),b.container||(b.container=this.iframe.parentNode),d.fullscreen&&b.ui&&b.ui.setFullScreen(!0);try{b.document.execCommand("2D-position",!1,!1)}catch(h){}try{b.document.execCommand("enableInlineTableEditing",!1,!1)}catch(h){}try{b.document.execCommand("enableObjectResizing",!1,!1)}catch(h){}b._bindshortcutKeys(),b.isReady=1,b.fireEvent("ready"),d.onready&&d.onready.call(b),browser.ie9below||domUtils.on(b.window,["blur","focus"],function(a){if(a.type=="blur"){b._bakRange=b.selection.getRange();try{b._bakNativeRange=b.selection.getNative().getRangeAt(0),b.selection.getNative().removeAllRanges()}catch(a){b._bakNativeRange=null}}else try{b._bakRange&&b._bakRange.select()}catch(a){}}),browser.gecko&&browser.version<=10902&&(b.body.contentEditable=!1,setTimeout(function(){b.body.contentEditable=!0},100),setInterval(function(){b.body.style.height=b.iframe.offsetHeight-20+"px"},100)),!d.isShow&&b.setHide(),d.readonly&&b.setDisabled()},sync:function(a){var b=this,d=a?document.getElementById(a):domUtils.findParent(b.iframe.parentNode,function(a){return a.tagName=="FORM"},!0);d&&c(d,b)},setHeight:function(a,b){a!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=a+"px"),!b&&(this.options.minFrameHeight=this.options.initialFrameHeight=a),this.body.style.height=a+"px",!b&&this.trigger("setHeight")},addshortcutkey:function(a,b){var c={};b?c[a]=b:c=a,utils.extend(this.shortcutkeys,c)},_bindshortcutKeys:function(){var a=this,b=this.shortcutkeys;a.addListener("keydown",function(c,d){var e=d.keyCode||d.which;for(var f in b){var g=b[f].split(",");for(var h=0,i;i=g[h++];){i=i.split(":");var j=i[0],k=i[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(j.toLowerCase())||/^(\d+)$/.test(j))if((RegExp.$1=="ctrl"?d.ctrlKey||d.metaKey:0)&&(RegExp.$2!=""?d[RegExp.$2.slice(1)+"Key"]:1)&&e==RegExp.$3||e==RegExp.$1)a.queryCommandState(f,k)!=-1&&a.execCommand(f,k),domUtils.preventDefault(d)}}})},getContent:function(a,b,c,d,e){var f=this;a&&utils.isFunction(a)&&(b=a,a="");if(b?!b():!this.hasContents())return"";f.fireEvent("beforegetcontent");var g=UE.htmlparser(f.body.innerHTML,d);return f.filterOutputRule(g),f.fireEvent("aftergetcontent",a,g),g.toHtml(e)},getAllHtml:function(){var a=this,b=[],c="";a.fireEvent("getAllHtml",b);if(browser.ie&&browser.version>8){var d="";utils.each(a.document.styleSheets,function(a){d+=a.href?'<link rel="stylesheet" type="text/css" href="'+a.href+'" />':"<style>"+a.cssText+"</style>"}),utils.each(a.document.getElementsByTagName("script"),function(a){d+=a.outerHTML})}return"<html><head>"+(a.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+a.options.charset+'"/>':"")+(d||a.document.getElementsByTagName("head")[0].innerHTML)+b.join("\n")+"</head>"+"<body "+(ie&&browser.version<9?'class="view"':"")+">"+a.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var a=new RegExp(domUtils.fillChar,"g"),b=this.body.innerHTML.replace(/[\n\r]/g,"");return b=b.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(a,b,c){return dtd.$block[c]?"\n":b?b:""}),b.replace(a,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var a=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(a,"").replace(/\u00a0/g," ")},setContent:function(a,b,d){function g(a){return a.tagName=="DIV"&&a.getAttribute("cdata_tag")}var e=this;e.fireEvent("beforesetcontent",a);var f=UE.htmlparser(a);e.filterInputRule(f),a=f.toHtml(),e.body.innerHTML=(b?e.body.innerHTML:"")+a;if(e.options.enterTag=="p"){var h=this.body.firstChild,i;if(!h||h.nodeType==1&&(dtd.$cdata[h.tagName]||g(h)||domUtils.isCustomeNode(h))&&h===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else{var j=e.document.createElement("p");while(h){while(h&&(h.nodeType==3||h.nodeType==1&&dtd.p[h.tagName]&&!dtd.$cdata[h.tagName]))i=h.nextSibling,j.appendChild(h),h=i;if(j.firstChild){if(!h){e.body.appendChild(j);break}h.parentNode.insertBefore(j,h),j=e.document.createElement("p")}h=h.nextSibling}}}e.fireEvent("aftersetcontent"),e.fireEvent("contentchange"),!d&&e._selectionChange(),e._bakRange=e._bakIERange=e._bakNativeRange=null;var k;browser.gecko&&(k=this.selection.getNative())&&k.removeAllRanges(),e.options.autoSyncData&&e.form&&c(e.form,e)},focus:function(a){try{var b=this,c=b.selection.getRange();if(a){var d=b.body.lastChild;d&&d.nodeType==1&&!dtd.$empty[d.tagName]&&(domUtils.isEmptyBlock(d)?c.setStartAtFirst(d):c.setStartAtLast(d),c.collapse(!0)),c.setCursor(!0)}else{if(!c.collapsed&&domUtils.isBody(c.startContainer)&&c.startOffset==0){var d=b.body.firstChild;d&&d.nodeType==1&&!dtd.$empty[d.tagName]&&c.setStartAtFirst(d).collapse(!0)}c.select(!0)}this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var a=this.selection.getNative();if(a.empty&&browser.ie){var b=document.body.createTextRange();b.moveToElementText(document.body),b.collapse(!0),b.select(),a.empty()}else a.removeAllRanges()},_initEvents:function(){var a=this,b=a.document,c=a.window;a._proxyDomEvent=utils.bind(a._proxyDomEvent,a),domUtils.on(b,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],a._proxyDomEvent),domUtils.on(c,["focus","blur"],a._proxyDomEvent),domUtils.on(a.body,"drop",function(b){browser.gecko&&b.stopPropagation&&b.stopPropagation(),a.fireEvent("contentchange")}),domUtils.on(b,["mouseup","keydown"],function(b){if(b.type=="keydown"&&(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey))return;if(b.button==2)return;a._selectionChange(250,b)})},_proxyDomEvent:function(a){return this.fireEvent("before"+a.type.replace(/^on/,"").toLowerCase())===!1?!1:this.fireEvent(a.type.replace(/^on/,""),a)===!1?!1:this.fireEvent("after"+a.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(a,c){var d=this,e=!1,f,g;if(browser.ie&&browser.version<9&&c&&c.type=="mouseup"){var h=this.selection.getRange();h.collapsed||(e=!0,f=c.clientX,g=c.clientY)}clearTimeout(b),b=setTimeout(function(){if(!d.selection||!d.selection.getNative())return;var a;if(e&&d.selection.getNative().type=="None"){a=d.document.body.createTextRange();try{a.moveToPoint(f,g)}catch(b){a=null}}var h;a&&(h=d.selection.getIERange,d.selection.getIERange=function(){return a}),d.selection.cache(),h&&(d.selection.getIERange=h),d.selection._cachedRange&&d.selection._cachedStartElement&&(d.fireEvent("beforeselectionchange"),d.fireEvent("selectionchange",!!c),d.fireEvent("afterselectionchange"),d.selection.clear())},a||50)},_callCmdFn:function(a,b){var c=b[0].toLowerCase(),d,e;d=this.commands[c]||UE.commands[c],e=d&&d[a];if((!d||!e)&&a=="queryCommandState")return 0;if(e)return e.apply(this,b)},execCommand:function(a){a=a.toLowerCase();var b=this,c,d=b.commands[a]||UE.commands[a];return!d||!d.execCommand?null:(!d.notNeedUndo&&!b.__hasEnterExecCommand?(b.__hasEnterExecCommand=!0,b.queryCommandState.apply(b,arguments)!=-1&&(b.fireEvent("saveScene"),b.fireEvent.apply(b,["beforeexeccommand",a].concat(arguments)),c=this._callCmdFn("execCommand",arguments),b.fireEvent.apply(b,["afterexeccommand",a].concat(arguments)),b.fireEvent("saveScene")),b.__hasEnterExecCommand=!1):(c=this._callCmdFn("execCommand",arguments),!b.__hasEnterExecCommand&&!d.ignoreContentChange&&!b._ignoreContentChange&&b.fireEvent("contentchange")),!b.__hasEnterExecCommand&&!d.ignoreContentChange&&!b._ignoreContentChange&&b._selectionChange(),c)},queryCommandState:function(a){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(a){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(a){if(a)for(var b=0,c;c=a[b++];)if(this.document.getElementsByTagName(c).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;a=["div"];for(b=0;c=a[b++];){var d=domUtils.getElementsByTagName(this.document,c);for(var e=0,f;f=d[e++];)if(domUtils.isCustomeNode(f))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var a=this,b;if(a.body.contentEditable=="false"){a.body.contentEditable=!0,b=a.selection.getRange();try{b.moveToBookmark(a.lastBk),delete a.lastBk}catch(c){b.setStartAtFirst(a.body).collapse(!0)}b.select(!0),a.bkqueryCommandState&&(a.queryCommandState=a.bkqueryCommandState,delete a.bkqueryCommandState),a.bkqueryCommandValue&&(a.queryCommandValue=a.bkqueryCommandValue,delete a.bkqueryCommandValue),a.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(a){var b=this;a=a?utils.isArray(a)?a:[a]:[],b.body.contentEditable=="true"&&(b.lastBk||(b.lastBk=b.selection.getRange().createBookmark(!0)),b.body.contentEditable=!1,b.bkqueryCommandState=b.queryCommandState,b.bkqueryCommandValue=b.queryCommandValue,b.queryCommandState=function(c){return utils.indexOf(a,c)!=-1?b.bkqueryCommandState.apply(b,arguments):-1},b.queryCommandValue=function(c){return utils.indexOf(a,c)!=-1?b.bkqueryCommandValue.apply(b,arguments):null},b.fireEvent("selectionchange"))},disable:function(a){return this.setDisabled(a)},_setDefaultContent:function(){function a(){var b=this;b.document.getElementById("initContent")&&(b.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",b.removeListener("firstBeforeExecCommand focus",a),setTimeout(function(){b.focus(),b._selectionChange()},0))}return function(b){var c=this;c.body.innerHTML='<p id="initContent">'+b+"</p>",c.addListener("firstBeforeExecCommand focus",a)}}(),setShow:function(){var a=this,b=a.selection.getRange();if(a.container.style.display=="none"){try{b.moveToBookmark(a.lastBk),delete a.lastBk}catch(c){b.setStartAtFirst(a.body).collapse(!0)}setTimeout(function(){b.select(!0)},100),a.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var a=this;a.lastBk||(a.lastBk=a.selection.getRange().createBookmark(!0)),a.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(a){var b=UE.I18N[this.options.lang];if(!b)throw Error("not import language file");a=(a||"").split(".");for(var c=0,d;d=a[c++];){b=b[d];if(!b)break}return b},getContentLength:function(a,b){var c=this.getContent(!1,!1,!0).length;if(a){b=(b||[]).concat(["hr","img","iframe"]),c=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var d=0,e;e=b[d++];)c+=this.document.getElementsByTagName(e).length}return c},addInputRule:function(a){this.inputRules.push(a)},filterInputRule:function(a){for(var b=0,c;c=this.inputRules[b++];)c.call(this,a)},addOutputRule:function(a){this.outputRules.push(a)},filterOutputRule:function(a){for(var b=0,c;c=this.outputRules[b++];)c.call(this,a)},getActionUrl:function(a){var b=this.getOpt(a)||a,c=this.getOpt("imageUrl"),d=this.getOpt("serverUrl");return!d&&c&&(d=c.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),d?(d=d+(d.indexOf("?")==-1?"?":"&")+"action="+(b||""),utils.formatUrl(d)):""}},utils.inherits(g,EventBase)}(),UE.Editor.defaultOptions=function(a){var b=a.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:b+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:b+"lang/",theme:"default",themePath:b+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},!function(){UE.Editor.prototype.loadServerConfig=function(){function showErrorMsg(a){console&&console.error(a)}var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=!1,configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config),me.fireEvent("serverConfigLoaded"),me._serverConfigLoaded=!0}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){var a=this;return a._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(a){if(!a||!utils.isFunction(a))return;var b=this,c=function(){a.apply(b,arguments),b.removeListener("serverConfigLoaded",c)};b.isServerConfigLoaded()?a.call(b,"serverConfigLoaded"):b.addListener("serverConfigLoaded",c)}}(),UE.ajax=function(){function d(a){var b=[];for(var c in a){if(c=="method"||c=="timeout"||c=="async"||c=="dataType"||c=="callback")continue;if(a[c]==undefined||a[c]==null)continue;if((typeof a[c]).toLowerCase()!="function"&&(typeof a[c]).toLowerCase()!="object")b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));else if(utils.isArray(a[c]))for(var d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"[]="+encodeURIComponent(a[c][d]))}return b.join("&")}function e(a,b){var e=c(),f=!1,g={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};typeof a=="object"&&(b=a,a=b.url);if(!e||!a)return;var h=b?utils.extend(g,b):g,i=d(h);utils.isEmptyObject(h.data)||(i+=(i?"&":"")+d(h.data));var j=setTimeout(function(){e.readyState!=4&&(f=!0,e.abort(),clearTimeout(j))},h.timeout),k=h.method.toUpperCase(),l=a+(a.indexOf("?")==-1?"?":"&")+(k=="POST"?"":i+"&noCache="+ +(new Date));e.open(k,l,h.async),e.onreadystatechange=function(){e.readyState==4&&(!f&&e.status==200?h.onsuccess(e):h.onerror(e))},k=="POST"?(e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(i)):e.send(null)}function f(a,b){function o(a,b,c){a.setAttribute("type","text/javascript"),a.setAttribute("defer","defer"),c&&a.setAttribute("charset",c),a.setAttribute("src",b),document.getElementsByTagName("head")[0].appendChild(a)}function p(a){return function(){try{if(a)f.onerror&&f.onerror();else try{clearTimeout(k),c.apply(window,arguments)}catch(b){}}catch(d){f.onerror&&f.onerror.call(window,d)}finally{f.oncomplete&&f.oncomplete.apply(window,arguments),e.parentNode&&e.parentNode.removeChild(e),window[i]=null;try{delete window[i]}catch(b){}}}}var c=b.onsuccess||function(){},e=document.createElement("SCRIPT"),f=b||{},g=f.charset,h=f.jsonp||"callback",i,j=f.timeOut||0,k,l=new RegExp("(\\?|&)"+h+"=([^&]*)"),m;if(utils.isFunction(c))i="bd__editor__"+Math.floor(Math.random()*2147483648).toString(36),window[i]=p(0);else if(utils.isString(c))i=c;else if(m=l.exec(a))i=m[2];a=a.replace(l,"$1"+h+"="+i),a.search(l)<0&&(a+=(a.indexOf("?")<0?"?":"&")+h+"="+i);var n=d(b);utils.isEmptyObject(b.data)||(n+=(n?"&":"")+d(b.data)),n&&(a=a.replace(/\?/,"?"+n+"&")),e.onerror=p(1),j&&(k=setTimeout(p(1),j)),o(e,a,g)}var a="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),a="ActiveXObject('Msxml2.XMLHTTP')"}catch(b){try{new ActiveXObject("Microsoft.XMLHTTP"),a="ActiveXObject('Microsoft.XMLHTTP')"}catch(b){}}var c=new Function("return new "+a);return{request:function(a,b){b&&b.dataType=="jsonp"?f(a,b):e(a,b)},getJSONP:function(a,b,c){var d={data:b,oncomplete:c};f(a,d)}}}();var filterWord=UE.filterWord=function(){function a(a){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(a)}function b(a){return a=a.replace(/[\d.]+\w+/g,function(a){return utils.transUnitToPx(a)}),a}function c(a){return a.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(a){if(browser.opera)return"";try{if(/Bitmap/i.test(a))return"";var c=a.match(/width:([ \d.]*p[tx])/i)[1],d=a.match(/height:([ \d.]*p[tx])/i)[1],e=a.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+b(c)+'" height="'+b(d)+'" src="'+e+'" />'}catch(f){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(a,b,c,d){return b=="class"&&d=="MsoListParagraph"?a:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(a,b,c){return c.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(a,c,d,e){var f=[],g=e.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(a){return utils.transUnitToPx(a)}).split(/;\s*/g);for(var h=0,i;i=g[h];h++){var j,k,l=i.split(":");if(l.length==2){j=l[0].toLowerCase(),k=l[1].toLowerCase();if(/^(background)\w*/.test(j)&&k.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(j)&&/^0\w+$/.test(k))continue;switch(j){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(c)||(f[h]=j.replace(/^mso-|-alt$/g,"")+":"+b(k));continue;case"horiz-align":f[h]="text-align:"+k;continue;case"vert-align":f[h]="vertical-align:"+k;continue;case"font-color":case"mso-foreground":f[h]="color:"+k;continue;case"mso-background":case"mso-highlight":f[h]="background:"+k;continue;case"mso-default-height":f[h]="min-height:"+b(k);continue;case"mso-default-width":f[h]="min-width:"+b(k);continue;case"mso-padding-between-alt":f[h]="border-collapse:separate;border-spacing:"+b(k);continue;case"text-line-through":if(k=="single"||k=="double")f[h]="text-decoration:line-through";continue;case"mso-zero-height":k=="yes"&&(f[h]="display:none");continue;case"margin":if(!/[1-9]/.test(k))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(j)||/text\-indent|padding|margin/.test(j)&&/\-[\d.]+/.test(k))continue;f[h]=j+":"+l[1]}}return c+(f.length?' style="'+f.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(b){return a(b)?c(b):b}}();!function(){function f(a,b,c){return a.push(e),b+(c?1:-1)}function g(a,b){for(var c=0;c<b;c++)a.push(d)}function h(a,b,c,d){switch(a.type){case"root":for(var e=0,l;l=a.children[e++];)c&&l.type=="element"&&!dtd.$inlineWithA[l.tagName]&&e>1&&(f(b,d,!0),g(b,d)),h(l,b,c,d);break;case"text":i(a,b);break;case"element":j(a,b,c,d);break;case"comment":k(a,b,c)}return b}function i(a,b){a.parentNode.tagName=="pre"?b.push(a.data):b.push(c[a.parentNode.tagName]?utils.html(a.data):a.data.replace(/[ ]{2}/g," &nbsp;"))}function j(a,c,d,e){var i="";if(a.attrs){i=[];var j=a.attrs;for(var k in j)i.push(k+(j[k]!==undefined?'="'+(b[k]?utils.html(j[k]).replace(/["]/g,function(a){return"&quot;"}):utils.unhtml(j[k]))+'"':""));i=i.join(" ")}c.push("<"+a.tagName+(i?" "+i:"")+(dtd.$empty[a.tagName]?"/":"")+">"),d&&!dtd.$inlineWithA[a.tagName]&&a.tagName!="pre"&&a.children&&a.children.length&&(e=f(c,e,!0),g(c,e));if(a.children&&a.children.length)for(var l=0,m;m=a.children[l++];)d&&m.type=="element"&&!dtd.$inlineWithA[m.tagName]&&l>1&&(f(c,e),g(c,e)),h(m,c,d,e);dtd.$empty[a.tagName]||(d&&!dtd.$inlineWithA[a.tagName]&&a.tagName!="pre"&&a.children&&a.children.length&&(e=f(c,e),g(c,e)),c.push("</"+a.tagName+">"))}function k(a,b){b.push("<!--"+a.data+"-->")}function l(a,b){var c;if(a.type=="element"&&a.getAttr("id")==b)return a;if(a.children&&a.children.length)for(var d=0,e;e=a.children[d++];)if(c=l(e,b))return c}function m(a,b,c){a.type=="element"&&a.tagName==b&&c.push(a);if(a.children&&a.children.length)for(var d=0,e;e=a.children[d++];)m(e,b,c)}function n(a,b){if(a.children&&a.children.length)for(var c=0,d;d=a.children[c];)n(d,b),d.parentNode&&(d.children&&d.children.length&&b(d),d.parentNode&&c++);else b(a)}var a=UE.uNode=function(a){this.type=a.type,this.data=a.data,this.tagName=a.tagName,this.parentNode=a.parentNode,this.attrs=a.attrs||{},this.children=a.children},b={href:1,src:1,_src:1,_href:1,cdata_data:1},c={style:1,script:1},d="    ",e="\n";a.createElement=function(b){return/[<>]/.test(b)?UE.htmlparser(b).children[0]:new a({type:"element",children:[],tagName:b})},a.createText=function(a,b){return new UE.uNode({type:"text",data:b?a:utils.unhtml(a||"")})},a.prototype={toHtml:function(a){var b=[];return h(this,b,a,0),b.join("")},innerHTML:function(a){if(this.type!="element"||dtd.$empty[this.tagName])return this;if(utils.isString(a)){if(this.children)for(var b=0,c;c=this.children[b++];)c.parentNode=null;this.children=[];var d=UE.htmlparser(a);for(var b=0,c;c=d.children[b++];)this.children.push(c),c.parentNode=this;return this}var d=new UE.uNode({type:"root",children:this.children});return d.toHtml()},innerText:function(b,c){if(this.type!="element"||dtd.$empty[this.tagName])return this;if(b){if(this.children)for(var d=0,e;e=this.children[d++];)e.parentNode=null;return this.children=[],this.appendChild(a.createText(b,c)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return this.type=="element"?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var a=this.parentNode;for(var b=0,c;c=a.children[b];b++)if(c===this)return b==0?null:a.children[b-1]},nextSibling:function(){var a=this.parentNode;for(var b=0,c;c=a.children[b++];)if(c===this)return a.children[b]},replaceChild:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var c=0,d;d=this.children[c];c++)if(d===b)return this.children.splice(c,1,a),b.parentNode=null,a.parentNode=this,a}},appendChild:function(a){if(this.type=="root"||this.type=="element"&&!dtd.$empty[this.tagName]){this.children||(this.children=[]),a.parentNode&&a.parentNode.removeChild(a);for(var b=0,c;c=this.children[b];b++)if(c===a){this.children.splice(b,1);break}return this.children.push(a),a.parentNode=this,a}},insertBefore:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var c=0,d;d=this.children[c];c++)if(d===b)return this.children.splice(c,0,a),a.parentNode=this,a}},insertAfter:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var c=0,d;d=this.children[c];c++)if(d===b)return this.children.splice(c+1,0,a),a.parentNode=this,a}},removeChild:function(a,b){if(this.children)for(var c=0,d;d=this.children[c];c++)if(d===a){this.children.splice(c,1),d.parentNode=null;if(b&&d.children&&d.children.length)for(var e=0,f;f=d.children[e];e++)this.children.splice(c+e,0,f),f.parentNode=this;return d}},getAttr:function(a){return this.attrs&&this.attrs[a.toLowerCase()]},setAttr:function(a,b){if(!a){delete this.attrs;return}this.attrs||(this.attrs={});if(utils.isObject(a))for(var c in a)a[c]?this.attrs[c.toLowerCase()]=a[c]:delete this.attrs[c];else b?this.attrs[a.toLowerCase()]=b:delete this.attrs[a]},getIndex:function(){var a=this.parentNode;for(var b=0,c;c=a.children[b];b++)if(c===this)return b;return-1},getNodeById:function(a){var b;if(this.children&&this.children.length)for(var c=0,d;d=this.children[c++];)if(b=l(d,a))return b},getNodesByTagName:function(a){a=utils.trim(a).replace(/[ ]{2,}/g," ").split(" ");var b=[],c=this;return utils.each(a,function(a){if(c.children&&c.children.length)for(var d=0,e;e=c.children[d++];)m(e,a,b)}),b},getStyle:function(a){var b=this.getAttr("style");if(!b)return"";var c=new RegExp("(^|;)\\s*"+a+":([^;]+)","i"),d=b.match(c);return d&&d[0]?d[2]:""},setStyle:function(a,b){function c(a,b){var c=new RegExp("(^|;)\\s*"+a+":([^;]+;?)","gi");d=d.replace(c,"$1"),b&&(d=a+":"+utils.unhtml(b)+";"+d)}var d=this.getAttr("style");d||(d="");if(utils.isObject(a))for(var e in a)c(e,a[e]);else c(a,b);this.setAttr("style",utils.trim(d))},traversal:function(a){return this.children&&this.children.length&&n(this,a),this}}}();var htmlparser=UE.htmlparser=function(a,b){function j(a,b){if(i[a.tagName]){var c=g.createElement(i[a.tagName]);a.appendChild(c),c.appendChild(g.createText(b)),a=c}else a.appendChild(g.createText(b))}function k(a,b,c){var e;if(e=h[b]){var i=a,j;while(i.type!="root"){if(utils.isArray(e)?utils.indexOf(e,i.tagName)!=-1:e==i.tagName){a=i,j=!0;break}i=i.parentNode}j||(a=k(a,utils.isArray(e)?e[0]:e))}var l=new g({parentNode:a,type:"element",tagName:b.toLowerCase(),children:dtd.$empty[b]?null:[]});if(c){var m={},n;while(n=d.exec(c))m[n[1].toLowerCase()]=f[n[1].toLowerCase()]?n[2]||n[3]||n[4]:utils.unhtml(n[2]||n[3]||n[4]);l.attrs=m}return a.children.push(l),dtd.$empty[b]?a:l}function l(a,b){a.children.push(new g({type:"comment",data:b,parentNode:a}))}var c=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,d=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};a=a.replace(new RegExp(domUtils.fillChar,"g"),""),b||(a=a.replace(new RegExp("[\\r\\t\\n"+(b?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(b?"":" ")+"]*","g"),function(a,c){return c&&e[c.toLowerCase()]?a.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):a.replace(new RegExp("^[\\r\\n"+(b?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(b?"":" ")+"]+$"),"")}));var f={href:1,src:1},g=UE.uNode,h={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},i={ol:"li",ul:"li"},m,n=0,o=0,p=new g({type:"root",children:[]}),q=p;while(m=c.exec(a)){n=m.index;try{n>o&&j(q,a.slice(o,n));if(m[3])dtd.$cdata[q.tagName]?j(q,m[0]):q=k(q,m[3].toLowerCase(),m[4]);else if(m[1]){if(q.type!="root")if(dtd.$cdata[q.tagName]&&!dtd.$cdata[m[1]])j(q,m[0]);else{var r=q;while(q.type=="element"&&q.tagName!=m[1].toLowerCase()){q=q.parentNode;if(q.type=="root")throw q=r,"break"}q=q.parentNode}}else m[2]&&l(q,m[2])}catch(s){}o=c.lastIndex}return o<a.length&&j(q,a.slice(o)),p},filterNode=UE.filterNode=function(){function a(b,c){switch(b.type){case"text":break;case"element":var d;if(d=c[b.tagName])if(d==="-")b.parentNode.removeChild(b);else if(utils.isFunction(d)){var e=b.parentNode,f=b.getIndex();d(b);if(b.parentNode){if(b.children)for(var g=0,h;h=b.children[g];)a(h,c),h.parentNode&&g++}else for(var g=f,h;h=e.children[g];)a(h,c),h.parentNode&&g++}else{var i=d.$;if(i&&b.attrs){var j={},k;for(var l in i){k=b.getAttr(l);if(l=="style"&&utils.isArray(i[l])){var m=[];utils.each(i[l],function(a){var c;(c=b.getStyle(a))&&m.push(a+":"+c)}),k=m.join(";")}k&&(j[l]=k)}b.attrs=j}if(b.children)for(var g=0,h;h=b.children[g];)a(h,c),h.parentNode&&g++}else if(dtd.$cdata[b.tagName])b.parentNode.removeChild(b);else{var e=b.parentNode,f=b.getIndex();b.parentNode.removeChild(b,!0);for(var g=f,h;h=e.children[g];)a(h,c),h.parentNode&&g++}break;case"comment":b.parentNode.removeChild(b)}}return function(b,c){if(utils.isEmptyObject(c))return b;var d;(d=c["-"])&&utils.each(d.split(" "),function(a){c[a]="-"});for(var e=0,f;f=b.children[e];)a(f,c),f.parentNode&&e++;return b}}();UE.plugin=function(){var a={};return{register:function(b,c,d,e){d&&utils.isFunction(d)&&(e=d,d=null),a[b]={optionName:d||b,execFn:c,afterDisabled:e}},load:function(b){utils.each(a,function(a){var c=a.execFn.call(b);b.options[a.optionName]!==!1?c&&utils.each(c,function(a,c){switch(c.toLowerCase()){case"shortcutkey":b.addshortcutkey(a);break;case"bindevents":utils.each(a,function(a,c){b.addListener(c,a)});break;case"bindmultievents":utils.each(utils.isArray(a)?a:[a],function(a){var c=utils.trim(a.type).split(/\s+/);utils.each(c,function(c){b.addListener(c,a.handler)})});break;case"commands":utils.each(a,function(a,c){b.commands[c]=a});break;case"outputrule":b.addOutputRule(a);break;case"inputrule":b.addInputRule(a);break;case"defaultoptions":b.setOpt(a)}}):a.afterDisabled&&a.afterDisabled.call(b)}),utils.each(UE.plugins,function(a){a.call(b)})},run:function(b,c){var d=a[b];d&&d.exeFn.call(c)}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},LocalStorage=UE.LocalStorage=function(){function c(){var a=document.createElement("div");return a.style.display="none",a.addBehavior?(a.addBehavior("#default#userdata"),{getItem:function(c){var d=null;try{document.body.appendChild(a),a.load(b),d=a.getAttribute(c),document.body.removeChild(a)}catch(e){}return d},setItem:function(c,d){document.body.appendChild(a),a.setAttribute(c,d),a.save(b),document.body.removeChild(a)},removeItem:function(c){document.body.appendChild(a),a.removeAttribute(c),a.save(b),document.body.removeChild(a)}}):null}var a=window.localStorage||c()||null,b="localStorage";return{saveLocalData:function(b,c){return a&&c?(a.setItem(b,c),!0):!1},getLocalData:function(b){return a?a.getItem(b):null},removeItem:function(b){a&&a.removeItem(b)}}}();!function(){var a="ueditor_preference";UE.Editor.prototype.setPreferences=function(b,c){var d={};utils.isString(b)?d[b]=c:d=b;var e=LocalStorage.getLocalData(a);e&&(e=utils.str2json(e))?utils.extend(e,d):e=d,e&&LocalStorage.saveLocalData(a,utils.json2str(e))},UE.Editor.prototype.getPreferences=function(b){var c=LocalStorage.getLocalData(a);return c&&(c=utils.str2json(c))?b?c[b]:c:null},UE.Editor.prototype.removePreferences=function(b){var c=LocalStorage.getLocalData(a);c&&(c=utils.str2json(c))&&(c[b]=undefined,delete c[b]),c&&LocalStorage.saveLocalData(a,utils.json2str(c))}}(),UE.plugins.defaultfilter=function(){var a=this;a.setOpt({allowDivTransToP:!0,disabledTableInTable:!0}),a.addInputRule(function(b){function e(a){while(a&&a.type=="element"){if(a.tagName=="td")return!0;a=a.parentNode}return!1}var c=this.options.allowDivTransToP,d;b.traversal(function(b){if(b.type=="element"){if(!dtd.$cdata[b.tagName]&&a.options.autoClearEmptyNode&&dtd.$inline[b.tagName]&&!dtd.$empty[b.tagName]&&(!b.attrs||utils.isEmptyObject(b.attrs))){b.firstChild()?b.tagName=="span"&&(!b.attrs||utils.isEmptyObject(b.attrs))&&b.parentNode.removeChild(b,!0):b.parentNode.removeChild(b);return}switch(b.tagName){case"style":case"script":b.setAttr({cdata_tag:b.tagName,cdata_data:b.innerHTML()||"",_ue_custom_node_:"true"}),b.tagName="div",b.innerHTML("");break;case"a":(d=b.getAttr("href"))&&b.setAttr("_href",d);break;case"img":if(d=b.getAttr("src"))if(/^data:/.test(d)){b.parentNode.removeChild(b);break}b.setAttr("_src",b.getAttr("src"));break;case"span":browser.webkit&&(d=b.getStyle("white-space"))&&/nowrap|normal/.test(d)&&(b.setStyle("white-space",""),a.options.autoClearEmptyNode&&utils.isEmptyObject(b.attrs)&&b.parentNode.removeChild(b,!0)),d=b.getAttr("id"),d&&/^_baidu_bookmark_/i.test(d)&&b.parentNode.removeChild(b);break;case"p":if(d=b.getAttr("align"))b.setAttr("align"),b.setStyle("text-align",d);utils.each(b.children,function(a){if(a.type=="element"&&a.tagName=="p"){var c=a.nextSibling();b.parentNode.insertAfter(a,b);var d=a;while(c){var e=c.nextSibling();b.parentNode.insertAfter(c,d),d=c,c=e}return!1}}),b.firstChild()||b.innerHTML(browser.ie?"&nbsp;":"<br/>");break;case"div":if(b.getAttr("cdata_tag"))break;d=b.getAttr("class");if(d&&/^line number\d+/.test(d))break;if(!c)break;var f,g=UE.uNode.createElement("p");while(f=b.firstChild())f.type=="text"||!UE.dom.dtd.$block[f.tagName]?g.appendChild(f):g.firstChild()?(b.parentNode.insertBefore(g,b),g=UE.uNode.createElement("p")):b.parentNode.insertBefore(f,b);g.firstChild()&&b.parentNode.insertBefore(g,b),b.parentNode.removeChild(b);break;case"dl":b.tagName="ul";break;case"dt":case"dd":b.tagName="li";break;case"li":var h=b.getAttr("class");(!h||!/list\-/.test(h))&&b.setAttr();var i=b.getNodesByTagName("ol ul");UE.utils.each(i,function(a){b.parentNode.insertAfter(a,b)});break;case"td":case"th":case"caption":(!b.children||!b.children.length)&&b.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":a.options.disabledTableInTable&&e(b)&&(b.parentNode.insertBefore(UE.uNode.createText(b.innerText()),b),b.parentNode.removeChild(b))}}})}),a.addOutputRule(function(b){var c;b.traversal(function(b){if(b.type=="element"){if(a.options.autoClearEmptyNode&&dtd.$inline[b.tagName]&&!dtd.$empty[b.tagName]&&(!b.attrs||utils.isEmptyObject(b.attrs))){b.firstChild()?b.tagName=="span"&&(!b.attrs||utils.isEmptyObject(b.attrs))&&b.parentNode.removeChild(b,!0):b.parentNode.removeChild(b);return}switch(b.tagName){case"div":if(c=b.getAttr("cdata_tag"))b.tagName=c,b.appendChild(UE.uNode.createText(b.getAttr("cdata_data"))),b.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""});break;case"a":(c=b.getAttr("_href"))&&b.setAttr({href:utils.html(c),_href:""});break;case"span":c=b.getAttr("id"),c&&/^_baidu_bookmark_/i.test(c)&&b.parentNode.removeChild(b);break;case"img":(c=b.getAttr("_src"))&&b.setAttr({src:b.getAttr("_src"),_src:""})}}})})},UE.commands.inserthtml={execCommand:function(a,b,c){var d=this,e,f;if(!b)return;if(d.fireEvent("beforeinserthtml",b)===!0)return;e=d.selection.getRange(),f=e.document.createElement("div"),f.style.display="inline";if(!c){var g=UE.htmlparser(b);d.options.filterRules&&UE.filterNode(g,d.options.filterRules),d.filterInputRule(g),b=g.toHtml()}f.innerHTML=utils.trim(b);if(!e.collapsed){var h=e.startContainer;domUtils.isFillChar(h)&&e.setStartBefore(h),h=e.endContainer,domUtils.isFillChar(h)&&e.setEndAfter(h),e.txtToElmBoundary(),e.endContainer&&e.endContainer.nodeType==1&&(h=e.endContainer.childNodes[e.endOffset],h&&domUtils.isBr(h)&&e.setEndAfter(h)),e.startOffset==0&&(h=e.startContainer,domUtils.isBoundaryNode(h,"firstChild")&&(h=e.endContainer,e.endOffset==(h.nodeType==3?h.nodeValue.length:h.childNodes.length)&&domUtils.isBoundaryNode(h,"lastChild")&&(d.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",e.setStart(d.body.firstChild,0).collapse(!0)))),!e.collapsed&&e.deleteContents();if(e.startContainer.nodeType==1){var i=e.startContainer.childNodes[e.startOffset],j;if(i&&domUtils.isBlockElm(i)&&(j=i.previousSibling)&&domUtils.isBlockElm(j)){e.setEnd(j,j.childNodes.length).collapse();while(i.firstChild)j.appendChild(i.firstChild);domUtils.remove(i)}}}var i,k,j,l,m=0,n;e.inFillChar()&&(i=e.startContainer,domUtils.isFillChar(i)?(e.setStartBefore(i).collapse(!0),domUtils.remove(i)):domUtils.isFillChar(i,!0)&&(i.nodeValue=i.nodeValue.replace(fillCharReg,""),e.startOffset--,e.collapsed&&e.collapse(!0)));var o=domUtils.findParentByTagName(e.startContainer,"li",!0);if(o){var p,q;while(i=f.firstChild){while(i&&(i.nodeType==3||!domUtils.isBlockElm(i)||i.tagName=="HR"))p=i.nextSibling,e.insertNode(i).collapse(),q=i,i=p;if(i)if(/^(ol|ul)$/i.test(i.tagName)){while(i.firstChild)q=i.firstChild,domUtils.insertAfter(o,i.firstChild),o=o.nextSibling;domUtils.remove(i)}else{var r;p=i.nextSibling,r=d.document.createElement("li"),domUtils.insertAfter(o,r),r.appendChild(i),q=i,i=p,o=r}}o=domUtils.findParentByTagName(e.startContainer,"li",!0),domUtils.isEmptyBlock(o)&&domUtils.remove(o),q&&e.setStartAfter(q).collapse(!0).select(!0)}else{while(i=f.firstChild){if(m){var s=d.document.createElement("p");while(i&&(i.nodeType==3||!dtd.$block[i.tagName]))n=i.nextSibling,s.appendChild(i),i=n;s.firstChild&&(i=s)}e.insertNode(i),n=i.nextSibling;if(!m&&i.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(i)){k=domUtils.findParent(i,function(a){return domUtils.isBlockElm(a)});if(k&&k.tagName.toLowerCase()!="body"&&(!dtd[k.tagName][i.nodeName]||i.parentNode!==k)){if(!dtd[k.tagName][i.nodeName])j=k;else{l=i.parentNode;while(l!==k)j=l,l=l.parentNode}domUtils.breakParent(i,j||l);var j=i.previousSibling;domUtils.trimWhiteTextNode(j),j.childNodes.length||domUtils.remove(j),!browser.ie&&(p=i.nextSibling)&&domUtils.isBlockElm(p)&&p.lastChild&&!domUtils.isBr(p.lastChild)&&p.appendChild(d.document.createElement("br")),m=1}}var p=i.nextSibling;if(!f.firstChild&&p&&domUtils.isBlockElm(p)){e.setStart(p,0).collapse(!0);break}e.setEndAfter(i).collapse()}i=e.startContainer,n&&domUtils.isBr(n)&&domUtils.remove(n);if(domUtils.isBlockElm(i)&&domUtils.isEmptyNode(i))if(n=i.nextSibling)domUtils.remove(i),n.nodeType==1&&dtd.$block[n.tagName]&&e.setStart(n,0).collapse(!0).shrinkBoundary();else try{i.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(t){e.setStartBefore(i),domUtils.remove(i)}try{e.select(!0)}catch(t){}}setTimeout(function(){e=d.selection.getRange(),e.scrollToView(d.autoHeightEnabled,d.autoHeightEnabled?domUtils.getXY(d.iframe).y:0),d.fireEvent("afterinserthtml",b)},200)}},UE.commands.imagefloat={execCommand:function(a,b){var c=this,d=c.selection.getRange();if(!d.collapsed){var e=d.getClosedNode();if(e&&e.tagName=="IMG")switch(b){case"left":case"right":case"none":var f=e.parentNode,g,h,i;while(dtd.$inline[f.tagName]||f.tagName=="A")f=f.parentNode;g=f;if(g.tagName=="P"&&domUtils.getStyle(g,"text-align")=="center"){if(!domUtils.isBody(g)&&domUtils.getChildCount(g,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)})==1){h=g.previousSibling,i=g.nextSibling;if(h&&i&&h.nodeType==1&&i.nodeType==1&&h.tagName==i.tagName&&domUtils.isBlockElm(h)){h.appendChild(g.firstChild);while(i.firstChild)h.appendChild(i.firstChild);domUtils.remove(g),domUtils.remove(i)}else domUtils.setStyle(g,"text-align","")}d.selectNode(e).select()}domUtils.setStyle(e,"float",b=="none"?"":b),b=="none"&&domUtils.removeAttributes(e,"align");break;case"center":if(c.queryCommandValue("imagefloat")!="center"){f=e.parentNode,domUtils.setStyle(e,"float",""),domUtils.removeAttributes(e,"align"),g=e;while(f&&domUtils.getChildCount(f,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)})==1&&(dtd.$inline[f.tagName]||f.tagName=="A"))g=f,f=f.parentNode;d.setStartBefore(g).setCursor(!1),f=c.document.createElement("div"),f.appendChild(g),domUtils.setStyle(g,"float",""),c.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+f.innerHTML+"</p>"),g=c.document.getElementById("_img_parent_tmp"),g.removeAttribute("id"),g=g.firstChild,d.selectNode(g).select(),i=g.parentNode.nextSibling,i&&domUtils.isEmptyNode(i)&&domUtils.remove(i)}}}},queryCommandValue:function(){var a=this.selection.getRange(),b,c;return a.collapsed?"none":(b=a.getClosedNode(),b&&b.nodeType==1&&b.tagName=="IMG"?(c=domUtils.getComputedStyle(b,"float")||b.getAttribute("align"),c=="none"&&(c=domUtils.getComputedStyle(b.parentNode,"text-align")=="center"?"center":c),{left:1,right:1,center:1}[c]?c:"none"):"none")},queryCommandState:function(){var a=this.selection.getRange(),b;return a.collapsed?-1:(b=a.getClosedNode(),b&&b.nodeType==1&&b.tagName=="IMG"?0:-1)}},UE.commands.insertimage={execCommand:function(a,b){b=utils.isArray(b)?b:[b];if(!b.length)return;var c=this,d=c.selection.getRange(),e=d.getClosedNode();if(c.fireEvent("beforeinsertimage",b)===!0)return;if(e&&/img/i.test(e.tagName)&&(e.className!="edui-faked-video"||e.className.indexOf("edui-upload-video")!=-1)&&!e.getAttribute("word_img")){var f=b.shift(),g=f.floatStyle;delete f.floatStyle,domUtils.setAttributes(e,f),c.execCommand("imagefloat",g),b.length>0&&(d.setStartAfter(e).setCursor(!1,!0),c.execCommand("insertimage",b))}else{var h=[],i="",j;j=b[0];if(b.length==1)i='<img src="'+j.src+'" '+(j._src?' _src="'+j._src+'" ':"")+(j.width?'width="'+j.width+'" ':"")+(j.height?' height="'+j.height+'" ':"")+(j["floatStyle"]=="left"||j["floatStyle"]=="right"?' style="float:'+j.floatStyle+';"':"")+(j.title&&j.title!=""?' title="'+j.title+'"':"")+(j.border&&j.border!="0"?' border="'+j.border+'"':"")+(j.alt&&j.alt!=""?' alt="'+j.alt+'"':"")+(j.hspace&&j.hspace!="0"?' hspace = "'+j.hspace+'"':"")+(j.vspace&&j.vspace!="0"?' vspace = "'+j.vspace+'"':"")+"/>",j["floatStyle"]=="center"&&(i='<p style="text-align: center">'+i+"</p>"),h.push(i);else for(var k=0;j=b[k++];)i="<p "+(j["floatStyle"]=="center"?'style="text-align: center" ':"")+'><img src="'+j.src+'" '+(j.width?'width="'+j.width+'" ':"")+(j._src?' _src="'+j._src+'" ':"")+(j.height?' height="'+j.height+'" ':"")+' style="'+(j.floatStyle&&j["floatStyle"]!="center"?"float:"+j.floatStyle+";":"")+(j.border||"")+'" '+(j.title?' title="'+j.title+'"':"")+" /></p>",h.push(i);c.execCommand("insertHtml",h.join(""))}c.fireEvent("afterinsertimage",b)}},UE.plugins.font=function(){function e(a){var b;while(b=a.parentNode){if(b.tagName!="SPAN"||domUtils.getChildCount(b,function(a){return!domUtils.isBookmarkNode(a)&&!domUtils.isBr(a)})!=1)break;b.style.cssText+=a.style.cssText,domUtils.remove(a,!0),a=b}}function f(a,b,c){if(d[b]){a.adjustmentBoundary();if(!a.collapsed&&a.startContainer.nodeType==1){var e=a.startContainer.childNodes[a.startOffset];if(e&&domUtils.isTagNode(e,"span")){var f=a.createBookmark();utils.each(domUtils.getElementsByTagName(e,"span"),function(a){if(!a.parentNode||domUtils.isBookmarkNode(a))return;if(b=="backcolor"&&domUtils.getComputedStyle(a,"background-color").toLowerCase()===c)return;domUtils.removeStyle(a,d[b]),a.style.cssText.replace(/^\s+$/,"").length==0&&domUtils.remove(a,!0)}),a.moveToBookmark(f)}}}}function g(a,b,c){var d=a.collapsed,g=a.createBookmark(),h;if(d){h=g.start.parentNode;while(dtd.$inline[h.tagName])h=h.parentNode}else h=domUtils.getCommonAncestor(g.start,g.end);utils.each(domUtils.getElementsByTagName(h,"span"),function(a){if(!a.parentNode||domUtils.isBookmarkNode(a))return;if(/\s*border\s*:\s*none;?\s*/i.test(a.style.cssText)){/^\s*border\s*:\s*none;?\s*$/.test(a.style.cssText)?domUtils.remove(a,!0):domUtils.removeStyle(a,"border");return}/border/i.test(a.style.cssText)&&a.parentNode.tagName=="SPAN"&&/border/i.test(a.parentNode.style.cssText)&&(a.style.cssText=a.style.cssText.replace(/border[^:]*:[^;]+;?/gi,""));if(b!="fontborder"||c!="none"){var d=a.nextSibling;while(d&&d.nodeType==1&&d.tagName=="SPAN"){if(domUtils.isBookmarkNode(d)&&b=="fontborder"){a.appendChild(d),d=a.nextSibling;continue}d.style.cssText==a.style.cssText&&(domUtils.moveChild(d,a),domUtils.remove(d));if(a.nextSibling===d)break;d=a.nextSibling}}e(a);if(browser.ie&&browser.version>8){var f=domUtils.findParent(a,function(a){return a.tagName=="SPAN"&&/background-color/.test(a.style.cssText)});f&&!/background-color/.test(a.style.cssText)&&(a.style.backgroundColor=f.style.backgroundColor)}}),a.moveToBookmark(g),f(a,b,c)}var a=this,b={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},c={underline:1,strikethrough:1,fontborder:1},d={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};a.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),a.addInputRule(function(a){utils.each(a.getNodesByTagName("u s del font strike"),function(a){if(a.tagName=="font"){var b=[];for(var c in a.attrs)switch(c){case"size":b.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[a.attrs[c]]||a.attrs[c])+"px");break;case"color":b.push("color:"+a.attrs[c]);break;case"face":b.push("font-family:"+a.attrs[c]);break;case"style":b.push(a.attrs[c])}a.attrs={style:b.join(";")}}else{var d=a.tagName=="u"?"underline":"line-through";a.attrs={style:(a.getAttr("style")||"")+"text-decoration:"+d+";"}}a.tagName="span"})});for(var h in b)!function(a,b){UE.commands[a]={execCommand:function(d,e){e=e||(this.queryCommandState(d)?"none":d=="underline"?"underline":d=="fontborder"?"1px solid #000":"line-through");var f=this,h=this.selection.getRange(),i;if(e=="default")h.collapsed&&(i=f.document.createTextNode("font"),h.insertNode(i).select()),f.execCommand("removeFormat","span,a",b),i&&(h.setStartBefore(i).collapse(!0),domUtils.remove(i)),g(h,d,e),h.select();else if(!h.collapsed)c[a]&&f.queryCommandValue(a)&&f.execCommand("removeFormat","span,a",b),h=f.selection.getRange(),h.applyInlineStyle("span",{style:b+":"+e}),g(h,d,e),h.select();else{var j=domUtils.findParentByTagName(h.startContainer,"span",!0);i=f.document.createTextNode("font");if(j&&!j.children.length&&!j[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length)h.insertNode(i),c[a]&&(h.selectNode(i).select(),f.execCommand("removeFormat","span,a",b,null),j=domUtils.findParentByTagName(i,"span",!0),h.setStartBefore(i)),j&&(j.style.cssText+=";"+b+":"+e),h.collapse(!0).select();else{h.insertNode(i),h.selectNode(i).select(),j=h.document.createElement("span");if(c[a]){if(domUtils.findParentByTagName(i,"a",!0)){h.setStartBefore(i).setCursor(),domUtils.remove(i);return}f.execCommand("removeFormat","span,a",b)}j.style.cssText=b+":"+e,i.parentNode.insertBefore(j,i);if(!browser.ie||browser.ie&&browser.version==9){var k=j.parentNode;while(!domUtils.isBlockElm(k))k.tagName=="SPAN"&&(j.style.cssText=k.style.cssText+";"+j.style.cssText),k=k.parentNode}opera?setTimeout(function(){h.setStart(j,0).collapse(!0),g(h,d,e),h.select()}):(h.setStart(j,0).collapse(!0),g(h,d,e),h.select())}domUtils.remove(i)}return!0},queryCommandValue:function(a){var c=this.selection.getStart();if(a=="underline"||a=="strikethrough"){var d=c,e;while(d&&!domUtils.isBlockElm(d)&&!domUtils.isBody(d)){if(d.nodeType==1){e=domUtils.getComputedStyle(d,b);if(e!="none")return e}d=d.parentNode}return"none"}if(a=="fontborder"){var f=c,g;while(f&&dtd.$inline[f.tagName]){if(g=domUtils.getComputedStyle(f,"border"))if(/1px/.test(g)&&/solid/.test(g))return g;f=f.parentNode}return""}if(a=="FontSize"){var h=domUtils.getComputedStyle(c,b),f=/^([\d\.]+)(\w+)$/.exec(h);return f?Math.floor(f[1])+f[2]:h}return domUtils.getComputedStyle(c,b)},queryCommandState:function(a){if(!c[a])return 0;var b=this.queryCommandValue(a);return a=="fontborder"?/1px/.test(b)&&/solid/.test(b):a=="underline"?/underline/.test(b):/line\-through/.test(b)}}}(h,b[h])},UE.plugins.dragdrop=function(){var a=this;a.ready(function(){domUtils.on(this.body,"dragend",function(){var b=a.selection.getRange(),c=b.getClosedNode()||a.selection.getStart();if(c&&c.tagName=="IMG"){var d=c.previousSibling,e;while(e=c.nextSibling){if(e.nodeType!=1||e.tagName!="SPAN"||!!e.firstChild)break;domUtils.remove(e)}(d&&d.nodeType==1&&!domUtils.isEmptyBlock(d)||!d)&&(!e||e&&!domUtils.isEmptyBlock(e))&&(d&&d.tagName=="P"&&!domUtils.isEmptyBlock(d)?(d.appendChild(c),domUtils.moveChild(e,d),domUtils.remove(e)):e&&e.tagName=="P"&&!domUtils.isEmptyBlock(e)&&e.insertBefore(c,e.firstChild),d&&d.tagName=="P"&&domUtils.isEmptyBlock(d)&&domUtils.remove(d),e&&e.tagName=="P"&&domUtils.isEmptyBlock(e)&&domUtils.remove(e),b.selectNode(c).select(),a.fireEvent("saveScene"))}})}),a.addListener("keyup",function(b,c){var d=c.keyCode||c.which;if(d==13){var e=a.selection.getRange(),f;(f=domUtils.findParentByTagName(e.startContainer,"p",!0))&&domUtils.getComputedStyle(f,"text-align")=="center"&&domUtils.removeStyle(f,"text-align")}})},UE.plugins.paste=function(){function a(a){var b=this.document;if(b.getElementById("baidu_pastebin"))return;var c=this.selection.getRange(),d=c.createBookmark(),e=b.createElement("div");e.id="baidu_pastebin",browser.webkit&&e.appendChild(b.createTextNode(domUtils.fillChar+domUtils.fillChar)),b.body.appendChild(e),d.start.style.display="",e.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(d.start).y+"px",c.selectNodeContents(e).select(!0),setTimeout(function(){if(browser.webkit)for(var f=0,g=b.querySelectorAll("#baidu_pastebin"),h;h=g[f++];){if(!domUtils.isEmptyNode(h)){e=h;break}domUtils.remove(h)}try{e.parentNode.removeChild(e)}catch(i){}c.moveToBookmark(d).select(!0),a(e)},0)}function f(a){return a.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(a,b,c,d){return c=c.toLowerCase(),{img:1}[c]?a:(d=d.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(a,b,c){return{src:1,href:1,name:1}[b.toLowerCase()]?b+"="+c+" ":""}),{span:1,div:1}[c]?"":"<"+b+c+" "+utils.trim(d)+">")})}function g(a){var g;if(a.firstChild){var h=domUtils.getElementsByTagName(a,"span");for(var i=0,j;j=h[i++];)(j.id=="_baidu_cut_start"||j.id=="_baidu_cut_end")&&domUtils.remove(j);if(browser.webkit){var k=a.querySelectorAll("div br");for(var i=0,l;l=k[i++];){var m=l.parentNode;m.tagName=="DIV"&&m.childNodes.length==1&&(m.innerHTML="<p><br/></p>",domUtils.remove(m))}var n=a.querySelectorAll("#baidu_pastebin");for(var i=0,o;o=n[i++];){var p=b.document.createElement("p");o.parentNode.insertBefore(p,o);while(o.firstChild)p.appendChild(o.firstChild);domUtils.remove(o)}var q=a.querySelectorAll("meta");for(var i=0,r;r=q[i++];)domUtils.remove(r);var k=a.querySelectorAll("br");for(i=0;r=k[i++];)/^apple-/i.test(r.className)&&domUtils.remove(r)}if(browser.gecko){var s=a.querySelectorAll("[_moz_dirty]");for(i=0;r=s[i++];)r.removeAttribute("_moz_dirty")}if(!browser.ie){var t=a.querySelectorAll("span.Apple-style-span");for(var i=0,r;r=t[i++];)domUtils.remove(r,!0)}g=a.innerHTML,g=UE.filterWord(g);var u=UE.htmlparser(g);b.options.filterRules&&UE.filterNode(u,b.options.filterRules),b.filterInputRule(u);if(browser.webkit){var v=u.lastChild();v&&v.type=="element"&&v.tagName=="br"&&u.removeChild(v),utils.each(b.body.querySelectorAll("div"),function(a){domUtils.isEmptyBlock(a)&&domUtils.remove(a,!0)})}g={html:u.toHtml()},b.fireEvent("beforepaste",g,u);if(!g.html)return;u=UE.htmlparser(g.html,!0),b.queryCommandState("pasteplain")===1?b.execCommand("insertHtml",UE.filterNode(u,b.options.filterTxtRules).toHtml(),!0):(UE.filterNode(u,b.options.filterTxtRules),c=u.toHtml(),d=g.html,e=b.selection.getRange().createAddress(!0),b.execCommand("insertHtml",b.getOpt("retainOnlyLabelPasted")===!0?f(d):d,!0)),b.fireEvent("afterpaste",g)}}var b=this;b.setOpt({retainOnlyLabelPasted:!1});var c,d,e;b.addListener("pasteTransfer",function(a,g){if(e&&c&&d&&c!=d){var h=b.selection.getRange();h.moveToAddress(e,!0);if(!h.collapsed){while(!domUtils.isBody(h.startContainer)){var i=h.startContainer;if(i.nodeType==1){i=i.childNodes[h.startOffset];if(!i){h.setStartBefore(h.startContainer);continue}var j=i.previousSibling;j&&j.nodeType==3&&(new RegExp("^[\n\r	 "+domUtils.fillChar+"]*$")).test(j.nodeValue)&&h.setStartBefore(j)}if(h.startOffset!=0)break;h.setStartBefore(h.startContainer)}while(!domUtils.isBody(h.endContainer)){var k=h.endContainer;if(k.nodeType==1){k=k.childNodes[h.endOffset];if(!k){h.setEndAfter(h.endContainer);continue}var l=k.nextSibling;l&&l.nodeType==3&&(new RegExp("^[\n\r	"+domUtils.fillChar+"]*$")).test(l.nodeValue)&&h.setEndAfter(l)}if(h.endOffset!=h.endContainer[h.endContainer.nodeType==3?"nodeValue":"childNodes"].length)break;h.setEndAfter(h.endContainer)}}h.deleteContents(),h.select(!0),b.__hasEnterExecCommand=!0;var m=d;g===2?m=f(m):g&&(m=c),b.execCommand("inserthtml",m,!0),b.__hasEnterExecCommand=!1;var n=b.selection.getRange();while(!domUtils.isBody(n.startContainer)&&!n.startOffset&&n.startContainer[n.startContainer.nodeType==3?"nodeValue":"childNodes"].length)n.setStartBefore(n.startContainer);var o=n.createAddress(!0);e.endAddress=o.startAddress}}),b.addListener("ready",function(){domUtils.on(b.body,"cut",function(){var a=b.selection.getRange();!a.collapsed&&b.undoManger&&b.undoManger.save()}),domUtils.on(b.body,browser.ie||browser.opera?"keydown":"paste",function(c){if((browser.ie||browser.opera)&&(!c.ctrlKey&&!c.metaKey||c.keyCode!="86"))return;a.call(b,function(a){g(a)})})}),b.commands.paste={execCommand:function(c){browser.ie?(a.call(b,function(a){g(a)}),b.document.execCommand("paste")):alert(b.getLang("pastemsg"))}}},UE.plugins.pasteplain=function(){var a=this;a.setOpt({pasteplain:!1,filterTxtRules:function(){function a(a){a.tagName="p",a.setStyle()}function b(a){a.parentNode.removeChild(a,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(a){var b,c=UE.uNode.createElement("p");while(b=a.firstChild())b.type=="text"||!UE.dom.dtd.$block[b.tagName]?c.appendChild(b):c.firstChild()?(a.parentNode.insertBefore(c,a),c=UE.uNode.createElement("p")):a.parentNode.insertBefore(b,a);c.firstChild()&&a.parentNode.insertBefore(c,a),a.parentNode.removeChild(a)},ol:b,ul:b,dl:b,dt:b,dd:b,li:b,caption:a,th:a,tr:a,h1:a,h2:a,h3:a,h4:a,h5:a,h6:a,td:function(a){var b=!!a.innerText();b&&a.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),a),a.parentNode.removeChild(a,a.innerText())}}}()});var b=a.options.pasteplain;a.commands.pasteplain={queryCommandState:function(){return b?1:0},execCommand:function(){b=!b|0},notNeedUndo:1}},UE.plugins.list=function(){function d(a){var b=[];for(var c in a)b.push(c);return b}function h(a){var b=a.className;return domUtils.hasClass(a,/custom_/)?b.match(/custom_(\w+)/)[1]:domUtils.getStyle(a,"list-style-type")}function i(a,b){utils.each(domUtils.getElementsByTagName(a,"ol ul"),function(d){if(!domUtils.inDoc(d,a))return;var f=d.parentNode;if(f.tagName==d.tagName){var g=h(d)||(d.tagName=="OL"?"decimal":"disc"),i=h(f)||(f.tagName=="OL"?"decimal":"disc");if(g==i){var l=utils.indexOf(e[d.tagName],g);l=l+1==e[d.tagName].length?0:l+1,k(d,e[d.tagName][l])}}var m=0,n=2;if(domUtils.hasClass(d,/custom_/)){if(!/[ou]l/i.test(f.tagName)||!domUtils.hasClass(f,/custom_/))n=1}else/[ou]l/i.test(f.tagName)&&domUtils.hasClass(f,/custom_/)&&(n=3);var o=domUtils.getStyle(d,"list-style-type");o&&(d.style.cssText="list-style-type:"+o),d.className=utils.trim(d.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+n,utils.each(domUtils.getElementsByTagName(d,"li"),function(a){a.style.cssText&&(a.style.cssText="");if(!a.firstChild){domUtils.remove(a);return}if(a.parentNode!==d)return;m++;if(domUtils.hasClass(d,/custom_/)){var b=1,e=h(d);if(d.tagName=="OL"){if(e)switch(e){case"cn":case"cn1":case"cn2":m>10&&(m%10==0||m>10&&m<20)?b=2:m>20&&(b=3);break;case"num2":m>9&&(b=2)}a.className="list-"+c[e]+m+" "+"list-"+e+"-paddingleft-"+b}else a.className="list-"+c[e]+" "+"list-"+e+"-paddingleft"}else a.className=a.className.replace(/list-[\w\-]+/gi,"");var f=a.getAttribute("class");f!==null&&!f.replace(/\s/g,"")&&domUtils.removeAttributes(a,"class")}),!b&&j(d,d.tagName.toLowerCase(),h(d)||domUtils.getStyle(d,"list-style-type"),!0)})}function j(a,b,c,d){var e=a.nextSibling;e&&e.nodeType==1&&e.tagName.toLowerCase()==b&&(h(e)||domUtils.getStyle(e,"list-style-type")||(b=="ol"?"decimal":"disc"))==c&&(domUtils.moveChild(e,a),e.childNodes.length==0&&domUtils.remove(e)),e&&domUtils.isFillChar(e)&&domUtils.remove(e);var f=a.previousSibling;f&&f.nodeType==1&&f.tagName.toLowerCase()==b&&(h(f)||domUtils.getStyle(f,"list-style-type")||(b=="ol"?"decimal":"disc"))==c&&domUtils.moveChild(a,f),f&&domUtils.isFillChar(f)&&domUtils.remove(f),!d&&domUtils.isEmptyBlock(a)&&domUtils.remove(a),h(a)&&i(a.ownerDocument,!0)}function k(a,b){c[b]&&(a.className="custom_"+b);try{domUtils.setStyle(a,"list-style-type",b)}catch(d){}}function l(a){var b=a.previousSibling;b&&domUtils.isEmptyBlock(b)&&domUtils.remove(b),b=a.nextSibling,b&&domUtils.isEmptyBlock(b)&&domUtils.remove(b)}function m(a){while(a&&!domUtils.isBody(a)){if(a.nodeName=="TABLE")return null;if(a.nodeName=="LI")return a;a=a.parentNode}}var a=this,b={TD:1,PRE:1,BLOCKQUOTE:1},c={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};a.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var e={OL:d(a.options.insertorderedlist),UL:d(a.options.insertunorderedlist)},f=a.options.listiconpath;for(var g in c)!a.options.insertorderedlist.hasOwnProperty(g)&&!a.options.insertunorderedlist.hasOwnProperty(g)&&delete c[g];a.ready(function(){var b=[];for(var d in c){if(d=="dash"||d=="dot")b.push("li.list-"+c[d]+"{background-image:url("+f+c[d]+".gif)}"),b.push("ul.custom_"+d+"{list-style:none;}ul.custom_"+d+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var e=0;e<99;e++)b.push("li.list-"+c[d]+e+"{background-image:url("+f+"list-"+c[d]+e+".gif)}");b.push("ol.custom_"+d+"{list-style:none;}ol.custom_"+d+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(d){case"cn":b.push("li.list-"+d+"-paddingleft-1{padding-left:25px}"),b.push("li.list-"+d+"-paddingleft-2{padding-left:40px}"),b.push("li.list-"+d+"-paddingleft-3{padding-left:55px}");break;case"cn1":b.push("li.list-"+d+"-paddingleft-1{padding-left:30px}"),b.push("li.list-"+d+"-paddingleft-2{padding-left:40px}"),b.push("li.list-"+d+"-paddingleft-3{padding-left:55px}");break;case"cn2":b.push("li.list-"+d+"-paddingleft-1{padding-left:40px}"),b.push("li.list-"+d+"-paddingleft-2{padding-left:55px}"),b.push("li.list-"+d+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":b.push("li.list-"+d+"-paddingleft-1{padding-left:25px}");break;case"num2":b.push("li.list-"+d+"-paddingleft-1{padding-left:35px}"),b.push("li.list-"+d+"-paddingleft-2{padding-left:40px}");break;case"dash":b.push("li.list-"+d+"-paddingleft{padding-left:35px}");break;case"dot":b.push("li.list-"+d+"-paddingleft{padding-left:20px}")}}b.push(".list-paddingleft-1{padding-left:0}"),b.push(".list-paddingleft-2{padding-left:"+a.options.listDefaultPaddingLeft+"px}"),b.push(".list-paddingleft-3{padding-left:"+a.options.listDefaultPaddingLeft*2+"px}"),utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+b.join("\n"),a.document)}),a.ready(function(){domUtils.on(a.body,"cut",function(){setTimeout(function(){var b=a.selection.getRange(),c;if(!b.collapsed&&(c=domUtils.findParentByTagName(b.startContainer,"li",!0))&&!c.nextSibling&&domUtils.isEmptyBlock(c)){var d=c.parentNode,e;if(e=d.previousSibling)domUtils.remove(d),b.setStartAtLast(e).collapse(!0),b.select(!0);else if(e=d.nextSibling)domUtils.remove(d),b.setStartAtFirst(e).collapse(!0),b.select(!0);else{var f=a.document.createElement("p");domUtils.fillNode(a.document,f),d.parentNode.insertBefore(f,d),domUtils.remove(d),b.setStart(f,0).collapse(!0),b.select(!0)}}})})}),a.addListener("beforepaste",function(a,b){var d=this,f=d.selection.getRange(),g,i=UE.htmlparser(b.html,!0);if(g=domUtils.findParentByTagName(f.startContainer,"li",!0)){var j=g.parentNode,k=j.tagName=="OL"?"ul":"ol";utils.each(i.getNodesByTagName(k),function(b){b.tagName=j.tagName,b.setAttr();if(b.parentNode===i)a=h(j)||(j.tagName=="OL"?"decimal":"disc");else{var d=b.parentNode.getAttr("class");d&&/custom_/.test(d)?a=d.match(/custom_(\w+)/)[1]:a=b.parentNode.getStyle("list-style-type"),a||(a=j.tagName=="OL"?"decimal":"disc")}var f=utils.indexOf(e[j.tagName],a);b.parentNode!==i&&(f=f+1==e[j.tagName].length?0:f+1);var g=e[j.tagName][f];c[g]?b.setAttr("class","custom_"+g):b.setStyle("list-style-type",g)})}b.html=i.toHtml()}),a.getOpt("disablePInList")===!0&&a.addOutputRule(function(a){utils.each(a.getNodesByTagName("li"),function(a){var b=[],c=0;utils.each(a.children,function(d){if(d.tagName=="p"){var e;while(e=d.children.pop())b.splice(c,0,e),e.parentNode=a,lastNode=e;e=b[b.length-1];if(!e||e.type!="element"||e.tagName!="br"){var f=UE.uNode.createElement("br");f.parentNode=a,b.push(f)}c=b.length}}),b.length&&(a.children=b)})}),a.addInputRule(function(b){utils.each(b.getNodesByTagName("li"),function(a){var b=UE.uNode.createElement("p");for(var c=0,d;d=a.children[c];)d.type=="text"||dtd.p[d.tagName]?b.appendChild(d):b.firstChild()?(a.insertBefore(b,d),b=UE.uNode.createElement("p"),c+=2):c++;(b.firstChild()&&!b.parentNode||!a.firstChild())&&a.appendChild(b),b.firstChild()||b.innerHTML(browser.ie?"&nbsp;":"<br/>");var e=a.firstChild(),f=e.lastChild();f&&f.type=="text"&&/^\s*$/.test(f.data)&&e.removeChild(f)});if(a.options.autoTransWordToList){var d={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},e={square:"n"};function f(a,b){var c=b.firstChild();if(c&&c.type=="element"&&c.tagName=="span"&&/Wingdings|Symbol/.test(c.getStyle("font-family"))){for(var f in e)if(e[f]==c.data)return f;return"disc"}for(var f in d)if(d[f].test(a))return f}utils.each(b.getNodesByTagName("p"),function(b){function e(a,b,c){if(a.tagName=="ol")if(browser.ie){var e=b.firstChild();e.type=="element"&&e.tagName=="span"&&d[c].test(e.innerText())&&b.removeChild(e)}else b.innerHTML(b.innerHTML().replace(d[c],""));else b.removeChild(b.firstChild());var f=UE.uNode.createElement("li");f.appendChild(b),a.appendChild(f)}if(b.getAttr("class")!="MsoListParagraph")return;b.setStyle("margin",""),b.setStyle("margin-left",""),b.setAttr("class","");var g=b,h,i=b;if(b.parentNode.tagName!="li"&&(h=f(b.innerText(),b))){var j=UE.uNode.createElement(a.options.insertorderedlist.hasOwnProperty(h)?"ol":"ul");c[h]?j.setAttr("class","custom_"+h):j.setStyle("list-style-type",h);while(b&&b.parentNode.tagName!="li"&&f(b.innerText(),b))g=b.nextSibling(),g||b.parentNode.insertBefore(j,b),e(j,b,h),b=g;!j.parentNode&&b&&b.parentNode&&b.parentNode.insertBefore(j,b)}var k=i.firstChild();k&&k.type=="element"&&k.tagName=="span"&&/^\s*(&nbsp;)+\s*$/.test(k.innerText())&&k.parentNode.removeChild(k)})}}),a.addListener("contentchange",function(){i(a.document)}),a.addListener("keydown",function(b,c){function d(){c.preventDefault?c.preventDefault():c.returnValue=!1,a.fireEvent("contentchange"),a.undoManger&&a.undoManger.save()}function e(a,b){while(a&&!domUtils.isBody(a)){if(b(a))return null;if(a.nodeType==1&&/[ou]l/i.test(a.tagName))return a;a=a.parentNode}return null}var f=c.keyCode||c.which;if(f==13&&!c.shiftKey){var g=a.selection.getRange(),h=domUtils.findParent(g.startContainer,function(a){return domUtils.isBlockElm(a)},!0),i=domUtils.findParentByTagName(g.startContainer,"li",!0);if(h&&h.tagName!="PRE"&&!i){var j=h.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");/^\s*1\s*\.[^\d]/.test(j)&&(h.innerHTML=j.replace(/^\s*1\s*\./,""),g.setStartAtLast(h).collapse(!0).select(),a.__hasEnterExecCommand=!0,a.execCommand("insertorderedlist"),a.__hasEnterExecCommand=!1)}var k=a.selection.getRange(),m=e(k.startContainer,function(a){return a.tagName=="TABLE"}),n=k.collapsed?m:e(k.endContainer,function(a){return a.tagName=="TABLE"});if(m&&n&&m===n){if(!k.collapsed){m=domUtils.findParentByTagName(k.startContainer,"li",!0),n=domUtils.findParentByTagName(k.endContainer,"li",!0);if(!m||!n||m!==n){var o=k.cloneRange(),p=o.collapse(!1).createBookmark();k.deleteContents(),o.moveToBookmark(p);var i=domUtils.findParentByTagName(o.startContainer,"li",!0);l(i),o.select(),d();return}k.deleteContents(),i=domUtils.findParentByTagName(k.startContainer,"li",!0);if(i&&domUtils.isEmptyBlock(i)){v=i.previousSibling,next=i.nextSibling,s=a.document.createElement("p"),domUtils.fillNode(a.document,s),q=i.parentNode,v&&next?(k.setStart(next,0).collapse(!0).select(!0),domUtils.remove(i)):(!v&&!next||!v?q.parentNode.insertBefore(s,q):i.parentNode.parentNode.insertBefore(s,q.nextSibling),domUtils.remove(i),q.firstChild||domUtils.remove(q),k.setStart(s,0).setCursor()),d();return}}i=domUtils.findParentByTagName(k.startContainer,"li",!0);if(i){if(domUtils.isEmptyBlock(i)){p=k.createBookmark();var q=i.parentNode;i!==q.lastChild?(domUtils.breakParent(i,q),l(i)):(q.parentNode.insertBefore(i,q.nextSibling),domUtils.isEmptyNode(q)&&domUtils.remove(q));if(!dtd.$list[i.parentNode.tagName])if(!domUtils.isBlockElm(i.firstChild)){s=a.document.createElement("p"),i.parentNode.insertBefore(s,i);while(i.firstChild)s.appendChild(i.firstChild);domUtils.remove(i)}else domUtils.remove(i,!0);k.moveToBookmark(p).select()}else{var r=i.firstChild;if(!r||!domUtils.isBlockElm(r)){var s=a.document.createElement("p");!i.firstChild&&domUtils.fillNode(a.document,s);while(i.firstChild)s.appendChild(i.firstChild);i.appendChild(s),r=s}var t=a.document.createElement("span");k.insertNode(t),domUtils.breakParent(t,i);var u=t.nextSibling;r=u.firstChild,r||(s=a.document.createElement("p"),domUtils.fillNode(a.document,s),u.appendChild(s),r=s),domUtils.isEmptyNode(r)&&(r.innerHTML="",domUtils.fillNode(a.document,r)),k.setStart(r,0).collapse(!0).shrinkBoundary().select(),domUtils.remove(t);var v=u.previousSibling;v&&domUtils.isEmptyBlock(v)&&(v.innerHTML="<p></p>",domUtils.fillNode(a.document,v.firstChild))}d()}}}if(f==8){k=a.selection.getRange();if(k.collapsed&&domUtils.isStartInblock(k)){o=k.cloneRange().trimBoundary(),i=domUtils.findParentByTagName(k.startContainer,"li",!0);if(i&&domUtils.isStartInblock(o)){m=domUtils.findParentByTagName(k.startContainer,"p",!0);if(m&&m!==i.firstChild){var q=domUtils.findParentByTagName(m,["ol","ul"]);domUtils.breakParent(m,q),l(m),a.fireEvent("contentchange"),k.setStart(m,0).setCursor(!1,!0),a.fireEvent("saveScene"),domUtils.preventDefault(c);return}if(i&&(v=i.previousSibling)){if(f==46&&i.childNodes.length)return;dtd.$list[v.tagName]&&(v=v.lastChild),a.undoManger&&a.undoManger.save(),r=i.firstChild;if(domUtils.isBlockElm(r))if(domUtils.isEmptyNode(r)){v.appendChild(r),k.setStart(r,0).setCursor(!1,!0);while(i.firstChild)v.appendChild(i.firstChild)}else t=a.document.createElement("span"),k.insertNode(t),domUtils.isEmptyBlock(v)&&(v.innerHTML=""),domUtils.moveChild(i,v),k.setStartBefore(t).collapse(!0).select(!0),domUtils.remove(t);else if(domUtils.isEmptyNode(i)){var s=a.document.createElement("p");v.appendChild(s),k.setStart(s,0).setCursor()}else{k.setEnd(v,v.childNodes.length).collapse().select(!0);while(i.firstChild)v.appendChild(i.firstChild)}domUtils.remove(i),a.fireEvent("contentchange"),a.fireEvent("saveScene"),domUtils.preventDefault(c);return}if(i&&!i.previousSibling){var q=i.parentNode,p=k.createBookmark();if(domUtils.isTagNode(q.parentNode,"ol ul"))q.parentNode.insertBefore(i,q),domUtils.isEmptyNode(q)&&domUtils.remove(q);else{while(i.firstChild)q.parentNode.insertBefore(i.firstChild,q);domUtils.remove(i),domUtils.isEmptyNode(q)&&domUtils.remove(q)}k.moveToBookmark(p).setCursor(!1,!0),a.fireEvent("contentchange"),a.fireEvent("saveScene"),domUtils.preventDefault(c);return}}}}}),a.addListener("keyup",function(b,c){var d=c.keyCode||c.which;if(d==8){var e=a.selection.getRange(),f;(f=domUtils.findParentByTagName(e.startContainer,["ol","ul"],!0))&&j(f,f.tagName.toLowerCase(),h(f)||domUtils.getComputedStyle(f,"list-style-type"),!0)}}),a.addListener("tabkeydown",function(){function c(b){if(a.options.maxListLevel!=-1){var c=b.parentNode,d=0;while(/[ou]l/i.test(c.tagName))d++,c=c.parentNode;if(d>=a.options.maxListLevel)return!0}}var b=a.selection.getRange(),d=domUtils.findParentByTagName(b.startContainer,"li",!0);if(d){var f;if(!b.collapsed){a.fireEvent("saveScene"),f=b.createBookmark();for(var n=0,o,p=domUtils.findParents(d),q;q=p[n++];)if(domUtils.isTagNode(q,"ol ul")){o=q;break}var r=d;if(f.end)while(r&&!(domUtils.getPosition(r,f.end)&domUtils.POSITION_FOLLOWING)){if(c(r)){r=domUtils.getNextDomNode(r,!1,null,function(a){return a!==o});continue}var g=r.parentNode,i=a.document.createElement(g.tagName),l=utils.indexOf(e[i.tagName],h(g)||domUtils.getComputedStyle(g,"list-style-type")),s=l+1==e[i.tagName].length?0:l+1,m=e[i.tagName][s];k(i,m),g.insertBefore(i,r);while(r&&!(domUtils.getPosition(r,f.end)&domUtils.POSITION_FOLLOWING)){d=r.nextSibling,i.appendChild(r);if(!d||domUtils.isTagNode(d,"ol ul")){if(d){while(d=d.firstChild)if(d.tagName=="LI")break}else d=domUtils.getNextDomNode(r,!1,null,function(a){return a!==o});break}r=d}j(i,i.tagName.toLowerCase(),m),r=d}return a.fireEvent("contentchange"),b.moveToBookmark(f).select(),!0}if(c(d))return!0;var g=d.parentNode,i=a.document.createElement(g.tagName),l=utils.indexOf(e[i.tagName],h(g)||domUtils.getComputedStyle(g,"list-style-type"));l=l+1==e[i.tagName].length?0:l+1;var m=e[i.tagName][l];k(i,m);if(domUtils.isStartInblock(b))return a.fireEvent("saveScene"),f=b.createBookmark(),g.insertBefore(i,d),i.appendChild(d),j(i,i.tagName.toLowerCase(),m),a.fireEvent("contentchange"),b.moveToBookmark(f).select(!0),!0}}),a.commands.insertorderedlist=a.commands.insertunorderedlist={execCommand:function(a,c){c||(c=a.toLowerCase()=="insertorderedlist"?"decimal":"disc");var d=this,e=this.selection.getRange(),f=function(a){return a.nodeType==1?a.tagName.toLowerCase()!="br":!domUtils.isWhitespace(a)},g=a.toLowerCase()=="insertorderedlist"?"ol":"ul",i=d.document.createDocumentFragment();e.adjustmentBoundary().shrinkBoundary();var l=e.createBookmark(!0),n=m(d.document.getElementById(l.start)),o=0,p=m(d.document.getElementById(l.end)),q=0,r,s,t,u;if(n||p){n&&(r=n.parentNode),l.end||(p=n),p&&(s=p.parentNode);if(r===s){while(n!==p){u=n,n=n.nextSibling;if(!domUtils.isBlockElm(u.firstChild)){var v=d.document.createElement("p");while(u.firstChild)v.appendChild(u.firstChild);u.appendChild(v)}i.appendChild(u)}u=d.document.createElement("span"),r.insertBefore(u,p);if(!domUtils.isBlockElm(p.firstChild)){v=d.document.createElement("p");while(p.firstChild)v.appendChild(p.firstChild);p.appendChild(v)}i.appendChild(p),domUtils.breakParent(u,r),domUtils.isEmptyNode(u.previousSibling)&&domUtils.remove(u.previousSibling),domUtils.isEmptyNode(u.nextSibling)&&domUtils.remove(u.nextSibling);var w=h(r)||domUtils.getComputedStyle(r,"list-style-type")||(a.toLowerCase()=="insertorderedlist"?"decimal":"disc");if(r.tagName.toLowerCase()==g&&w==c){for(var x=0,y,z=d.document.createDocumentFragment();y=i.firstChild;)if(domUtils.isTagNode(y,"ol ul"))z.appendChild(y);else while(y.firstChild)z.appendChild(y.firstChild),domUtils.remove(y);u.parentNode.insertBefore(z,u)}else t=d.document.createElement(g),k(t,c),t.appendChild(i),u.parentNode.insertBefore(t,u);domUtils.remove(u),t&&j(t,g,c),e.moveToBookmark(l).select();return}if(n){while(n){u=n.nextSibling;if(domUtils.isTagNode(n,"ol ul"))i.appendChild(n);else{var A=d.document.createDocumentFragment(),B=0;while(n.firstChild)domUtils.isBlockElm(n.firstChild)&&(B=1),A.appendChild(n.firstChild);if(!B){var C=d.document.createElement("p");C.appendChild(A),i.appendChild(C)}else i.appendChild(A);domUtils.remove(n)}n=u}r.parentNode.insertBefore(i,r.nextSibling),domUtils.isEmptyNode(r)?(e.setStartBefore(r),domUtils.remove(r)):e.setStartAfter(r),o=1}if(p&&domUtils.inDoc(s,d.document)){n=s.firstChild;while(n&&n!==p){u=n.nextSibling;if(domUtils.isTagNode(n,"ol ul"))i.appendChild(n);else{A=d.document.createDocumentFragment(),B=0;while(n.firstChild)domUtils.isBlockElm(n.firstChild)&&(B=1),A.appendChild(n.firstChild);B?i.appendChild(A):(C=d.document.createElement("p"),C.appendChild(A),i.appendChild(C)),domUtils.remove(n)}n=u}var D=domUtils.createElement(d.document,"div",{tmpDiv:1});domUtils.moveChild(p,D),i.appendChild(D),domUtils.remove(p),s.parentNode.insertBefore(i,s),e.setEndBefore(s),domUtils.isEmptyNode(s)&&domUtils.remove(s),q=1}}o||e.setStartBefore(d.document.getElementById(l.start)),l.end&&!q&&e.setEndAfter(d.document.getElementById(l.end)),e.enlarge(!0,function(a){return b[a.tagName]}),i=d.document.createDocumentFragment();var E=e.createBookmark(),F=domUtils.getNextDomNode(E.start,!1,f),G=e.cloneRange(),H,I=domUtils.isBlockElm;while(F&&F!==E.end&&domUtils.getPosition(F,E.end)&domUtils.POSITION_PRECEDING)if(F.nodeType==3||dtd.li[F.tagName]){if(F.nodeType==1&&dtd.$list[F.tagName]){while(F.firstChild)i.appendChild(F.firstChild);H=domUtils.getNextDomNode(F,!1,f),domUtils.remove(F),F=H;continue}H=F,G.setStartBefore(F);while(F&&F!==E.end&&(!I(F)||domUtils.isBookmarkNode(F)))H=F,F=domUtils.getNextDomNode(F,!1,null,function(a){return!b[a.tagName]});F&&I(F)&&(u=domUtils.getNextDomNode(H,!1,f),u&&domUtils.isBookmarkNode(u)&&(F=domUtils.getNextDomNode(u,!1,f),H=u)),G.setEndAfter(H),F=domUtils.getNextDomNode(H,!1,f);var J=e.document.createElement("li");J.appendChild(G.extractContents());if(domUtils.isEmptyNode(J)){var H=e.document.createElement("p");while(J.firstChild)H.appendChild(J.firstChild);J.appendChild(H)}i.appendChild(J)}else F=domUtils.getNextDomNode(F,!0,f);e.moveToBookmark(E).collapse(!0),t=d.document.createElement(g),k(t,c),t.appendChild(i),e.insertNode(t),j(t,g,c);for(var x=0,y,K=domUtils.getElementsByTagName(t,"div");y=K[x++];)y.getAttribute("tmpDiv")&&domUtils.remove(y,!0);e.moveToBookmark(l).select()},queryCommandState:function(a){var b=a.toLowerCase()=="insertorderedlist"?"ol":"ul",c=this.selection.getStartElementPath();for(var d=0,e;e=c[d++];){if(e.nodeName=="TABLE")return 0;if(b==e.nodeName.toLowerCase())return 1}return 0},queryCommandValue:function(a){var b=a.toLowerCase()=="insertorderedlist"?"ol":"ul",c=this.selection.getStartElementPath(),d;for(var e=0,f;f=c[e++];){if(f.nodeName=="TABLE"){d=null;break}if(b==f.nodeName.toLowerCase()){d=f;break}}return d?h(d)||domUtils.getComputedStyle(d,"list-style-type"):null}}},UE.plugins.enterkey=function(){var a,b=this,c=b.options.enterTag;b.addListener("keyup",function(c,d){var e=d.keyCode||d.which;if(e==13){var f=b.selection.getRange(),g=f.startContainer,h;if(!browser.ie){if(/h\d/i.test(a)){if(browser.gecko){var i=domUtils.findParentByTagName(g,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],!0);i||(b.document.execCommand("formatBlock",!1,"<p>"),h=1)}else if(g.nodeType==1){var j=b.document.createTextNode(""),k;f.insertNode(j),k=domUtils.findParentByTagName(j,"div",!0);if(k){var l=b.document.createElement("p");while(k.firstChild)l.appendChild(k.firstChild);k.parentNode.insertBefore(l,k),domUtils.remove(k),f.setStartBefore(j).setCursor(),h=1}domUtils.remove(j)}b.undoManger&&h&&b.undoManger.save()}browser.opera&&f.select()}else b.fireEvent("saveScene",!0,!0)}}),b.addListener("keydown",function(d,e){var f=e.keyCode||e.which;if(f==13){if(b.fireEvent("beforeenterkeydown")){domUtils.preventDefault(e);return}b.fireEvent("saveScene",!0,!0),a="";var g=b.selection.getRange();if(!g.collapsed){var h=g.startContainer,i=g.endContainer,j=domUtils.findParentByTagName(h,"td",!0),k=domUtils.findParentByTagName(i,"td",!0);if(j&&k&&j!==k||!j&&k||j&&!k){e.preventDefault?e.preventDefault():e.returnValue=!1;return}}if(c=="p")browser.ie||(h=domUtils.findParentByTagName(g.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],!0),!h&&!browser.opera?(b.document.execCommand("formatBlock",!1,"<p>"),browser.gecko&&(g=b.selection.getRange(),h=domUtils.findParentByTagName(g.startContainer,"p",!0),h&&domUtils.removeDirtyAttr(h))):(a=h.tagName,h.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(h)));else{e.preventDefault?e.preventDefault():e.returnValue=!1;if(!g.collapsed){g.deleteContents(),h=g.startContainer;if(h.nodeType==1&&(h=h.childNodes[g.startOffset])){while(h.nodeType==1){if(dtd.$empty[h.tagName])return g.setStartBefore(h).setCursor(),b.undoManger&&b.undoManger.save(),!1;if(!h.firstChild){var l=g.document.createElement("br");return h.appendChild(l),g.setStart(h,0).setCursor(),b.undoManger&&b.undoManger.save(),!1}h=h.firstChild}h===g.startContainer.childNodes[g.startOffset]?(l=g.document.createElement("br"),g.insertNode(l).setCursor()):g.setStart(h,0).setCursor()}else l=g.document.createElement("br"),g.insertNode(l).setStartAfter(l).setCursor()}else{l=g.document.createElement("br"),g.insertNode(l);var m=l.parentNode;m.lastChild===l?(l.parentNode.insertBefore(l.cloneNode(!0),l),g.setStartBefore(l)):g.setStartAfter(l),g.setCursor()}}}})},UE.plugins.keystrokes=function(){var a=this,b=!0;a.addListener("keydown",function(c,d){var e=d.keyCode||d.which,f=a.selection.getRange();if(!f.collapsed&&!(d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)&&(e>=65&&e<=90||e>=48&&e<=57||e>=96&&e<=111||{13:1,8:1,46:1}[e])){var g=f.startContainer;domUtils.isFillChar(g)&&f.setStartBefore(g),g=f.endContainer,domUtils.isFillChar(g)&&f.setEndAfter(g),f.txtToElmBoundary(),f.endContainer&&f.endContainer.nodeType==1&&(g=f.endContainer.childNodes[f.endOffset],g&&domUtils.isBr(g)&&f.setEndAfter(g));if(f.startOffset==0){g=f.startContainer;if(domUtils.isBoundaryNode(g,"firstChild")){g=f.endContainer;if(f.endOffset==(g.nodeType==3?g.nodeValue.length:g.childNodes.length)&&domUtils.isBoundaryNode(g,"lastChild")){a.fireEvent("saveScene"),a.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",f.setStart(a.body.firstChild,0).setCursor(!1,!0),a._selectionChange();return}}}}if(e==keymap.Backspace){f=a.selection.getRange(),b=f.collapsed;if(a.fireEvent("delkeydown",d))return;var h,i;f.collapsed&&f.inFillChar()&&(h=f.startContainer,domUtils.isFillChar(h)?(f.setStartBefore(h).shrinkBoundary(!0).collapse(!0),domUtils.remove(h)):(h.nodeValue=h.nodeValue.replace(new RegExp("^"+domUtils.fillChar),""),f.startOffset--,f.collapse(!0).select(!0)));if(h=f.getClosedNode()){a.fireEvent("saveScene"),f.setStartBefore(h),domUtils.remove(h),f.setCursor(),a.fireEvent("saveScene"),domUtils.preventDefault(d);return}if(!browser.ie){h=domUtils.findParentByTagName(f.startContainer,"table",!0),i=domUtils.findParentByTagName(f.endContainer,"table",!0);if(h&&!i||!h&&i||h!==i){d.preventDefault();return}}}if(e==keymap.Tab){var j={ol:1,ul:1,table:1};if(a.fireEvent("tabkeydown",d)){domUtils.preventDefault(d);return}var k=a.selection.getRange();a.fireEvent("saveScene");for(var l=0,m="",n=a.options.tabSize||4,o=a.options.tabNode||"&nbsp;";l<n;l++)m+=o;var p=a.document.createElement("span");p.innerHTML=m+domUtils.fillChar;if(k.collapsed)k.insertNode(p.cloneNode(!0).firstChild).setCursor(!0);else{var q=function(a){return domUtils.isBlockElm(a)&&!j[a.tagName.toLowerCase()]};h=domUtils.findParent(k.startContainer,q,!0),i=domUtils.findParent(k.endContainer,q,!0);if(h&&i&&h===i)k.deleteContents(),k.insertNode(p.cloneNode(!0).firstChild).setCursor(!0);else{var r=k.createBookmark();k.enlarge(!0);var s=k.createBookmark(),t=domUtils.getNextDomNode(s.start,!1,q);while(t&&!(domUtils.getPosition(t,s.end)&domUtils.POSITION_FOLLOWING))t.insertBefore(p.cloneNode(!0).firstChild,t.firstChild),t=domUtils.getNextDomNode(t,!1,q);k.moveToBookmark(s).moveToBookmark(r).select()}}domUtils.preventDefault(d)}if(browser.gecko&&e==46){k=a.selection.getRange();if(k.collapsed){h=k.startContainer;if(domUtils.isEmptyBlock(h)){var u=h.parentNode;while(domUtils.getChildCount(u)==1&&!domUtils.isBody(u))h=u,u=u.parentNode;h===u.lastChild&&d.preventDefault();return}}}}),a.addListener("keyup",function(a,c){var d=c.keyCode||c.which,e,f=this;if(d==keymap.Backspace){if(f.fireEvent("delkeyup"))return;e=f.selection.getRange();if(e.collapsed){var g,h=["h1","h2","h3","h4","h5","h6"];if(g=domUtils.findParentByTagName(e.startContainer,h,!0))if(domUtils.isEmptyBlock(g)){var i=g.previousSibling;if(i&&i.nodeName!="TABLE"){domUtils.remove(g),e.setStartAtLast(i).setCursor(!1,!0);return}var j=g.nextSibling;if(j&&j.nodeName!="TABLE"){domUtils.remove(g),e.setStartAtFirst(j).setCursor(!1,!0);return}}if(domUtils.isBody(e.startContainer)){var g=domUtils.createElement(f.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});e.insertNode(g).setStart(g,0).setCursor(!1,!0)}}if(!b&&(e.startContainer.nodeType==3||e.startContainer.nodeType==1&&domUtils.isEmptyBlock(e.startContainer)))if(browser.ie){var k=e.document.createElement("span");e.insertNode(k).setStartBefore(k).collapse(!0),e.select(),domUtils.remove(k)}else e.select()}})},UE.plugins.fiximgclick=function(){function b(){this.editor=null,this.resizer=null,this.cover=null,this.doc=document,this.prePos={x:0,y:0},this.startPos={x:0,y:0}}var a=!1;return!function(){var c=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];b.prototype={init:function(a){var b=this;b.editor=a,b.startPos=this.prePos={x:0,y:0},b.dragId=-1;var c=[],d=b.cover=document.createElement("div"),e=b.resizer=document.createElement("div");d.id=b.editor.ui.id+"_imagescale_cover",d.style.cssText="position:absolute;display:none;z-index:"+b.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;",domUtils.on(d,"mousedown click",function(){b.hide()});for(i=0;i<8;i++)c.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');e.id=b.editor.ui.id+"_imagescale",e.className="edui-editor-imagescale",e.innerHTML=c.join(""),e.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+b.editor.options.zIndex+";",b.editor.ui.getDom().appendChild(d),b.editor.ui.getDom().appendChild(e),b.initStyle(),b.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var a=this;a.startPos.x=a.startPos.y=0,a.isDraging=!1},_eventHandler:function(b){var c=this;switch(b.type){case"mousedown":var d=b.target||b.srcElement,d;d.className.indexOf("edui-editor-imagescale-hand")!=-1&&c.dragId==-1&&(c.dragId=d.className.slice(-1),c.startPos.x=c.prePos.x=b.clientX,c.startPos.y=c.prePos.y=b.clientY,domUtils.on(c.doc,"mousemove",c.proxy(c._eventHandler,c)));break;case"mousemove":c.dragId!=-1&&(c.updateContainerStyle(c.dragId,{x:b.clientX-c.prePos.x,y:b.clientY-c.prePos.y}),c.prePos.x=b.clientX,c.prePos.y=b.clientY,a=!0,c.updateTargetElement());break;case"mouseup":c.dragId!=-1&&(c.updateContainerStyle(c.dragId,{x:b.clientX-c.prePos.x,y:b.clientY-c.prePos.y}),c.updateTargetElement(),c.target.parentNode&&c.attachTo(c.target),c.dragId=-1),domUtils.un(c.doc,"mousemove",c.proxy(c._eventHandler,c)),a&&(a=!1,c.editor.fireEvent("contentchange"));break;default:}},updateTargetElement:function(){var a=this;domUtils.setStyles(a.target,{width:a.resizer.style.width,height:a.resizer.style.height}),a.target.width=parseInt(a.resizer.style.width),a.target.height=parseInt(a.resizer.style.height),a.attachTo(a.target)},updateContainerStyle:function(a,b){var d=this,e=d.resizer,f;c[a][0]!=0&&(f=parseInt(e.style.left)+b.x,e.style.left=d._validScaledProp("left",f)+"px"),c[a][1]!=0&&(f=parseInt(e.style.top)+b.y,e.style.top=d._validScaledProp("top",f)+"px"),c[a][2]!=0&&(f=e.clientWidth+c[a][2]*b.x,e.style.width=d._validScaledProp("width",f)+"px"),c[a][3]!=0&&(f=e.clientHeight+c[a][3]*b.y,e.style.height=d._validScaledProp("height",f)+"px")},_validScaledProp:function(a,b){var c=this.resizer,d=document;b=isNaN(b)?0:b;switch(a){case"left":return b<0?0:b+c.clientWidth>d.clientWidth?d.clientWidth-c.clientWidth:b;case"top":return b<0?0:b+c.clientHeight>d.clientHeight?d.clientHeight-c.clientHeight:b;case"width":return b<=0?1:b+c.offsetLeft>d.clientWidth?d.clientWidth-c.offsetLeft:b;case"height":return b<=0?1:b+c.offsetTop>d.clientHeight?d.clientHeight-c.offsetTop:b}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var a=this,b=domUtils.getXY(a.editor.ui.getDom()),c=domUtils.getXY(a.editor.iframe);domUtils.setStyles(a.cover,{width:a.editor.iframe.offsetWidth+"px",height:a.editor.iframe.offsetHeight+"px",top:c.y-b.y+"px",left:c.x-b.x+"px",position:"absolute",display:""})},show:function(a){var b=this;b.resizer.style.display="block",a&&b.attachTo(a),domUtils.on(this.resizer,"mousedown",b.proxy(b._eventHandler,b)),domUtils.on(b.doc,"mouseup",b.proxy(b._eventHandler,b)),b.showCover(),b.editor.fireEvent("afterscaleshow",b),b.editor.fireEvent("saveScene")},hide:function(){var a=this;a.hideCover(),a.resizer.style.display="none",domUtils.un(a.resizer,"mousedown",a.proxy(a._eventHandler,a)),domUtils.un(a.doc,"mouseup",a.proxy(a._eventHandler,a)),a.editor.fireEvent("afterscalehide",a)},proxy:function(a,b){return function(c){return a.apply(b||this,arguments)}},attachTo:function(a){var b=this,c=b.target=a,d=this.resizer,e=domUtils.getXY(c),f=domUtils.getXY(b.editor.iframe),g=domUtils.getXY(d.parentNode);domUtils.setStyles(d,{width:c.width+"px",height:c.height+"px",left:f.x+e.x-b.editor.document.body.scrollLeft-g.x-parseInt(d.style.borderLeftWidth)+"px",top:f.y+e.y-b.editor.document.body.scrollTop-g.y-parseInt(d.style.borderTopWidth)+"px"})}}}(),function(){var a=this,c;a.setOpt("imageScaleEnabled",!0),!browser.ie&&a.options.imageScaleEnabled&&a.addListener("click",function(d,e){var f=a.selection.getRange(),g=f.getClosedNode();if(g&&g.tagName=="IMG"&&a.body.contentEditable!="false"){if(g.className.indexOf("edui-faked-music")!=-1||g.getAttribute("anchorname")||domUtils.hasClass(g,"loadingclass")||domUtils.hasClass(g,"loaderrorclass"))return;if(!c){c=new b,c.init(a),a.ui.getDom().appendChild(c.resizer);var h=function(b){c.hide(),c.target&&a.selection.getRange().selectNode(c.target).select()},i=function(a){var b=a.target||a.srcElement;b&&(b.className===undefined||b.className.indexOf("edui-editor-imagescale")==-1)&&h(a)},j;a.addListener("afterscaleshow",function(b){a.addListener("beforekeydown",h),a.addListener("beforemousedown",i),domUtils.on(document,"keydown",h),domUtils.on(document,"mousedown",i),a.selection.getNative().removeAllRanges()}),a.addListener("afterscalehide",function(b){a.removeListener("beforekeydown",h),a.removeListener("beforemousedown",i),domUtils.un(document,"keydown",h),domUtils.un(document,"mousedown",i);var d=c.target;d.parentNode&&a.selection.getRange().selectNode(d).select()}),domUtils.on(c.resizer,"mousedown",function(b){a.selection.getNative().removeAllRanges();var d=b.target||b.srcElement;d&&d.className.indexOf("edui-editor-imagescale-hand")==-1&&(j=setTimeout(function(){c.hide(),c.target&&a.selection.getRange().selectNode(d).select()},200))}),domUtils.on(c.resizer,"mouseup",function(a){var b=a.target||a.srcElement;b&&b.className.indexOf("edui-editor-imagescale-hand")==-1&&clearTimeout(j)})}c.show(g)}else c&&c.resizer.style.display!="none"&&c.hide()}),browser.webkit&&a.addListener("click",function(b,c){if(c.target.tagName=="IMG"&&a.body.contentEditable!="false"){var d=new dom.Range(a.document);d.selectNode(c.target).select()}})}}(),UE.plugins.basestyle=function(){var a={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},b=function(a,b){return domUtils.filterNodeList(a.selection.getStartElementPath(),b)},c=this;c.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"}),c.addInputRule(function(a){utils.each(a.getNodesByTagName("b i"),function(a){switch(a.tagName){case"b":a.tagName="strong";break;case"i":a.tagName="em"}})});for(var d in a)!function(a,d){c.commands[a]={execCommand:function(a){var e=c.selection.getRange(),f=b(this,d);if(e.collapsed){if(f){var g=c.document.createTextNode("");e.insertNode(g).removeInlineStyle(d),e.setStartBefore(g),domUtils.remove(g)}else{var h=e.document.createElement(d[0]);if(a=="superscript"||a=="subscript")g=c.document.createTextNode(""),e.insertNode(g).removeInlineStyle(["sub","sup"]).setStartBefore(g).collapse(!0);e.insertNode(h).setStart(h,0)}e.collapse(!0)}else(a=="superscript"||a=="subscript")&&(!f||f.tagName.toLowerCase()!=a)&&e.removeInlineStyle(["sub","sup"]),f?e.removeInlineStyle(d):e.applyInlineStyle(d[0]);e.select()},queryCommandState:function(){return b(this,d)?1:0}}}(d,a[d])},UE.plugin.register("simpleupload",function(){function d(){var d=c.offsetWidth||20,e=c.offsetHeight||20,f=document.createElement("iframe"),g="display:block;width:"+d+"px;height:"+e+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(f,"load",function(){var c=(+(new Date)).toString(36),i,j,k;j=f.contentDocument||f.contentWindow.document,k=j.body,i=j.createElement("div"),i.innerHTML='<form id="edui_form_'+c+'" target="edui_iframe_'+c+'" method="POST" enctype="multipart/form-data" action="'+a.getOpt("serverUrl")+'" '+'style="'+g+'">'+'<input id="edui_input_'+c+'" type="file" accept="image/*" name="'+a.options.imageFieldName+'" '+'style="'+g+'">'+"</form>"+'<iframe id="edui_iframe_'+c+'" name="edui_iframe_'+c+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>',i.className="edui-"+a.options.theme,i.id=a.ui.id+"_iframeupload",k.style.cssText=g,k.style.width=d+"px",k.style.height=e+"px",k.appendChild(i),k.parentNode&&(k.parentNode.style.width=d+"px",k.parentNode.style.height=d+"px");var l=j.getElementById("edui_form_"+c),m=j.getElementById("edui_input_"+c),n=j.getElementById("edui_iframe_"+c);domUtils.on(m,"change",function(){function f(){try{var c,d,e,h=(n.contentDocument||n.contentWindow.document).body,i=h.innerText||h.textContent||"";d=(new Function("return "+i))(),c=a.options.imageUrlPrefix+d.url,d.state=="SUCCESS"&&d.url?(e=a.document.getElementById(b),e.setAttribute("src",c),e.setAttribute("_src",c),e.setAttribute("title",d.title||""),e.setAttribute("alt",d.original||""),e.removeAttribute("id"),domUtils.removeClasses(e,"loadingclass")):g&&g(d.state)}catch(j){g&&g(a.getLang("simpleupload.loadError"))}l.reset(),domUtils.un(n,"load",f)}function g(c){if(b){var d=a.document.getElementById(b);d&&domUtils.remove(d),a.fireEvent("showmessage",{id:b,content:c,type:"error",timeout:4e3})}}if(!m.value)return;var b="loading_"+(+(new Date)).toString(36),c=utils.serializeParam(a.queryCommandValue("serverparam"))||"",d=a.getActionUrl(a.getOpt("imageActionName")),e=a.getOpt("imageAllowFiles");a.focus(),a.execCommand("inserthtml",'<img class="loadingclass" id="'+b+'" src="'+a.options.themePath+a.options.theme+'/images/spacer.gif" title="'+(a.getLang("simpleupload.loading")||"")+'" >');if(!a.getOpt("imageActionName")){errorHandler(a.getLang("autoupload.errorLoadConfig"));return}var h=m.value,i=h?h.substr(h.lastIndexOf(".")):"";if(!i||e&&(e.join("")+".").indexOf(i.toLowerCase()+".")==-1){g(a.getLang("simpleupload.exceedTypeError"));return}domUtils.on(n,"load",f),l.action=utils.formatUrl(d+(d.indexOf("?")==-1?"?":"&")+c),l.submit()});var o;a.addListener("selectionchange",function(){clearTimeout(o),o=setTimeout(function(){var b=a.queryCommandState("simpleupload");b==-1?m.disabled="disabled":m.disabled=!1},400)}),b=!0}),f.style.cssText=g,c.appendChild(f)}var a=this,b=!1,c;return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n"+".loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;"+"}",this.document)},simpleuploadbtnready:function(b,e){c=e,a.afterConfigReady(d)}},outputRule:function(a){utils.each(a.getNodesByTagName("img"),function(a){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(a.getAttr("class"))&&a.parentNode.removeChild(a)})},commands:{simpleupload:{queryCommandState:function(){return b?0:-1}}}}}),UE.plugin.register("serverparam",function(){var a=this,b={};return{commands:{serverparam:{execCommand:function(a,c,d){c===undefined||c===null?b={}:utils.isString(c)?d===undefined||d===null?delete b[c]:b[c]=d:utils.isObject(c)?utils.extend(b,c,!0):utils.isFunction(c)&&utils.extend(b,c(),!0)},queryCommandValue:function(){return b||{}}}}}});var baidu=baidu||{};baidu.editor=baidu.editor||{},UE.ui=baidu.editor.ui={},!function(){function h(){var a=document.getElementById("edui_fixedlayer");g.setViewportOffset(a,{left:0,top:0})}function i(a){b.on(window,"scroll",h),b.on(window,"resize",baidu.editor.utils.defer(h,0,!0))}var a=baidu.editor.browser,b=baidu.editor.dom.domUtils,c="$EDITORUI",d=window[c]={},e="ID"+c,f=0,g=baidu.editor.ui.uiUtils={uid:function(a){return a?a[e]||(a[e]=++f):++f},hook:function(a,b){var c;return a&&a._callbacks?c=a:(c=function(){var b;a&&(b=a.apply(this,arguments));var d=c._callbacks,e=d.length;while(e--){var f=d[e].apply(this,arguments);b===undefined&&(b=f)}return b},c._callbacks=[]),c._callbacks.push(b),c},createElementByHtml:function(a){var b=document.createElement("div");return b.innerHTML=a,b=b.firstChild,b.parentNode.removeChild(b),b},getViewportElement:function(){return a.ie&&a.quirks?document.body:document.documentElement},getClientRect:function(a){var c;try{c=a.getBoundingClientRect()}catch(d){c={left:0,top:0,height:0,width:0}}var e={left:Math.round(c.left),top:Math.round(c.top),height:Math.round(c.bottom-c.top),width:Math.round(c.right-c.left)},f;while((f=a.ownerDocument)!==document&&(a=b.getWindow(f).frameElement))c=a.getBoundingClientRect(),e.left+=c.left,e.top+=c.top;return e.bottom=e.top+e.height,e.right=e.left+e.width,e},getViewportRect:function(){var a=g.getViewportElement(),b=(window.innerWidth||a.clientWidth)|0,c=(window.innerHeight||a.clientHeight)|0;return{left:0,top:0,height:c,width:b,bottom:c,right:b}},setViewportOffset:function(a,c){var d,e=g.getFixedLayer();a.parentNode===e?(a.style.left=c.left+"px",a.style.top=c.top+"px"):b.setViewportOffset(a,c)},getEventOffset:function(a){var b=a.target||a.srcElement,c=g.getClientRect(b),d=g.getViewportOffsetByEvent(a);return{left:d.left-c.left,top:d.top-c.top}},getViewportOffsetByEvent:function(a){var c=a.target||a.srcElement,d=b.getWindow(c).frameElement,e={left:a.clientX,top:a.clientY};if(d&&c.ownerDocument!==document){var f=g.getClientRect(d);e.left+=f.left,e.top+=f.top}return e},setGlobal:function(a,b){return d[a]=b,c+'["'+a+'"]'},unsetGlobal:function(a){delete d[a]},copyAttributes:function(c,d){var e=d.attributes,f=e.length;while(f--){var g=e[f];g.nodeName!="style"&&g.nodeName!="class"&&(!a.ie||g.specified)&&c.setAttribute(g.nodeName,g.nodeValue)}d.className&&b.addClass(c,d.className),d.style.cssText&&(c.style.cssText+=";"+d.style.cssText)},removeStyle:function(a,b){if(a.style.removeProperty)a.style.removeProperty(b);else{if(!a.style.removeAttribute)throw"";a.style.removeAttribute(b)}},contains:function(a,b){return a&&b&&(a===b?!1:a.contains?a.contains(b):a.compareDocumentPosition(b)&16)},startDrag:function(a,b,c){function f(a){var c=a.clientX-d,f=a.clientY-e;b.ondragmove(c,f,a),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}var c=c||document,d=a.clientX,e=a.clientY;if(c.addEventListener){function g(a){c.removeEventListener("mousemove",f,!0),c.removeEventListener("mouseup",g,!0),window.removeEventListener("mouseup",g,!0),b.ondragstop()}c.addEventListener("mousemove",f,!0),c.addEventListener("mouseup",g,!0),window.addEventListener("mouseup",g,!0),a.preventDefault()}else{var h=a.srcElement;h.setCapture();function i(){h.releaseCapture(),h.detachEvent("onmousemove",f),h.detachEvent("onmouseup",i),h.detachEvent("onlosecaptrue",i),b.ondragstop()}h.attachEvent("onmousemove",f),h.attachEvent("onmouseup",i),h.attachEvent("onlosecaptrue",i),a.returnValue=!1}b.ondragstart()},getFixedLayer:function(){var b=document.getElementById("edui_fixedlayer");return b==null&&(b=document.createElement("div"),b.id="edui_fixedlayer",document.body.appendChild(b),a.ie&&a.version<=8?(b.style.position="absolute",i(),setTimeout(h)):b.style.position="fixed",b.style.left="0",b.style.top="0",b.style.width="0",b.style.height="0"),b},makeUnselectable:function(b){if(a.opera||a.ie&&a.version<9){b.unselectable="on";if(b.hasChildNodes())for(var c=0;c<b.childNodes.length;c++)b.childNodes[c].nodeType==1&&g.makeUnselectable(b.childNodes[c])}else b.style.MozUserSelect!==undefined?b.style.MozUserSelect="none":b.style.WebkitUserSelect!==undefined?b.style.WebkitUserSelect="none":b.style.KhtmlUserSelect!==undefined&&(b.style.KhtmlUserSelect="none")}}}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.EventBase,d=baidu.editor.ui.UIBase=function(){};d.prototype={className:"",uiName:"",initOptions:function(a){var c=this;for(var d in a)c[d]=a[d];this.id=this.id||"edui"+b.uid()},initUIBase:function(){this._globalKey=a.unhtml(b.setGlobal(this.id,this))},render:function(a){var c=this.renderHtml(),d=b.createElementByHtml(c),e=domUtils.getElementsByTagName(d,"*"),f="edui-"+(this.theme||this.editor.options.theme),g=document.getElementById("edui_fixedlayer");for(var h=0,i;i=e[h++];)domUtils.addClass(i,f);domUtils.addClass(d,f),g&&(g.className="",domUtils.addClass(g,f));var j=this.getDom();j!=null?(j.parentNode.replaceChild(d,j),b.copyAttributes(d,j)):(typeof a=="string"&&(a=document.getElementById(a)),a=a||b.getFixedLayer(),domUtils.addClass(a,f),a.appendChild(d)),this.postRender()},getDom:function(a){return a?document.getElementById(this.id+"_"+a):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(a){var b="edui-"+this.uiName;return a.replace(/##/g,this.id).replace(/%%-/g,this.uiName?b+"-":"").replace(/%%/g,(this.uiName?b:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var a=this.getDom();a&&baidu.editor.dom.domUtils.remove(a),b.unsetGlobal(this.id)}},a.inherits(d,c)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.UIBase,c=baidu.editor.ui.Separator=function(a){this.initOptions(a),this.initSeparator()};c.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},a.inherits(c,b)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.dom.domUtils,c=baidu.editor.ui.UIBase,d=baidu.editor.ui.uiUtils,e=baidu.editor.ui.Mask=function(a){this.initOptions(a),this.initUIBase()};e.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var a=this;b.on(window,"resize",function(){setTimeout(function(){a.isHidden()||a._fill()})})},show:function(a){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=a},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return!1},_onClick:function(a,b){this.fireEvent("click",a,b)},_fill:function(){var a=this.getDom(),b=d.getViewportRect();a.style.width=b.width+"px",a.style.height=b.height+"px"}},a.inherits(e,c)}(),!function(){function g(a,b){for(var c=0;c<f.length;c++){var d=f[c];if(!d.isHidden()&&d.queryAutoHide(b)!==!1){if(a&&/scroll/gi.test(a.type)&&d.className=="edui-wordpastepop")return;d.hide()}}f.length&&d.editor.fireEvent("afterhidepop")}var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.dom.domUtils,d=baidu.editor.ui.UIBase,e=baidu.editor.ui.Popup=function(a){this.initOptions(a),this.initPopup()},f=[];e.postHide=g;var h=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];e.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),f.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div>"+" </div>"+"</div>"},getContentHtmlTpl:function(){return this.content?typeof this.content=="string"?this.content:this.content.renderHtml():""},_UIBase_postRender:d.prototype.postRender,postRender:function(){this.content instanceof d&&this.content.postRender();if(this.captureWheel&&!this.captured){this.captured=!0;var a=(document.documentElement.clientHeight||document.body.clientHeight)-80,e=this.getDom().offsetHeight,f=b.getClientRect(this.combox.getDom()).top,g=this.getDom("content"),h=this.getDom("body").getElementsByTagName("iframe"),i=this;h.length&&(h=h[0]);while(f+e>a)e-=30;g.style.height=e+"px",h&&(h.style.height=e+"px"),window.XMLHttpRequest?c.on(g,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,a.wheelDelta?g.scrollTop-=a.wheelDelta/120*60:g.scrollTop-=a.detail/-3*60}):c.on(this.getDom(),"mousewheel",function(a){a.returnValue=!1,i.getDom("content").scrollTop-=a.wheelDelta/120*60})}this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var a=this.getDom("content");return b.getClientRect(a)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var a=this.getDom("body");a.style.width="",a.style.height="";var b=this.mesureSize();if(this.captureWheel){a.style.width=-(-20-b.width)+"px";var c=parseInt(this.getDom("content").style.height,10);!window.isNaN(c)&&(b.height=c)}else a.style.width=b.width+"px";return a.style.height=b.height+"px",this.__size=b,this.captureWheel&&(this.getDom("content").style.overflow="auto"),b},showAnchor:function(a,c){this.showAnchorRect(b.getClientRect(a),c)},showAnchorRect:function(a,d,e){this._doAutoRender();var f=b.getViewportRect();this.getDom().style.visibility="hidden",this._show();var g=this.fitSize(),i,j,k,l;d?(i=this.canSideLeft&&a.right+g.width>f.right&&a.left>g.width,j=this.canSideUp&&a.top+g.height>f.bottom&&a.bottom>g.height,k=i?a.left-g.width:a.right,l=j?a.bottom-g.height:a.top):(i=this.canSideLeft&&a.right+g.width>f.right&&a.left>g.width,j=this.canSideUp&&a.top+g.height>f.bottom&&a.bottom>g.height,k=i?a.right-g.width:a.left,l=j?a.top-g.height:a.bottom);var m=this.getDom();b.setViewportOffset(m,{left:k,top:l}),c.removeClasses(m,h),m.className+=" "+h[(j?1:0)*2+(i?1:0)],this.editor&&(m.style.zIndex=this.editor.container.style.zIndex*1+10,baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=m.style.zIndex-1),this.getDom().style.visibility="visible"},showAt:function(a){var b=a.left,c=a.top,d={left:b,top:c,right:b,bottom:c,height:0,width:0};this.showAnchorRect(d,!1,!0)},_show:function(){if(this._hidden){var a=this.getDom();a.style.display="",this._hidden=!1,this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(a){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,a||this.fireEvent("hide"))},queryAutoHide:function(a){return!a||!b.contains(this.getDom(),a)}},a.inherits(e,d),c.on(document,"mousedown",function(a){var b=a.target||a.srcElement;g(a,b)}),c.on(window,"scroll",function(a,b){g(a,b)})}(),!function(){function e(a,b){var c='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+a+"</div>"+"</div>"+'<table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0">'+'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+b.getLang("themeColor")+"</td> </tr>"+'<tr class="edui-colorpicker-tablefirstrow" >';for(var e=0;e<d.length;e++)e&&e%10===0&&(c+="</tr>"+(e==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+b.getLang("standardColor")+"</td></tr>":"")+"<tr"+(e==60?' class="edui-colorpicker-tablefirstrow"':"")+">"),c+=e<70?'<td style="padding: 0 2px;"><a hidefocus title="'+d[e]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell"'+' data-color="#'+d[e]+'"'+' style="background-color:#'+d[e]+";border:solid #ccc;"+(e<10||e>=60?"border-width:1px;":e>=10&&e<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"'+"></a></td>":"";return c+="</tr></table></div>",c}var a=baidu.editor.utils,b=baidu.editor.ui.UIBase,c=baidu.editor.ui.ColorPicker=function(a){this.initOptions(a),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};c.prototype={getHtmlTpl:function(){return e(this.noColorText,this.editor)},_onTableClick:function(a){var b=a.target||a.srcElement,c=b.getAttribute("data-color");c&&this.fireEvent("pickcolor",c)},_onTableOver:function(a){var b=a.target||a.srcElement,c=b.getAttribute("data-color");c&&(this.getDom("preview").style.backgroundColor=c)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},a.inherits(c,b);var d="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,".split(",")}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.ui.UIBase,d=baidu.editor.ui.TablePicker=function(a){this.initOptions(a),this.initTablePicker()};d.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var a=this;return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:c.prototype.render,render:function(a){this._UIBase_render(a),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(a,b){var c=this.getDom("overlay").style,d=this.lengthOfCellSide;c.width=a*d+"px",c.height=b*d+"px";var e=this.getDom("label");e.innerHTML=a+this.editor.getLang("t_col")+" x "+b+this.editor.getLang("t_row"),this.numCols=a,this.numRows=b},_onMouseOver:function(a,c){var d=a.relatedTarget||a.fromElement;!b.contains(c,d)&&c!==d&&(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(a,c){var d=a.relatedTarget||a.toElement;!b.contains(c,d)&&c!==d&&(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(a,c){var d=this.getDom("overlay").style,e=b.getEventOffset(a),f=this.lengthOfCellSide,g=Math.ceil(e.left/f),h=Math.ceil(e.top/f);this._track(g,h)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}},a.inherits(d,c)}(),!function(){var a=baidu.editor.browser,b=baidu.editor.dom.domUtils,c=baidu.editor.ui.uiUtils,d='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(a.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');baidu.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var a=this._Stateful_dGetHtmlTpl();return a.replace(/stateful/g,function(){return d})},Stateful_onMouseEnter:function(a,b){this.target=b;if(!this.isDisabled()||this.alwalysHoverable)this.addState("hover"),this.fireEvent("over")},Stateful_onMouseLeave:function(a,b){if(!this.isDisabled()||this.alwalysHoverable)this.removeState("hover"),this.removeState("active"),this.fireEvent("out")},Stateful_onMouseOver:function(a,b){var d=a.relatedTarget;!c.contains(b,d)&&b!==d&&this.Stateful_onMouseEnter(a,b)},Stateful_onMouseOut:function(a,b){var d=a.relatedTarget;!c.contains(b,d)&&b!==d&&this.Stateful_onMouseLeave(a,b)},Stateful_onMouseDown:function(a,b){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(a,b){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(a){return b.hasClass(this.getStateDom(),"edui-state-"+a)},addState:function(a){this.hasState(a)||(this.getStateDom().className+=" edui-state-"+a)},removeState:function(a){this.hasState(a)&&b.removeClasses(this.getStateDom(),["edui-state-"+a])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(a){!this.isDisabled()&&a?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(a){a?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.UIBase,c=baidu.editor.ui.Stateful,d=baidu.editor.ui.Button=function(a){if(a.name){var b=a.name,c=a.cssRules;a.className||(a.className="edui-for-"+b),a.cssRules=".edui-default  .edui-for-"+b+" .edui-icon {"+c+"}"}this.initOptions(a),this.initButton()};d.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&a.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div>"+"</div>"+"</div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(a){var b=a.target||a.srcElement,c=b&&b.tagName&&b.tagName.toLowerCase();if(c=="input"||c=="object"||c=="object")return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(a){var b=this.getDom("label");b.innerHTML=a}},a.inherits(d,b),a.extend(d.prototype,c)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.dom.domUtils,d=baidu.editor.ui.UIBase,e=baidu.editor.ui.Stateful,f=baidu.editor.ui.SplitButton=function(a){this.initOptions(a),this.initSplitButton()};f.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase(),this.Stateful_init();var a=this;if(this.popup!=null){var b=this.popup;this.popup=null,this.setPopup(b)}},_UIBase_postRender:d.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(c){if(this.popup===c)return;this.popup!=null&&this.popup.dispose(),c.addListener("show",a.bind(this._onPopupShow,this)),c.addListener("hide",a.bind(this._onPopupHide,this)),c.addListener("postrender",a.bind(function(){c.getDom("body").appendChild(b.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(b.getClientRect(this.getDom()).width+20)+'px"></div>')),c.getDom().className+=" "+this.className},this)),this.popup=c},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body">'+'<div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);">'+'<div class="edui-box edui-icon"></div>'+"</div>"+'<div class="edui-box edui-splitborder"></div>'+'<div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div>'+"</div></div></div>"},showPopup:function(){var a=b.getClientRect(this.getDom());a.top-=this.popup.SHADOW_RADIUS,a.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(a)},_onArrowClick:function(a,b){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},a.inherits(f,d),a.extend(f.prototype,e,!0)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.ui.ColorPicker,d=baidu.editor.ui.Popup,e=baidu.editor.ui.SplitButton,f=baidu.editor.ui.ColorButton=function(a){this.initOptions(a),this.initColorButton()};f.prototype={initColorButton:function(){var a=this;this.popup=new d({content:new c({noColorText:a.editor.getLang("clearColor"),editor:a.editor,onpickcolor:function(b,c){a._onPickColor(c)},onpicknocolor:function(b,c){a._onPickNoColor(c)}}),editor:a.editor}),this.initSplitButton()},_SplitButton_postRender:e.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(b.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton"},setColor:function(a){this.getDom("colorlump").style.backgroundColor=a,this.color=a},_onPickColor:function(a){this.fireEvent("pickcolor",a)!==!1&&(this.setColor(a),this.popup.hide())},_onPickNoColor:function(a){this.fireEvent("picknocolor")!==!1&&this.popup.hide()}},a.inherits(f,e)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.Popup,c=baidu.editor.ui.TablePicker,d=baidu.editor.ui.SplitButton,e=baidu.editor.ui.TableButton=function(a){this.initOptions(a),this.initTableButton()};e.prototype={initTableButton:function(){var a=this;this.popup=new b({content:new c({editor:a.editor,onpicktable:function(b,c,d){a._onPickTable(c,d)}}),editor:a.editor}),this.initSplitButton()},_onPickTable:function(a,b){this.fireEvent("picktable",a,b)!==!1&&this.popup.hide()}},a.inherits(e,d)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.UIBase,c=baidu.editor.ui.AutoTypeSetPicker=function(a){this.initOptions(a),this.initAutoTypeSetPicker()};c.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var a=this.editor,b=a.options.autotypeset,c=a.getLang("autoTypeSet"),d="textAlignValue"+a.uid,e="imageBlockLineValue"+a.uid,f="symbolConverValue"+a.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(b.mergeEmptyline?"checked":"")+">"+c.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(b.removeEmptyline?"checked":"")+">"+c.delLine+"</td></tr>"+'<tr><td nowrap><input type="checkbox" name="removeClass" '+(b.removeClass?"checked":"")+">"+c.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(b.indent?"checked":"")+">"+c.indent+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="textAlign" '+(b.textAlign?"checked":"")+">"+c.alignment+"</td>"+'<td colspan="2" id="'+d+'">'+'<input type="radio" name="'+d+'" value="left" '+(b.textAlign&&b["textAlign"]=="left"?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="'+d+'" value="center" '+(b.textAlign&&b["textAlign"]=="center"?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="'+d+'" value="right" '+(b.textAlign&&b["textAlign"]=="right"?"checked":"")+">"+a.getLang("justifyright")+"</td>"+"</tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="imageBlockLine" '+(b.imageBlockLine?"checked":"")+">"+c.imageFloat+"</td>"+'<td nowrap id="'+e+'">'+'<input type="radio" name="'+e+'" value="none" '+(b.imageBlockLine&&b["imageBlockLine"]=="none"?"checked":"")+">"+a.getLang("default")+'<input type="radio" name="'+e+'" value="left" '+(b.imageBlockLine&&b["imageBlockLine"]=="left"?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="'+e+'" value="center" '+(b.imageBlockLine&&b["imageBlockLine"]=="center"?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="'+e+'" value="right" '+(b.imageBlockLine&&b["imageBlockLine"]=="right"?"checked":"")+">"+a.getLang("justifyright")+"</td>"+"</tr>"+'<tr><td nowrap><input type="checkbox" name="clearFontSize" '+(b.clearFontSize?"checked":"")+">"+c.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(b.clearFontFamily?"checked":"")+">"+c.removeFontFamily+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(b.removeEmptyNode?"checked":"")+">"+c.removeHtml+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(b.pasteFilter?"checked":"")+">"+c.pasteFilter+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="symbolConver" '+(b.bdc2sb||b.tobdc?"checked":"")+">"+c.symbol+"</td>"+'<td id="'+f+'">'+'<input type="radio" name="bdc" value="bdc2sb" '+(b.bdc2sb?"checked":"")+">"+c.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(b.tobdc?"checked":"")+">"+c.tobdc+""+"</td>"+'<td nowrap align="right"><button >'+c.run+"</button></td>"+"</tr>"+"</table>"+"</div>"+"</div>"},_UIBase_render:b.prototype.render},a.inherits(c,b)}(),!function(){function f(b){var c={},d=b.getDom(),e=b.editor.uid,f=null,g=null,h=domUtils.getElementsByTagName(d,"input");for(var i=h.length-1,j;j=h[i--];){f=j.getAttribute("type");if(f=="checkbox"){g=j.getAttribute("name"),c[g]&&delete c[g];if(j.checked){var k=document.getElementById(g+"Value"+e);if(k)if(/input/gi.test(k.tagName))c[g]=k.value;else{var l=k.getElementsByTagName("input");for(var m=l.length-1,n;n=l[m--];)if(n.checked){c[g]=n.value;break}}else c[g]=!0}else c[g]=!1}else c[j.getAttribute("value")]=j.checked}var o=domUtils.getElementsByTagName(d,"select");for(var i=0,p;p=o[i++];){var q=p.getAttribute("name");c[q]=c[q]?p.value:""}a.extend(b.editor.options.autotypeset,c),b.editor.setPreferences("autotypeset",c)}var a=baidu.editor.utils,b=baidu.editor.ui.Popup,c=baidu.editor.ui.AutoTypeSetPicker,d=baidu.editor.ui.SplitButton,e=baidu.editor.ui.AutoTypeSetButton=function(a){this.initOptions(a),this.initAutoTypeSetButton()};e.prototype={initAutoTypeSetButton:function(){var a=this;this.popup=new b({content:new c({editor:a.editor}),editor:a.editor,hide:function(){!this._hidden&&this.getDom()&&(f(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var d=0;this.popup.addListener("postRenderAfter",function(){var b=this;if(d)return;var c=this.getDom(),e=c.getElementsByTagName("button")[0];e.onclick=function(){f(b),a.editor.execCommand("autotypeset"),b.hide()},domUtils.on(c,"click",function(c){var d=c.target||c.srcElement,e=a.editor.uid;if(d&&d.tagName=="INPUT"){if(d.name=="imageBlockLine"||d.name=="textAlign"||d.name=="symbolConver"){var g=d.checked,h=document.getElementById(d.name+"Value"+e),i=h.getElementsByTagName("input"),j={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"};for(var k=0;k<i.length;k++)g?i[k].value==j[d.name]&&(i[k].checked="checked"):i[k].checked=!1}if(d.name=="imageBlockLineValue"+e||d.name=="textAlignValue"+e||d.name=="bdc"){var l=d.parentNode.previousSibling.getElementsByTagName("input");l&&(l[0].checked=!0)}f(b)}}),d=1}),this.initSplitButton()}},a.inherits(e,d)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.Popup,c=baidu.editor.ui.Stateful,d=baidu.editor.ui.UIBase,e=baidu.editor.ui.CellAlignPicker=function(a){this.initOptions(a),this.initSelected(),this.initCellAlignPicker()};e.prototype={initSelected:function(){var a={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3},b=-1;this.selected&&(this.selectedIndex=a.valign[this.selected.valign]*a.count+a.align[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){var a=["left","center","right"],b=9,c=null,d=-1,e=[];for(var f=0;f<b;f++)c=this.selectedIndex===f?' class="edui-cellalign-selected" ':"",d=f%3,d===0&&e.push("<tr>"),e.push('<td index="'+f+'" '+c+' stateful><div class="edui-icon edui-'+a[d]+'"></div></td>'),d===2&&e.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+e.join("")+"</table>"+"</div>"+"</div>"},getStateDom:function(){return this.target},_onClick:function(a){var c=a.target||a.srcElement;/icon/.test(c.className)&&(this.items[c.parentNode.getAttribute("index")].onclick(),b.postHide(a))},_UIBase_render:d.prototype.render},a.inherits(e,d),a.extend(e.prototype,c,!0)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.Stateful,c=baidu.editor.ui.uiUtils,d=baidu.editor.ui.UIBase,e=baidu.editor.ui.PastePicker=function(a){this.initOptions(a),this.initPastePicker()};e.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+"</div>"+'<div class="edui-button">'+'<div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful>'+'<div class="edui-richtxticon"></div></div>'+'<div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful>'+'<div class="edui-tagicon"></div></div>'+'<div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful>'+'<div class="edui-plaintxticon"></div></div>'+"</div>"+"</div>"+"</div>"},getStateDom:function(){return this.target},format:function(a){this.editor.ui._isTransfer=!0,this.editor.fireEvent("pasteTransfer",a)},_onClick:function(a){var b=domUtils.getNextDomNode(a),d=c.getViewportRect().height,e=c.getClientRect(b);e.top+e.height>d?b.style.top=-e.height-a.offsetHeight+"px":b.style.top="",/hidden/gi.test(domUtils.getComputedStyle(b,"visibility"))?(b.style.visibility="visible",domUtils.addClass(a,"edui-state-opened")):(b.style.visibility="hidden",domUtils.removeClasses(a,"edui-state-opened"))},_UIBase_render:d.prototype.render},a.inherits(e,d),a.extend(e.prototype,b,!0)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.ui.UIBase,d=baidu.editor.ui.Toolbar=function(a){this.initOptions(a),this.initToolbar()};d.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(a,b){b===undefined?this.items.push(a):this.items.splice(b,0,a)},getHtmlTpl:function(){var a=[];for(var b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+a.join("")+"</div>"},postRender:function(){var a=this.getDom();for(var c=0;c<this.items.length;c++)this.items[c].postRender();b.makeUnselectable(a)},_onMouseDown:function(a){var b=a.target||a.srcElement,c=b&&b.tagName&&b.tagName.toLowerCase();if(c=="input"||c=="object"||c=="object")return!1}},a.inherits(d,c)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.dom.domUtils,c=baidu.editor.ui.uiUtils,d=baidu.editor.ui.UIBase,e=baidu.editor.ui.Popup,f=baidu.editor.ui.Stateful,g=baidu.editor.ui.CellAlignPicker,h=baidu.editor.ui.Menu=function(a){this.initOptions(a),this.initMenu()},i={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};h.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];b=="-"?this.items[a]=this.getSeparator():b instanceof j||(b.editor=this.editor,b.theme=this.editor.options.theme,this.items[a]=this.createItem(b))}},getSeparator:function(){return i},createItem:function(a){return a.menu=this,new j(a)},_Popup_getContentHtmlTpl:e.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(this.items.length==0)return this._Popup_getContentHtmlTpl();var a=[];for(var b=0;b<this.items.length;b++){var c=this.items[b];a[b]=c.renderHtml()}return'<div class="%%-body">'+a.join("")+"</div>"},_Popup_postRender:e.prototype.postRender,postRender:function(){var a=this;for(var d=0;d<this.items.length;d++){var e=this.items[d];e.ownerMenu=this,e.postRender()}b.on(this.getDom(),"mouseover",function(b){b=b||event;var d=b.relatedTarget||b.fromElement,e=a.getDom();!c.contains(e,d)&&e!==d&&a.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(a){if(a){if(c.contains(this.getDom(),a))return!1;for(var b=0;b<this.items.length;b++){var d=this.items[b];if(d.queryAutoHide(a)===!1)return!1}}},clearItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];clearTimeout(b._showingTimer),clearTimeout(b._closingTimer),b.subMenu&&b.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&b.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},a.inherits(h,e);var j=baidu.editor.ui.MenuItem=function(a){this.initOptions(a),this.initUIBase(),this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof h))if(a.className&&a.className.indexOf("aligntd")!=-1){var c=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment"),this.subMenu=new e({content:new g(this.subMenu),parentMenu:c,editor:c.editor,destroy:function(){this.getDom()&&b.remove(this.getDom())}}),this.subMenu.addListener("postRenderAfter",function(){b.on(this.getDom(),"mouseover",function(){c.addState("opened")})})}else this.subMenu=new h(this.subMenu)};j.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div>"+"</div>"},postRender:function(){var a=this;this.addListener("over",function(){a.ownerMenu.fireEvent("submenuover",a),a.subMenu&&a.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){a.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(a._closingTimer),a._closingTimer=null,a.addState("opened")}),this.ownerMenu.addListener("hide",function(){a.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(b,c){c!==a&&a.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(b){return b&&c.contains(a.getDom(),b)?!1:this._bakQueryAutoHide(b)}),this.getDom().style.tabIndex="-1",c.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var a=this;a.isDisabled()||(a.addState("opened"),clearTimeout(a._showingTimer),clearTimeout(a._closingTimer),a._closingTimer=null,a._showingTimer=setTimeout(function(){a.showSubMenu()},250))},delayHideSubMenu:function(){var a=this;a.isDisabled()||(a.removeState("opened"),clearTimeout(a._showingTimer),a._closingTimer||(a._closingTimer=setTimeout(function(){a.hasState("opened")||a.hideSubMenu(),a._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(a){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(a)},_onClick:function(a,b){if(this.hasState("disabled"))return;this.fireEvent("click",a,b)!==!1&&(this.subMenu?this.showSubMenu():e.postHide(a))},showSubMenu:function(){var a=c.getClientRect(this.getDom());a.right-=5,a.left+=2,a.width-=7,a.top-=4,a.bottom+=4,a.height+=8,this.subMenu.showAnchorRect(a,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},a.inherits(j,d),a.extend(j.prototype,f,!0)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.ui.Menu,d=baidu.editor.ui.SplitButton,e=baidu.editor.ui.Combox=function(a){this.initOptions(a),this.initCombox()};e.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var a=this;this.items=this.items||[];for(var b=0;b<this.items.length;b++){var d=this.items[b];d.uiName="listitem",d.index=b,d.onclick=function(){a.selectByIndex(this.index)}}this.popup=new c({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:d.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var a=b.getClientRect(this.getDom());a.top+=1,a.bottom-=1,a.height-=2,this.popup.showAnchorRect(a)},getValue:function(){return this.value},setValue:function(a){var b=this.indexByValue(a);b!=-1?(this.selectedIndex=b,this.setLabel(this.items[b].label),this.value=this.items[b].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(a)),this.value=a)},setLabel:function(a){this.getDom("button_body").innerHTML=a,this.label=a},getLabelForUnknowValue:function(a){return a},indexByValue:function(a){for(var b=0;b<this.items.length;b++)if(a==this.items[b].value)return b;return-1},getItem:function(a){return this.items[a]},selectByIndex:function(a){a<this.items.length&&this.fireEvent("select",a)!==!1&&(this.selectedIndex=a,this.value=this.items[a].value,this.setLabel(this.items[a].label))}},a.inherits(e,d)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.dom.domUtils,c=baidu.editor.ui.uiUtils,d=baidu.editor.ui.Mask,e=baidu.editor.ui.UIBase,f=baidu.editor.ui.Button,g=baidu.editor.ui.Dialog=function(b){if(b.name){var c=b.name,d=b.cssRules;b.className||(b.className="edui-for-"+c),d&&(b.cssRules=".edui-default .edui-for-"+c+" .edui-dialog-content  {"+d+"}")}this.initOptions(a.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(a,b){return b?this.onok():this.oncancel()},holdScroll:!1},b)),this.initDialog()},h,i,j;g.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var b=this,c=this.editor.options.theme;this.cssRules&&a.cssRule("edui-customize-"+this.name+"-style",this.cssRules),this.initUIBase(),this.modalMask=h||(h=new d({className:"edui-dialog-modalmask",theme:c,onclick:function(){j&&j.close(!1)}})),this.dragMask=i||(i=new d({className:"edui-dialog-dragmask",theme:c})),this.closeButton=new f({className:"edui-dialog-closebutton",title:b.closeDialog,theme:c,onclick:function(){b.close(!1)}}),this.fullscreen&&this.initResizeEvent();if(this.buttons)for(var e=0;e<this.buttons.length;e++)this.buttons[e]instanceof f||(this.buttons[e]=new f(a.extend(this.buttons[e],{editor:this.editor},!0)))},initResizeEvent:function(){var a=this;b.on(window,"resize",function(){if(a._hidden||a._hidden===undefined)return;a.__resizeTimer&&window.clearTimeout(a.__resizeTimer),a.__resizeTimer=window.setTimeout(function(){a.__resizeTimer=null;var b=a.getDom(),d=a.getDom("content"),e=UE.ui.uiUtils.getClientRect(b),f=UE.ui.uiUtils.getClientRect(d),g=c.getViewportRect();d.style.width=g.width-e.width+f.width+"px",d.style.height=g.height-e.height+f.height+"px",b.style.width=g.width+"px",b.style.height=g.height+"px",a.fireEvent("resize")},100)})},fitSize:function(){var a=this.getDom("body"),b=this.mesureSize();return a.style.width=b.width+"px",a.style.height=b.height+"px",b},safeSetOffset:function(a){var b=this,d=b.getDom(),e=c.getViewportRect(),f=c.getClientRect(d),g=a.left;g+f.width>e.right&&(g=e.right-f.width);var h=a.top;h+f.height>e.bottom&&(h=e.bottom-f.height),d.style.left=Math.max(g,0)+"px",d.style.top=Math.max(h,0)+"px"},showAtCenter:function(){var a=c.getViewportRect();if(!this.fullscreen){this.getDom().style.display="";var d=this.fitSize(),e=this.getDom("titlebar").offsetHeight|0,f=a.width/2-d.width/2,g=a.height/2-(d.height-e)/2-e,h=this.getDom();this.safeSetOffset({left:Math.max(f|0,0),top:Math.max(g|0,0)}),b.hasClass(h,"edui-state-centered")||(h.className+=" edui-state-centered")}else{var i=this.getDom(),j=this.getDom("content");i.style.display="block";var k=UE.ui.uiUtils.getClientRect(i),l=UE.ui.uiUtils.getClientRect(j);i.style.left="-100000px",j.style.width=a.width-k.width+l.width+"px",j.style.height=a.height-k.height+l.height+"px",i.style.width=a.width+"px",i.style.height=a.height+"px",i.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}this._show()},getContentHtml:function(){var a="";return typeof this.content=="string"?a=this.content:this.iframeUrl&&(a='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),a},getHtmlTpl:function(){var a="";if(this.buttons){var b=[];for(var c=0;c<this.buttons.length;c++)b[c]=this.buttons[c].renderHtml();a='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+b.join("")+"</div>"+"</div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body">'+'<div class="%%-shadow"></div>'+'<div id="##_titlebar" class="%%-titlebar">'+'<div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);">'+'<span class="%%-caption">'+(this.title||"")+"</span>"+"</div>"+this.closeButton.renderHtml()+"</div>"+'<div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+a+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var a=this;this.addListener("show",function(){a.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){a.modalMask.hide()});if(this.buttons)for(var d=0;d<this.buttons.length;d++)this.buttons[d].postRender();b.on(window,"resize",function(){setTimeout(function(){a.isHidden()||a.safeSetOffset(c.getClientRect(a.getDom()))})}),this._hide()},mesureSize:function(){var a=this.getDom("body"),b=c.getClientRect(this.getDom("content")).width,d=a.style;return d.width=b,c.getClientRect(a)},_onTitlebarMouseDown:function(a,d){if(this.draggable){var e,f=c.getViewportRect(),g=this;c.startDrag(a,{ondragstart:function(){e=c.getClientRect(g.getDom()),g.getDom("contmask").style.visibility="visible",g.dragMask.show(g.getDom().style.zIndex-1)},ondragmove:function(a,b){var c=e.left+a,d=e.top+b;g.safeSetOffset({left:c,top:d})},ondragstop:function(){g.getDom("contmask").style.visibility="hidden",b.removeClasses(g.getDom(),["edui-state-centered"]),g.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml(),this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10),this._hidden=!1,this.fireEvent("show"),baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var a=this.getDom();a.style.display="none",a.style.zIndex="",a.style.width="",a.style.height="",this._hidden=!0,this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(a){this.render(),this.open()}this.showAtCenter();if(this.iframeUrl)try{this.getDom("iframe").focus()}catch(b){}j=this},_onCloseButtonClick:function(a,b){this.close(!1)},close:function(a){if(this.fireEvent("close",a)!==!1){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide();var c=this.getDom("content"),d=this.getDom("iframe");if(c&&d){var e=d.contentDocument||d.contentWindow.document;e&&(e.body.innerHTML=""),b.remove(c)}}}},a.inherits(g,e)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.Menu,c=baidu.editor.ui.SplitButton,d=baidu.editor.ui.MenuButton=function(a){this.initOptions(a),this.initMenuButton()};d.prototype={initMenuButton:function(){var a=this;this.uiName="menubutton",this.popup=new b({items:a.items,className:a.className,editor:a.editor}),this.popup.addListener("show",function(){var b=this;for(var c=0;c<b.items.length;c++)b.items[c].removeState("checked"),b.items[c].value==a._value&&(b.items[c].addState("checked"),this.value=a._value)}),this.initSplitButton()},setValue:function(a){this._value=a}},a.inherits(d,c)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.Popup,c=baidu.editor.ui.SplitButton,d=baidu.editor.ui.MultiMenuPop=function(a){this.initOptions(a),this.initMultiMenu()};d.prototype={initMultiMenu:function(){var a=this;this.popup=new b({content:"",editor:a.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+a.id+'_iframe" src="'+a.iframeUrl+'" frameborder="0"></iframe>',a.editor.container.style.zIndex&&(this.getDom().style.zIndex=a.editor.container.style.zIndex*1+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},a.inherits(d,c)}(),!function(){function j(a){var b=a.target||a.srcElement,c=e.findParent(b,function(a){return e.hasClass(a,"edui-shortcutmenu")||e.hasClass(a,"edui-popup")},!0);if(!c)for(var d=0,g;g=f[d++];)g.hide()}var a=baidu.editor.ui,b=a.UIBase,c=a.uiUtils,d=baidu.editor.utils,e=baidu.editor.dom.domUtils,f=[],g,h=!1,i=a.ShortCutMenu=function(a){this.initOptions(a),this.initShortCutMenu()};i.postHide=j,i.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),f.push(this)},initEvent:function(){var a=this,b=a.editor.document;e.on(b,"mousemove",function(b){if(a.isHidden===!1){if(a.getSubMenuMark()||a.eventType=="contextmenu")return;var c=!0,d=a.getDom(),e=d.offsetWidth,f=d.offsetHeight,h=e/2+a.SPACE,i=f/2,j=Math.abs(b.screenX-a.left),k=Math.abs(b.screenY-a.top);clearTimeout(g),g=setTimeout(function(){k>0&&k<i?a.setOpacity(d,"1"):k>i&&k<i+70?(a.setOpacity(d,"0.5"),c=!1):k>i+70&&k<i+140&&a.hide(),c&&j>0&&j<h?a.setOpacity(d,"1"):j>h&&j<h+70?a.setOpacity(d,"0.5"):j>h+70&&j<h+140&&a.hide()})}}),browser.chrome&&e.on(b,"mouseout",function(b){var c=b.relatedTarget||b.toElement;(c==null||c.tagName=="HTML")&&a.hide()}),a.editor.addListener("afterhidepop",function(){a.isHidden||(h=!0)})},initItems:function(){if(d.isArray(this.items))for(var b=0,c=this.items.length;b<c;b++){var e=this.items[b].toLowerCase();a[e]&&(this.items[b]=new a[e](this.editor),this.items[b].className+=" edui-shortcutsubmenu ")}},setOpacity:function(a,b){browser.ie&&browser.version<9?a.style.filter="alpha(opacity = "+parseFloat(b)*100+");":a.style.opacity=b},getSubMenuMark:function(){h=!1;var a=c.getFixedLayer(),b=e.getElementsByTagName(a,"div",function(a){return e.hasClass(a,"edui-shortcutsubmenu edui-popup")});for(var d=0,f;f=b[d++];)f.style.display!="none"&&(h=!0);return h},show:function(a,b){function i(a){a.left<0&&(a.left=0),a.top<0&&(a.top=0),g.style.cssText="position:absolute;left:"+a.left+"px;top:"+a.top+"px;"}function j(a){a.tagName||(a=a.getDom()),f.left=parseInt(a.style.left),f.top=parseInt(a.style.top),f.top-=g.offsetHeight+15,i(f)}var d=this,f={},g=this.getDom(),h=c.getFixedLayer();d.eventType=a.type,g.style.cssText="display:block;left:-9999px";if(a.type=="contextmenu"&&b){var k=e.getElementsByTagName(h,"div","edui-contextmenu")[0];k?j(k):d.editor.addListener("aftershowcontextmenu",function(a,b){j(b)})}else f=c.getViewportOffsetByEvent(a),f.top-=g.offsetHeight+d.SPACE,f.left+=d.SPACE+20,i(f),d.setOpacity(g,.2);d.isHidden=!1,d.left=a.screenX+g.offsetWidth/2-d.SPACE,d.top=a.screenY-g.offsetHeight/2-d.SPACE,d.editor&&(g.style.zIndex=d.editor.container.style.zIndex*1+10,h.style.zIndex=g.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none"),this.isHidden=!0},postRender:function(){if(d.isArray(this.items))for(var a=0,b;b=this.items[a++];)b.postRender()},getHtmlTpl:function(){var a;if(d.isArray(this.items)){a=[];for(var b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();a=a.join("")}else a=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+a+"</div>"}},d.inherits(i,b),e.on(document,"mousedown",function(a){j(a)}),e.on(window,"scroll",function(a){j(a)})}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui.UIBase,c=baidu.editor.ui.Breakline=function(a){this.initOptions(a),this.initSeparator()};c.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}},a.inherits(c,b)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.dom.domUtils,c=baidu.editor.ui.UIBase,d=baidu.editor.ui.Message=function(a){this.initOptions(a),this.initMessage()};d.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">×</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(a){var b=this;a.keepshow||(clearTimeout(this.timer),b.timer=setTimeout(function(){b.hide()},a.timeout||4e3)),a.content!==undefined&&b.setContent(a.content),a.type!==undefined&&b.setType(a.type),b.show()},postRender:function(){var a=this,c=this.getDom("closer");c&&b.on(c,"click",function(){a.hide()})},setContent:function(a){this.getDom("content").innerHTML=a},setType:function(a){a=a||"info";var b=this.getDom("body");b.className=b.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+a)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var a=this.getDom("body").match(/edui-message-type-([\w-]+)/);return a?a[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var a=this.getDom();a&&(a.style.display="none",a.parentNode&&a.parentNode.removeChild(a))}},a.inherits(d,c)}(),!function(){var a=baidu.editor.utils,b=baidu.editor.ui,c=b.Dialog;b.buttons={},b.Dialog=function(a){var b=new c(a);return b.addListener("hide",function(){if(b.editor){var a=b.editor;try{if(browser.gecko){var c=a.window.scrollY,d=a.window.scrollX;a.body.focus(),a.window.scrollTo(d,c)}else a.focus()}catch(e){}}}),b};var d={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},e=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"];for(var f=0,g;g=e[f++];)g=g.toLowerCase(),b[g]=function(a){return function(c){var d=new b.Button({className:"edui-for-"+a,title:c.options.labelMap[a]||c.getLang("labelMap."+a)||"",onclick:function(){c.execCommand(a)},theme:c.options.theme,showText:!1});return b.buttons[a]=d,c.addListener("selectionchange",function(b,e,f){var g=c.queryCommandState(a);g==-1?(d.setDisabled(!0),d.setChecked(!1)):f||(d.setDisabled(!1),d.setChecked(g))}),d}}(g);b.cleardoc=function(a){var c=new b.Button({className:"edui-for-cleardoc",title:a.options.labelMap.cleardoc||a.getLang("labelMap.cleardoc")||"",theme:a.options.theme,onclick:function(){confirm(a.getLang("confirmClear"))&&a.execCommand("cleardoc")}});return b.buttons.cleardoc=c,a.addListener("selectionchange",function(){c.setDisabled(a.queryCommandState("cleardoc")==-1)}),c};var h={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var i in h)!function(a,c){for(var d=0,e;e=c[d++];)!function(c){b[a.replace("float","")+c]=function(d){var e=new b.Button({className:"edui-for-"+a.replace("float","")+c,title:d.options.labelMap[a.replace("float","")+c]||d.getLang("labelMap."+a.replace("float","")+c)||"",theme:d.options.theme,onclick:function(){d.execCommand(a,c)}});return b.buttons[a]=e,d.addListener("selectionchange",function(b,f,g){e.setDisabled(d.queryCommandState(a)==-1),e.setChecked(d.queryCommandValue(a)==c&&!g)}),e}}(e)}(i,h[i]);for(var f=0,g;g=["backcolor","forecolor"][f++];)b[g]=function(a){return function(c){var d=new b.ColorButton({className:"edui-for-"+a,color:"default",title:c.options.labelMap[a]||c.getLang("labelMap."+a)||"",editor:c,onpickcolor:function(b,d){c.execCommand(a,d)},onpicknocolor:function(){c.execCommand(a,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){c.execCommand(a,this.color)}});return b.buttons[a]=d,c.addListener("selectionchange",function(){d.setDisabled(c.queryCommandState(a)==-1)}),d}}(g);var j={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var i in j)!function(c,e){for(var f=0,g;g=e[f++];){if(browser.opera&&g==="searchreplace")continue;!function(e){b[e]=function(f,g,h){g=g||(f.options.iframeUrlMap||{})[e]||d[e],h=f.options.labelMap[e]||f.getLang("labelMap."+e)||"";var i;g&&(i=new b.Dialog(a.extend({iframeUrl:f.ui.mapUrl(g),editor:f,className:"edui-for-"+e,title:h,holdScroll:e==="insertimage",fullscreen:/charts|preview/.test(e),closeDialog:f.getLang("closeDialog")},c=="ok"?{buttons:[{className:"edui-okbutton",label:f.getLang("ok"),editor:f,onclick:function(){i.close(!0)}},{className:"edui-cancelbutton",label:f.getLang("cancel"),editor:f,onclick:function(){i.close(!1)}}]}:{})),f.ui._dialogs[e+"Dialog"]=i);var j=new b.Button({className:"edui-for-"+e,title:h,onclick:function(){if(i)switch(e){case"wordimage":var a=f.execCommand("wordimage");a&&a.length&&(i.render(),i.open());break;case"scrawl":f.queryCommandState("scrawl")!=-1&&(i.render(),i.open());break;default:i.render(),i.open()}},theme:f.options.theme,disabled:e=="scrawl"&&f.queryCommandState("scrawl")==-1||e=="charts"});return b.buttons[e]=j,f.addListener("selectionchange",function(){var a={edittable:1};if(e in a)return;var b=f.queryCommandState(e);j.getDom()&&(j.setDisabled(b==-1),j.setChecked(b))}),j}}(g.toLowerCase())}}(i,j[i]);b.snapscreen=function(a,c,e){e=a.options.labelMap.snapscreen||a.getLang("labelMap.snapscreen")||"";var f=new b.Button({className:"edui-for-snapscreen",title:e,onclick:function(){a.execCommand("snapscreen")},theme:a.options.theme});b.buttons.snapscreen=f,c=c||(a.options.iframeUrlMap||{}).snapscreen||d.snapscreen;if(c){var g=new b.Dialog({iframeUrl:a.ui.mapUrl(c),editor:a,className:"edui-for-snapscreen",title:e,buttons:[{className:"edui-okbutton",label:a.getLang("ok"),editor:a,onclick:function(){g.close(!0)}},{className:"edui-cancelbutton",label:a.getLang("cancel"),editor:a,onclick:function(){g.close(!1)}}]});g.render(),a.ui._dialogs.snapscreenDialog=g}return a.addListener("selectionchange",function(){f.setDisabled(a.queryCommandState("snapscreen")==-1)}),f},b.insertcode=function(c,d,e){d=c.options.insertcode||[],e=c.options.labelMap.insertcode||c.getLang("labelMap.insertcode")||"";var f=[];a.each(d,function(a,b){f.push({label:a,value:b,theme:c.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var g=new b.Combox({editor:c,items:f,onselect:function(a,b){c.execCommand("insertcode",this.items[b].value)},onbuttonclick:function(){this.showPopup()},title:e,initValue:e,className:"edui-for-insertcode",indexByValue:function(a){if(a)for(var b=0,c;c=this.items[b];b++)if(c.value.indexOf(a)!=-1)return b;return-1}});return b.buttons.insertcode=g,c.addListener("selectionchange",function(a,b,d){if(!d){var f=c.queryCommandState("insertcode");if(f==-1)g.setDisabled(!0);else{g.setDisabled(!1);var h=c.queryCommandValue("insertcode");if(!h){g.setValue(e);return}h&&(h=h.replace(/['"]/g,"").split(",")[0]),g.setValue(h)}}}),g},b.fontfamily=function(c,d,e){d=c.options.fontfamily||[],e=c.options.labelMap.fontfamily||c.getLang("labelMap.fontfamily")||"";if(!d.length)return;for(var f=0,g,h=[];g=d[f];f++){var i=c.getLang("fontfamily")[g.name]||"";!function(b,d){h.push({label:b,value:d,theme:c.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+a.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})}(g.label||i,g.val)}var j=new b.Combox({editor:c,items:h,onselect:function(a,b){c.execCommand("FontFamily",this.items[b].value)},onbuttonclick:function(){this.showPopup()},title:e,initValue:e,className:"edui-for-fontfamily",indexByValue:function(a){if(a)for(var b=0,c;c=this.items[b];b++)if(c.value.indexOf(a)!=-1)return b;return-1}});return b.buttons.fontfamily=j,c.addListener("selectionchange",function(a,b,d){if(!d){var e=c.queryCommandState("FontFamily");if(e==-1)j.setDisabled(!0);else{j.setDisabled(!1);var f=c.queryCommandValue("FontFamily");f&&(f=f.replace(/['"]/g,"").split(",")[0]),j.setValue(f)}}}),j},b.fontsize=function(a,c,d){d=a.options.labelMap.fontsize||a.getLang("labelMap.fontsize")||"",c=c||a.options.fontsize||[];if(!c.length)return;var e=[];for(var f=0;f<c.length;f++){var g=c[f]+"px";e.push({label:g,value:g,theme:a.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var h=new b.Combox({editor:a,items:e,title:d,initValue:d,onselect:function(b,c){a.execCommand("FontSize",this.items[c].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return b.buttons.fontsize=h,a.addListener("selectionchange",function(b,c,d){if(!d){var e=a.queryCommandState("FontSize");e==-1?h.setDisabled(!0):(h.setDisabled(!1),h.setValue(a.queryCommandValue("FontSize")))}}),h},b.paragraph=function(c,d,e){e=c.options.labelMap.paragraph||c.getLang("labelMap.paragraph")||"",d=c.options.paragraph||[];if(a.isEmptyObject(d))return;var f=[];for(var g in d)f.push({value:g,label:d[g]||c.getLang("paragraph")[g],theme:c.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var h=new b.Combox({editor:c,items:f,title:e,initValue:e,className:"edui-for-paragraph",onselect:function(a,b){c.execCommand("Paragraph",this.items[b].value)},onbuttonclick:function(){this.showPopup()}});return b.buttons.paragraph=h,c.addListener("selectionchange",function(a,b,d){if(!d){var e=c.queryCommandState("Paragraph");if(e==-1)h.setDisabled(!0);else{h.setDisabled(!1);var f=c.queryCommandValue("Paragraph"),g=h.indexByValue(f);g!=-1?h.setValue(f):h.setValue(h.initValue)}}}),h},b.customstyle=function(a){var c=a.options.customstyle||[],d=a.options.labelMap.customstyle||a.getLang("labelMap.customstyle")||"";if(!c.length)return;var e=a.getLang("customstyle");for(var f=0,g=[],h;h=c[f++];)!function(b){var c={};c.label=b.label?b.label:e[b.name],c.style=b.style,c.className=b.className,c.tag=b.tag,g.push({label:c.label,value:c,theme:a.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+c.tag+" "+(c.className?' class="'+c.className+'"':"")+(c.style?' style="'+c.style+'"':"")+">"+c.label+"</"+c.tag+">"+"</div>"}})}(h);var i=new b.Combox({editor:a,items:g,title:d,initValue:d,className:"edui-for-customstyle",onselect:function(b,c){a.execCommand("customstyle",this.items[c].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(a){for(var b=0,c;c=this.items[b++];)if(c.label==a)return b-1;return-1}});return b.buttons.customstyle=i,a.addListener("selectionchange",function(b,c,d){if(!d){var e=a.queryCommandState("customstyle");if(e==-1)i.setDisabled(!0);else{i.setDisabled(!1);var f=a.queryCommandValue("customstyle"),g=i.indexByValue(f);g!=-1?i.setValue(f):i.setValue(i.initValue)}}}),i},b.inserttable=function(a,c,d){d=a.options.labelMap.inserttable||a.getLang("labelMap.inserttable")||"";var e=new b.TableButton({editor:a,title:d,className:"edui-for-inserttable",onpicktable:function(b,c,d){a.execCommand("InsertTable",{numRows:d,numCols:c,border:1})},onbuttonclick:function(){this.showPopup()}});return b.buttons.inserttable=e,a.addListener("selectionchange",function(){e.setDisabled(a.queryCommandState("inserttable")==-1)}),e},b.lineheight=function(a){var c=a.options.lineheight||[];if(!c.length)return;for(var d=0,e,f=[];e=c[d++];)f.push({label:e,value:e,theme:a.options.theme,onclick:function(){a.execCommand("lineheight",this.value)}});var g=new b.MenuButton({editor:a,className:"edui-for-lineheight",title:a.options.labelMap.lineheight||a.getLang("labelMap.lineheight")||"",items:f,onbuttonclick:function(){var b=a.queryCommandValue("LineHeight")||this.value;a.execCommand("LineHeight",b)}});return b.buttons.lineheight=g,a.addListener("selectionchange",function(){var b=a.queryCommandState("LineHeight");if(b==-1)g.setDisabled(!0);else{g.setDisabled(!1);var c=a.queryCommandValue("LineHeight");c&&g.setValue((c+"").replace(/cm/,"")),g.setChecked(b)}}),g};var k=["top","bottom"];for(var l=0,m;m=k[l++];)!function(a){b["rowspacing"+a]=function(c){var d=c.options["rowspacing"+a]||[];if(!d.length)return null;for(var e=0,f,g=[];f=d[e++];)g.push({label:f,value:f,theme:c.options.theme,onclick:function(){c.execCommand("rowspacing",this.value,a)}});var h=new b.MenuButton({editor:c,className:"edui-for-rowspacing"+a,title:c.options.labelMap["rowspacing"+a]||c.getLang("labelMap.rowspacing"+a)||"",items:g,onbuttonclick:function(){var b=c.queryCommandValue("rowspacing",a)||this.value;c.execCommand("rowspacing",b,a)}});return b.buttons[a]=h,c.addListener("selectionchange",function(){var b=c.queryCommandState("rowspacing",a);if(b==-1)h.setDisabled(!0);else{h.setDisabled(!1);var d=c.queryCommandValue("rowspacing",a);d&&h.setValue((d+"").replace(/%/,"")),h.setChecked(b)}}),h}}(m);var n=["insertorderedlist","insertunorderedlist"];for(var o=0,p;p=n[o++];)!function(a){b[a]=function(c){var d=c.options[a],e=function(){c.execCommand(a,this.value)},f=[];for(var g in d)f.push({label:d[g]||c.getLang()[a][g]||"",value:g,theme:c.options.theme,onclick:e});var h=new b.MenuButton({editor:c,className:"edui-for-"+a,title:c.getLang("labelMap."+a)||"",items:f,onbuttonclick:function(){var b=c.queryCommandValue(a)||this.value;c.execCommand(a,b)}});return b.buttons[a]=h,c.addListener("selectionchange",function(){var b=c.queryCommandState(a);if(b==-1)h.setDisabled(!0);else{h.setDisabled(!1);var d=c.queryCommandValue(a);h.setValue(d),h.setChecked(b)}}),h}}(p);b.fullscreen=function(a,c){c=a.options.labelMap.fullscreen||a.getLang("labelMap.fullscreen")||"";var d=new b.Button({className:"edui-for-fullscreen",title:c,theme:a.options.theme,onclick:function(){a.ui&&a.ui.setFullScreen(!a.ui.isFullScreen()),this.setChecked(a.ui.isFullScreen())}});return b.buttons.fullscreen=d,a.addListener("selectionchange",function(){var b=a.queryCommandState("fullscreen");d.setDisabled(b==-1),d.setChecked(a.ui.isFullScreen())}),d},b.emotion=function(a,c){var e="emotion",f=new b.MultiMenuPop({title:a.options.labelMap[e]||a.getLang("labelMap."+e+"")||"",editor:a,className:"edui-for-"+e,iframeUrl:a.ui.mapUrl(c||(a.options.iframeUrlMap||{})[e]||d[e])});return b.buttons[e]=f,a.addListener("selectionchange",function(){f.setDisabled(a.queryCommandState(e)==-1)}),f},b.autotypeset=function(a){var c=new b.AutoTypeSetButton({editor:a,title:a.options.labelMap.autotypeset||a.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){a.execCommand("autotypeset")}});return b.buttons.autotypeset=c,a.addListener("selectionchange",function(){c.setDisabled(a.queryCommandState("autotypeset")==-1)}),c},b.simpleupload=function(a){var c="simpleupload",d=new b.Button({className:"edui-for-"+c,title:a.options.labelMap[c]||a.getLang("labelMap."+c)||"",onclick:function(){},theme:a.options.theme,showText:!1});return b.buttons[c]=d,a.addListener("ready",function(){var b=d.getDom("body"),c=b.children[0];a.fireEvent("simpleuploadbtnready",c)}),a.addListener("selectionchange",function(b,e,f){var g=a.queryCommandState(c);g==-1?(d.setDisabled(!0),d.setChecked(!1)):f||(d.setDisabled(!1),d.setChecked(g))}),d}}(),!function(){function f(a){this.initOptions(a),this.initEditorUI()}var a=baidu.editor.utils,b=baidu.editor.ui.uiUtils,c=baidu.editor.ui.UIBase,d=baidu.editor.dom.domUtils,e=[];f.prototype={uiName:"editor",initEditorUI:function(){function g(a,b){a.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:a.options.wordCountMsg||a.getLang("wordCountMsg"),wordOverFlowMsg:a.options.wordOverFlowMsg||a.getLang("wordOverFlowMsg")});var c=a.options,d=c.maximumWords,e=c.wordCountMsg,f=c.wordOverFlowMsg,g=b.getDom("wordcount");if(!c.wordCount)return;var h=a.getContentLength(!0);h>d?(g.innerHTML=f,a.fireEvent("wordcountoverflow")):g.innerHTML=e.replace("{#leave}",d-h).replace("{#count}",h)}this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var a=this.editor,b=this;a.addListener("ready",function(){a.getDialog=function(b){return a.ui._dialogs[b+"Dialog"]},d.on(a.window,"scroll",function(a){baidu.editor.ui.Popup.postHide(a)}),a.ui._actualFrameWidth=a.options.initialFrameWidth,UE.browser.ie&&UE.browser.version===6&&a.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),a.options.elementPathEnabled&&(a.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+a.getLang("elementPathTip")+":</div>");if(a.options.wordCount){function c(){g(a,b),d.un(a.document,"click",arguments.callee)}d.on(a.document,"click",c),a.ui.getDom("wordcount").innerHTML=a.getLang("wordCountTip")}a.ui._scale(),a.options.scaleEnabled?(a.autoHeightEnabled&&a.disableAutoHeight(),b.enableScale()):b.disableScale(),!a.options.elementPathEnabled&&!a.options.wordCount&&!a.options.scaleEnabled&&(a.ui.getDom("elementpath").style.display="none",a.ui.getDom("wordcount").style.display="none",a.ui.getDom("scale").style.display="none");if(!a.selection.isFocus())return;a.fireEvent("selectionchange",!1,!0)}),a.addListener("mousedown",function(a,b){var c=b.target||b.srcElement;baidu.editor.ui.Popup.postHide(b,c),baidu.editor.ui.ShortCutMenu.postHide(b)}),a.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(a),a.getDialog("edittip").open()});var c,e=!1,f;a.addListener("afterpaste",function(){if(a.queryCommandState("pasteplain"))return;baidu.editor.ui.PastePicker&&(c=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:a}),editor:a,className:"edui-wordpastepop"}),c.render()),e=!0}),a.addListener("afterinserthtml",function(){clearTimeout(f),f=setTimeout(function(){if(c&&(e||a.ui._isTransfer)){if(c.isHidden()){var b=d.createElement(a.document,"span",{style:"line-height:0px;",innerHTML:"﻿"}),f=a.selection.getRange();f.insertNode(b);var g=getDomNode(b,"firstChild","previousSibling");g&&c.showAnchor(g.nodeType==3?g.parentNode:g),d.remove(b)}else c.show();delete a.ui._isTransfer,e=!1}},200)}),a.addListener("contextmenu",function(a,b){baidu.editor.ui.Popup.postHide(b)}),a.addListener("keydown",function(a,b){c&&c.dispose(b);var d=b.keyCode||b.which;b.altKey&&d==90&&UE.ui.buttons.fullscreen.onclick()}),a.addListener("wordcount",function(a){g(this,b)}),a.addListener("selectionchange",function(){a.options.elementPathEnabled&&b[(a.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"](),a.options.scaleEnabled&&b[(a.queryCommandState("scale")==-1?"dis":"en")+"ableScale"]()});var h=new baidu.editor.ui.Popup({editor:a,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),a.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(b){this.hide(),a.ui._dialogs[b]&&a.ui._dialogs[b].open()},_onImgSetFloat:function(b){this.hide(),a.execCommand("imagefloat",b)},_setIframeAlign:function(a){var b=h.anchorEl,c=b.cloneNode(!0);switch(a){case-2:c.setAttribute("align","");break;case-1:c.setAttribute("align","left");break;case 1:c.setAttribute("align","right")}b.parentNode.insertBefore(c,b),d.remove(b),h.anchorEl=c,h.showAnchor(h.anchorEl)},_updateIframe:function(){var b=a._iframe=h.anchorEl;d.hasClass(b,"ueditor_baidumap")?(a.selection.getRange().selectNode(b).select(),a.ui._dialogs.mapDialog.open(),h.hide()):(a.ui._dialogs.insertframeDialog.open(),h.hide())},_onRemoveButtonClick:function(b){a.execCommand(b),this.hide()},queryAutoHide:function(b){if(b&&b.ownerDocument==a.document)if(b.tagName.toLowerCase()=="img"||d.findParentByTagName(b,"a",!0))return b!==h.anchorEl;return baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,b)}});h.render(),a.options.imagePopup&&(a.addListener("mouseover",function(b,c){c=c||window.event;var d=c.target||c.srcElement;if(a.ui._dialogs.insertframeDialog&&/iframe/gi.test(d.tagName)){var e=h.formatHtml("<nobr>"+a.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+a.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+a.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+a.getLang("justifyright")+"</span>&nbsp;&nbsp;"+' <span onclick="$$._updateIframe( this);" class="edui-clickable">'+a.getLang("modify")+"</span></nobr>");e?(h.getDom("content").innerHTML=e,h.anchorEl=d,h.showAnchor(h.anchorEl)):h.hide()}}),a.addListener("selectionchange",function(b,c){if(!c)return;var e="",f="",g=a.selection.getRange().getClosedNode(),i=a.ui._dialogs;if(g&&g.tagName=="IMG"){var j="insertimageDialog";if(g.className.indexOf("edui-faked-video")!=-1||g.className.indexOf("edui-upload-video")!=-1)j="insertvideoDialog";g.className.indexOf("edui-faked-webapp")!=-1&&(j="webappDialog"),g.src.indexOf("http://api.map.baidu.com")!=-1&&(j="mapDialog"),g.className.indexOf("edui-faked-music")!=-1&&(j="musicDialog"),g.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1&&(j="gmapDialog"),g.getAttribute("anchorname")&&(j="anchorDialog",e=h.formatHtml("<nobr>"+a.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+a.getLang("modify")+"</span>&nbsp;&nbsp;"+"<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+a.getLang("delete")+"</span></nobr>")),g.getAttribute("word_img")&&(a.word_img=[g.getAttribute("word_img")],j="wordimageDialog");if(d.hasClass(g,"loadingclass")||d.hasClass(g,"loaderrorclass"))j="";if(!i[j])return;f="<nobr>"+a.getLang("property")+": "+'<span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+a.getLang("default")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+a.getLang("justifyleft")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+a.getLang("justifyright")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+a.getLang("justifycenter")+"</span>&nbsp;&nbsp;"+"<span onclick=\"$$._onImgEditButtonClick('"+j+'\');" class="edui-clickable">'+a.getLang("modify")+"</span></nobr>",!e&&(e=h.formatHtml(f))}if(a.ui._dialogs.linkDialog){var k=a.queryCommandValue("link"),l;if(k&&(l=k.getAttribute("_href")||k.getAttribute("href",2))){var m=l;l.length>30&&(m=l.substring(0,20)+"..."),e&&(e+='<div style="height:5px;"></div>'),e+=h.formatHtml("<nobr>"+a.getLang("anthorMsg")+': <a target="_blank" href="'+l+'" title="'+l+'" >'+m+"</a>"+' <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+a.getLang("modify")+"</span>"+' <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+a.getLang("clear")+"</span></nobr>"),h.showAnchor(k)}}e?(h.getDom("content").innerHTML=e,h.anchorEl=g||k,h.showAnchor(h.anchorEl)):h.hide()}))},_initToolbars:function(){var b=this.editor,c=this.toolbars||[],d=[];for(var e=0;e<c.length;e++){var f=c[e],g=new baidu.editor.ui.Toolbar({theme:b.options.theme});for(var h=0;h<f.length;h++){var i=f[h],j=null;if(typeof i=="string"){i=i.toLowerCase(),i=="|"&&(i="Separator"),i=="||"&&(i="Breakline"),baidu.editor.ui[i]&&(j=new baidu.editor.ui[i](b));if(i=="fullscreen"){d&&d[0]?d[0].items.splice(0,0,j):j&&g.items.splice(0,0,j);continue}}else j=i;j&&j.id&&g.add(j)}d[e]=g}a.each(UE._customizeUI,function(a,c){var d,e;if(a.id&&a.id!=b.key)return!1;d=a.execFn.call(b,b,c),d&&(e=a.index,e===undefined&&(e=g.items.length),g.add(d,e))}),this.toolbars=d},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;">'+'<div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+"</div>"+'<div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div>'+'<div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div>'+'<div style="height:0;overflow:hidden;clear:both;"></div>'+"</div>"+'<div id="##_message_holder" class="%%-messageholder"></div>'+"</div>"+'<div id="##_iframeholder" class="%%-iframeholder">'+"</div>"+'<div id="##_bottombar" class="%%-bottomContainer"><table><tr>'+'<td id="##_elementpath" class="%%-bottombar"></td>'+'<td id="##_wordcount" class="%%-wordcount"></td>'+'<td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td>'+"</tr></table></div>"+'<div id="##_scalelayer"></div>'+"</div>"},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){var a=[];for(var b=0;b<this.toolbars.length;b++)a.push(this.toolbars[b].renderHtml());return a.join("")},setFullScreen:function(a){var b=this.editor,c=b.container.parentNode.parentNode;if(this._fullscreen!=a){this._fullscreen=a,this.editor.fireEvent("beforefullscreenchange",a);if(baidu.editor.browser.gecko)var d=b.selection.getRange().createBookmark();if(a){while(c.tagName!="BODY"){var f=baidu.editor.dom.domUtils.getComputedStyle(c,"position");e.push(f),c.style.position="static",c=c.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=b.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(b.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",window.scrollTo(0,window.scrollY),this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,b.iframe.parentNode.style.width="",this._updateFullScreen()}else{while(c.tagName!="BODY")c.style.position=e.shift(),c=c.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(b.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,b.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px",window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&b.body.contentEditable==="true"){var g=document.createElement("input");document.body.appendChild(g),b.body.contentEditable=!1,setTimeout(function(){g.focus(),setTimeout(function(){b.body.contentEditable=!0,b.fireEvent("fullscreenchanged",a),b.selection.getRange().moveToBookmark(d).select(!0),baidu.editor.dom.domUtils.remove(g),a&&window.scroll(0,0)},0)},0)}b.body.contentEditable==="true"&&(this.editor.fireEvent("fullscreenchanged",a),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var a=b.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+a.width+"px;height:"+a.height+"px;z-index:"+(this.getDom().style.zIndex*1+100),b.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(a.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0);if(browser.gecko)try{window.onresize()}catch(c){}}},_updateElementPath:function(){var a=this.getDom("elementpath"),b;if(this.elementPathEnabled&&(b=this.editor.queryCommandValue("elementpath"))){var c=[];for(var d=0,e;e=b[d];d++)c[d]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+d+'&quot;);">'+e+"</span>");a.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+c.join(" &gt; ")+"</div>"}else a.style.display="none"},disableElementPath:function(){var a=this.getDom("elementpath");a.innerHTML="",a.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){var a=this.getDom("elementpath");a.style.display="",this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function r(){k=d.getXY(c),l||(l=b.options.minFrameHeight+f.offsetHeight+g.offsetHeight),i.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+c.offsetWidth+"px;height:"+c.offsetHeight+"px;z-index:"+(b.options.zIndex+1),d.on(a,"mousemove",t),d.on(e,"mouseup",u),d.on(a,"mouseup",u)}function t(b){v();var c=b||window.event;n=c.pageX||a.documentElement.scrollLeft+c.clientX,o=c.pageY||a.documentElement.scrollTop+c.clientY,p=n-k.x,q=o-k.y,p>=m&&(j=!0,i.style.width=p+"px"),q>=l&&(j=!0,i.style.height=q+"px")}function u(){j&&(j=!1,b.ui._actualFrameWidth=i.offsetWidth-2,c.style.width=b.ui._actualFrameWidth+"px",b.setHeight(i.offsetHeight-g.offsetHeight-f.offsetHeight-2,!0)),i&&(i.style.display="none"),v(),d.un(a,"mousemove",t),d.un(e,"mouseup",u),d.un(a,"mouseup",u)}function v(){browser.ie?a.selection.clear():window.getSelection().removeAllRanges()}var a=document,b=this.editor,c=b.container,e=b.document,f=this.getDom("toolbarbox"),g=this.getDom("bottombar"),h=this.getDom("scale"),i=this.getDom("scalelayer"),j=!1,k=null,l=0,m=b.options.minFrameWidth,n=0,o=0,p=0,q=0,s=this;this.editor.addListener("fullscreenchanged",function(a,b){if(b)s.disableScale();else if(s.editor.options.scaleEnabled){s.enableScale();var c=s.editor.document.createElement("span");s.editor.body.appendChild(c),s.editor.body.style.height=Math.max(d.getXY(c).y,s.editor.iframe.offsetHeight-20)+"px",d.remove(c)}}),this.enableScale=function(){if(b.queryCommandState("source")==1)return;h.style.display="",this.scaleEnabled=!0,d.on(h,"mousedown",r)},this.disableScale=function(){h.style.display="none",this.scaleEnabled=!1,d.un(h,"mousedown",r)}},isFullScreen:function(){return this._fullscreen},postRender:function(){c.prototype.postRender.call(this);for(var a=0;a<this.toolbars.length;a++)this.toolbars[a].postRender();var b=this,d,e=baidu.editor.dom.domUtils,f=function(){clearTimeout(d),d=setTimeout(function(){b._updateFullScreen()})};e.on(window,"resize",f),b.addListener("destroy",function(){e.un(window,"resize",f),clearTimeout(d)})},showToolbarMsg:function(a,b){this.getDom("toolbarmsg_label").innerHTML=a,this.getDom("toolbarmsg").style.display="";if(!b){var c=this.getDom("upload_dialog");c.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(a){return a?a.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var a=this.getDom();a.style.zoom=="1"?a.style.zoom="100%":a.style.zoom="1"}},a.inherits(f,baidu.editor.ui.UIBase);var g={};UE.ui.Editor=function(b){var c=new UE.Editor(b);c.options.editor=c,a.loadFile(document,{href:c.options.themePath+c.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var e=c.render;return c.render=function(b){b.constructor===String&&(c.key=b,g[b]=c),a.domReady(function(){function a(){c.setOpt({labelMap:c.options.labelMap||c.getLang("labelMap")}),new f(c.options);if(b){b.constructor===String&&(b=document.getElementById(b)),b&&b.getAttribute("name")&&(c.options.textarea=b.getAttribute("name"));if(b&&/script|textarea/gi.test(b.tagName)){var a=document.createElement("div");b.parentNode.insertBefore(a,b);var g=b.value||b.innerHTML;c.options.initialContent=/^[\t\r\n ]*$/.test(g)?c.options.initialContent:g.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),b.className&&(a.className=b.className),b.style.cssText&&(a.style.cssText=b.style.cssText),/textarea/i.test(b.tagName)?(c.textarea=b,c.textarea.style.display="none"):b.parentNode.removeChild(b),b.id&&(a.id=b.id,d.removeAttributes(b,"id")),b=a,b.innerHTML=""}}d.addClass(b,"edui-"+c.options.theme),c.ui.render(b);var h=c.options;c.container=c.ui.getDom();var i=d.findParents(b,!0),j=[];for(var k=0,l;l=i[k];k++)j[k]=l.style.display,l.style.display="block";if(h.initialFrameWidth)h.minFrameWidth=h.initialFrameWidth;else{h.minFrameWidth=h.initialFrameWidth=b.offsetWidth;var m=b.style.width;/%$/.test(m)&&(h.initialFrameWidth=m)}h.initialFrameHeight?h.minFrameHeight=h.initialFrameHeight:h.initialFrameHeight=h.minFrameHeight=b.offsetHeight;for(var k=0,l;l=i[k];k++)l.style.display=j[k];b.style.height&&(b.style.height=""),c.container.style.width=h.initialFrameWidth+(/%$/.test(h.initialFrameWidth)?"":"px"),c.container.style.zIndex=h.zIndex,e.call(c,c.ui.getDom("iframeholder")),c.fireEvent("afteruiready")}c.langIsReady?a():c.addListener("langReady",a)})},c},UE.getEditor=function(a,b){var c=g[a];return c||(c=g[a]=new UE.ui.Editor(b),c.render(a)),c},UE.delEditor=function(a){var b;if(b=g[a])b.key&&b.destroy(),delete g[a]},UE.registerUI=function(b,c,d,e){a.each(b.split(/\s+/),function(a){UE._customizeUI[a]={id:e,execFn:c,index:d}})}}(),UE.registerUI("message",function(a){function g(){var a=f.ui.getDom("toolbarbox");a&&(d.style.top=a.offsetHeight+3+"px"),d.style.zIndex=Math.max(f.options.zIndex,f.iframe.style.zIndex)+1}var b=baidu.editor.ui,c=b.Message,d,e=[],f=a;f.addListener("ready",function(){d=document.getElementById(f.ui.id+"_message_holder"),g(),setTimeout(function(){g()},500)}),f.addListener("showmessage",function(a,b){b=utils.isString(b)?{content:b}:b;var h=new c({timeout:b.timeout,type:b.type,content:b.content,keepshow:b.keepshow,editor:f}),i=b.id||"msg_"+(+(new Date)).toString(36);return h.render(d),e[i]=h,h.reset(b),g(),i}),f.addListener("updatemessage",function(a,b,c){c=utils.isString(c)?{content:c}:c;var f=e[b];f.render(d),f&&f.reset(c)}),f.addListener("hidemessage",function(a,b){var c=e[b];c&&c.hide()})}),UE.registerUI("autosave",function(a){var b=null,c=null;a.on("afterautosave",function(){clearTimeout(b),b=setTimeout(function(){c&&a.trigger("hidemessage",c),c=a.trigger("showmessage",{content:a.getLang("autosave.success"),timeout:2e3})},2e3)})})}()